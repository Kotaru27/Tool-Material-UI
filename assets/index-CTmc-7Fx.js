var UA=Object.defineProperty;var Dy=n=>{throw TypeError(n)};var $A=(n,t,e)=>t in n?UA(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var gt=(n,t,e)=>$A(n,typeof t!="symbol"?t+"":t,e),Ag=(n,t,e)=>t.has(n)||Dy("Cannot "+e);var l=(n,t,e)=>(Ag(n,t,"read from private field"),e?e.call(n):t.get(n)),C=(n,t,e)=>t.has(n)?Dy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),x=(n,t,e,s)=>(Ag(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),T=(n,t,e)=>(Ag(n,t,"access private method"),e);var an=(n,t,e,s)=>({set _(i){x(n,t,i,e)},get _(){return l(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var y1={exports:{}},Qp={},w1={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=Symbol.for("react.element"),WA=Symbol.for("react.portal"),GA=Symbol.for("react.fragment"),VA=Symbol.for("react.strict_mode"),XA=Symbol.for("react.profiler"),YA=Symbol.for("react.provider"),qA=Symbol.for("react.context"),KA=Symbol.for("react.forward_ref"),ZA=Symbol.for("react.suspense"),QA=Symbol.for("react.memo"),JA=Symbol.for("react.lazy"),Oy=Symbol.iterator;function tS(n){return n===null||typeof n!="object"?null:(n=Oy&&n[Oy]||n["@@iterator"],typeof n=="function"?n:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x1=Object.assign,_1={};function Mc(n,t,e){this.props=n,this.context=t,this.refs=_1,this.updater=e||b1}Mc.prototype.isReactComponent={};Mc.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Mc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function A1(){}A1.prototype=Mc.prototype;function yv(n,t,e){this.props=n,this.context=t,this.refs=_1,this.updater=e||b1}var wv=yv.prototype=new A1;wv.constructor=yv;x1(wv,Mc.prototype);wv.isPureReactComponent=!0;var jy=Array.isArray,S1=Object.prototype.hasOwnProperty,bv={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function E1(n,t,e){var s,i={},r=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(r=""+t.key),t)S1.call(t,s)&&!k1.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(o===1)i.children=e;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Td,type:n,key:r,ref:a,props:i,_owner:bv.current}}function eS(n,t){return{$$typeof:Td,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function xv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Td}function nS(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var zy=/\/+/g;function Sg(n,t){return typeof n=="object"&&n!==null&&n.key!=null?nS(""+n.key):t.toString(36)}function hf(n,t,e,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Td:case WA:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+Sg(a,0):s,jy(i)?(e="",n!=null&&(e=n.replace(zy,"$&/")+"/"),hf(i,t,e,"",function(u){return u})):i!=null&&(xv(i)&&(i=eS(i,e+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(zy,"$&/")+"/")+n)),t.push(i)),1;if(a=0,s=s===""?".":s+":",jy(n))for(var o=0;o<n.length;o++){r=n[o];var c=s+Sg(r,o);a+=hf(r,t,e,c,i)}else if(c=tS(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=s+Sg(r,o++),a+=hf(r,t,e,c,i);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ud(n,t,e){if(n==null)return n;var s=[],i=0;return hf(n,s,"","",function(r){return t.call(e,r,i++)}),s}function sS(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var vn={current:null},df={transition:null},iS={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:df,ReactCurrentOwner:bv};function C1(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Ud,forEach:function(n,t,e){Ud(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Ud(n,function(){t++}),t},toArray:function(n){return Ud(n,function(t){return t})||[]},only:function(n){if(!xv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Tt.Component=Mc;Tt.Fragment=GA;Tt.Profiler=XA;Tt.PureComponent=yv;Tt.StrictMode=VA;Tt.Suspense=ZA;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;Tt.act=C1;Tt.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=x1({},n.props),i=n.key,r=n.ref,a=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,a=bv.current),t.key!==void 0&&(i=""+t.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in t)S1.call(t,c)&&!k1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=e;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Td,type:n.type,key:i,ref:r,props:s,_owner:a}};Tt.createContext=function(n){return n={$$typeof:qA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:YA,_context:n},n.Consumer=n};Tt.createElement=E1;Tt.createFactory=function(n){var t=E1.bind(null,n);return t.type=n,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(n){return{$$typeof:KA,render:n}};Tt.isValidElement=xv;Tt.lazy=function(n){return{$$typeof:JA,_payload:{_status:-1,_result:n},_init:sS}};Tt.memo=function(n,t){return{$$typeof:QA,type:n,compare:t===void 0?null:t}};Tt.startTransition=function(n){var t=df.transition;df.transition={};try{n()}finally{df.transition=t}};Tt.unstable_act=C1;Tt.useCallback=function(n,t){return vn.current.useCallback(n,t)};Tt.useContext=function(n){return vn.current.useContext(n)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(n){return vn.current.useDeferredValue(n)};Tt.useEffect=function(n,t){return vn.current.useEffect(n,t)};Tt.useId=function(){return vn.current.useId()};Tt.useImperativeHandle=function(n,t,e){return vn.current.useImperativeHandle(n,t,e)};Tt.useInsertionEffect=function(n,t){return vn.current.useInsertionEffect(n,t)};Tt.useLayoutEffect=function(n,t){return vn.current.useLayoutEffect(n,t)};Tt.useMemo=function(n,t){return vn.current.useMemo(n,t)};Tt.useReducer=function(n,t,e){return vn.current.useReducer(n,t,e)};Tt.useRef=function(n){return vn.current.useRef(n)};Tt.useState=function(n){return vn.current.useState(n)};Tt.useSyncExternalStore=function(n,t,e){return vn.current.useSyncExternalStore(n,t,e)};Tt.useTransition=function(){return vn.current.useTransition()};Tt.version="18.3.1";w1.exports=Tt;var ht=w1.exports;const rS=v1(ht);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=ht,oS=Symbol.for("react.element"),lS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,uS=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hS={key:!0,ref:!0,__self:!0,__source:!0};function T1(n,t,e){var s,i={},r=null,a=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)cS.call(t,s)&&!hS.hasOwnProperty(s)&&(i[s]=t[s]);if(n&&n.defaultProps)for(s in t=n.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:oS,type:n,key:r,ref:a,props:i,_owner:uS.current}}Qp.Fragment=lS;Qp.jsx=T1;Qp.jsxs=T1;y1.exports=Qp;var E=y1.exports,lm={},P1={exports:{}},Zn={},R1={exports:{}},N1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(X,U){var K=X.length;X.push(U);t:for(;0<K;){var O=K-1>>>1,j=X[O];if(0<i(j,U))X[O]=U,X[K]=j,K=O;else break t}}function e(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var U=X[0],K=X.pop();if(K!==U){X[0]=K;t:for(var O=0,j=X.length,it=j>>>1;O<it;){var nt=2*(O+1)-1,J=X[nt],vt=nt+1,yt=X[vt];if(0>i(J,K))vt<j&&0>i(yt,J)?(X[O]=yt,X[vt]=K,O=vt):(X[O]=J,X[nt]=K,O=nt);else if(vt<j&&0>i(yt,K))X[O]=yt,X[vt]=K,O=vt;else break t}}return U}function i(X,U){var K=X.sortIndex-U.sortIndex;return K!==0?K:X.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,g=!1,v=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var U=e(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=X)s(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=e(u)}}function _(X){if(p=!1,b(X),!v)if(e(c)!==null)v=!0,Y(S);else{var U=e(u);U!==null&&H(_,U.startTime-X)}}function S(X,U){v=!1,p&&(p=!1,m(I),I=-1),g=!0;var K=f;try{for(b(U),d=e(c);d!==null&&(!(d.expirationTime>U)||X&&!$());){var O=d.callback;if(typeof O=="function"){d.callback=null,f=d.priorityLevel;var j=O(d.expirationTime<=U);U=n.unstable_now(),typeof j=="function"?d.callback=j:d===e(c)&&s(c),b(U)}else s(c);d=e(c)}if(d!==null)var it=!0;else{var nt=e(u);nt!==null&&H(_,nt.startTime-U),it=!1}return it}finally{d=null,f=K,g=!1}}var R=!1,P=null,I=-1,M=5,D=-1;function $(){return!(n.unstable_now()-D<M)}function N(){if(P!==null){var X=n.unstable_now();D=X;var U=!0;try{U=P(!0,X)}finally{U?B():(R=!1,P=null)}}else R=!1}var B;if(typeof y=="function")B=function(){y(N)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=N,B=function(){G.postMessage(null)}}else B=function(){w(N,0)};function Y(X){P=X,R||(R=!0,B())}function H(X,U){I=w(function(){X(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,Y(S))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(X){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var K=f;f=U;try{return X()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,U){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var K=f;f=X;try{return U()}finally{f=K}},n.unstable_scheduleCallback=function(X,U,K){var O=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?O+K:O):K=O,X){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=K+j,X={id:h++,callback:U,priorityLevel:X,startTime:K,expirationTime:j,sortIndex:-1},K>O?(X.sortIndex=K,t(u,X),e(c)===null&&X===e(u)&&(p?(m(I),I=-1):p=!0,H(_,K-O))):(X.sortIndex=j,t(c,X),v||g||(v=!0,Y(S))),X},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(X){var U=f;return function(){var K=f;f=U;try{return X.apply(this,arguments)}finally{f=K}}}})(N1);R1.exports=N1;var dS=R1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=ht,Kn=dS;function tt(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I1=new Set,Du={};function Uo(n,t){Cc(n,t),Cc(n+"Capture",t)}function Cc(n,t){for(Du[n]=t,n=0;n<t.length;n++)I1.add(t[n])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=Object.prototype.hasOwnProperty,pS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,By={},Hy={};function gS(n){return cm.call(Hy,n)?!0:cm.call(By,n)?!1:pS.test(n)?Hy[n]=!0:(By[n]=!0,!1)}function mS(n,t,e,s){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function vS(n,t,e,s){if(t===null||typeof t>"u"||mS(n,t,e,s))return!0;if(s)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yn(n,t,e,s,i,r,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){We[n]=new yn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];We[t]=new yn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){We[n]=new yn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){We[n]=new yn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){We[n]=new yn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){We[n]=new yn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){We[n]=new yn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){We[n]=new yn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){We[n]=new yn(n,5,!1,n.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function Av(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(_v,Av);We[t]=new yn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(_v,Av);We[t]=new yn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(_v,Av);We[t]=new yn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){We[n]=new yn(n,1,!1,n.toLowerCase(),null,!1,!1)});We.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){We[n]=new yn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Sv(n,t,e,s){var i=We.hasOwnProperty(t)?We[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vS(t,e,i,s)&&(e=null),s||i===null?gS(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):i.mustUseProperty?n[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,s=i.attributeNamespace,e===null?n.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,s?n.setAttributeNS(s,t,e):n.setAttribute(t,e))))}var cr=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$d=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),L1=Symbol.for("react.provider"),M1=Symbol.for("react.context"),Ev=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),F1=Symbol.for("react.offscreen"),Uy=Symbol.iterator;function Wc(n){return n===null||typeof n!="object"?null:(n=Uy&&n[Uy]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,kg;function iu(n){if(kg===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);kg=t&&t[1]||""}return`
`+kg+n}var Eg=!1;function Cg(n,t){if(!n||Eg)return"";Eg=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){s=u}n.call(t.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var c=`
`+i[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{Eg=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?iu(n):""}function yS(n){switch(n.tag){case 5:return iu(n.type);case 16:return iu("Lazy");case 13:return iu("Suspense");case 19:return iu("SuspenseList");case 0:case 2:case 15:return n=Cg(n.type,!1),n;case 11:return n=Cg(n.type.render,!1),n;case 1:return n=Cg(n.type,!0),n;default:return""}}function fm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case tl:return"Fragment";case Jo:return"Portal";case um:return"Profiler";case kv:return"StrictMode";case hm:return"Suspense";case dm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case M1:return(n.displayName||"Context")+".Consumer";case L1:return(n._context.displayName||"Context")+".Provider";case Ev:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Cv:return t=n.displayName||null,t!==null?t:fm(n.type)||"Memo";case pr:t=n._payload,n=n._init;try{return fm(n(t))}catch{}}return null}function wS(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(t);case 8:return t===kv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function aa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function D1(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bS(n){var t=D1(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),s=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Wd(n){n._valueTracker||(n._valueTracker=bS(n))}function O1(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),s="";return n&&(s=D1(n)?n.checked?"true":"false":n.value),n=s,n!==e?(t.setValue(n),!0):!1}function Jf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pm(n,t){var e=t.checked;return re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function $y(n,t){var e=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;e=aa(t.value!=null?t.value:e),n._wrapperState={initialChecked:s,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j1(n,t){t=t.checked,t!=null&&Sv(n,"checked",t,!1)}function gm(n,t){j1(n,t);var e=aa(t.value),s=t.type;if(e!=null)s==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?mm(n,t.type,e):t.hasOwnProperty("defaultValue")&&mm(n,t.type,aa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function Wy(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function mm(n,t,e){(t!=="number"||Jf(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var ru=Array.isArray;function fl(n,t,e,s){if(n=n.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<n.length;e++)i=t.hasOwnProperty("$"+n[e].value),n[e].selected!==i&&(n[e].selected=i),i&&s&&(n[e].defaultSelected=!0)}else{for(e=""+aa(e),t=null,i=0;i<n.length;i++){if(n[i].value===e){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function vm(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return re({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Gy(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(tt(92));if(ru(e)){if(1<e.length)throw Error(tt(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:aa(e)}}function z1(n,t){var e=aa(t.value),s=aa(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),s!=null&&(n.defaultValue=""+s)}function Vy(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function B1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?B1(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gd,H1=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,s,i){MSApp.execUnsafeLocalFunction(function(){return n(t,e,s,i)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Gd=Gd||document.createElement("div"),Gd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function Ou(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xS=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(n){xS.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Su[t]=Su[n]})});function U1(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Su.hasOwnProperty(n)&&Su[n]?(""+t).trim():t+"px"}function $1(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var s=e.indexOf("--")===0,i=U1(e,t[e],s);e==="float"&&(e="cssFloat"),s?n.setProperty(e,i):n[e]=i}}var _S=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wm(n,t){if(t){if(_S[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function bm(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function Tv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _m=null,pl=null,gl=null;function Xy(n){if(n=Nd(n)){if(typeof _m!="function")throw Error(tt(280));var t=n.stateNode;t&&(t=sg(t),_m(n.stateNode,n.type,t))}}function W1(n){pl?gl?gl.push(n):gl=[n]:pl=n}function G1(){if(pl){var n=pl,t=gl;if(gl=pl=null,Xy(n),t)for(n=0;n<t.length;n++)Xy(t[n])}}function V1(n,t){return n(t)}function X1(){}var Tg=!1;function Y1(n,t,e){if(Tg)return n(t,e);Tg=!0;try{return V1(n,t,e)}finally{Tg=!1,(pl!==null||gl!==null)&&(X1(),G1())}}function ju(n,t){var e=n.stateNode;if(e===null)return null;var s=sg(e);if(s===null)return null;e=s[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(tt(231,t,typeof e));return e}var Am=!1;if(sr)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{Am=!1}function AS(n,t,e,s,i,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var ku=!1,tp=null,ep=!1,Sm=null,SS={onError:function(n){ku=!0,tp=n}};function kS(n,t,e,s,i,r,a,o,c){ku=!1,tp=null,AS.apply(SS,arguments)}function ES(n,t,e,s,i,r,a,o,c){if(kS.apply(this,arguments),ku){if(ku){var u=tp;ku=!1,tp=null}else throw Error(tt(198));ep||(ep=!0,Sm=u)}}function $o(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function q1(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Yy(n){if($o(n)!==n)throw Error(tt(188))}function CS(n){var t=n.alternate;if(!t){if(t=$o(n),t===null)throw Error(tt(188));return t!==n?null:n}for(var e=n,s=t;;){var i=e.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){e=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===e)return Yy(i),n;if(r===s)return Yy(i),t;r=r.sibling}throw Error(tt(188))}if(e.return!==s.return)e=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===e){a=!0,e=i,s=r;break}if(o===s){a=!0,s=i,e=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===e){a=!0,e=r,s=i;break}if(o===s){a=!0,s=r,e=i;break}o=o.sibling}if(!a)throw Error(tt(189))}}if(e.alternate!==s)throw Error(tt(190))}if(e.tag!==3)throw Error(tt(188));return e.stateNode.current===e?n:t}function K1(n){return n=CS(n),n!==null?Z1(n):null}function Z1(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=Z1(n);if(t!==null)return t;n=n.sibling}return null}var Q1=Kn.unstable_scheduleCallback,qy=Kn.unstable_cancelCallback,TS=Kn.unstable_shouldYield,PS=Kn.unstable_requestPaint,fe=Kn.unstable_now,RS=Kn.unstable_getCurrentPriorityLevel,Pv=Kn.unstable_ImmediatePriority,J1=Kn.unstable_UserBlockingPriority,np=Kn.unstable_NormalPriority,NS=Kn.unstable_LowPriority,tb=Kn.unstable_IdlePriority,Jp=null,pi=null;function IS(n){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(Jp,n,void 0,(n.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:FS,LS=Math.log,MS=Math.LN2;function FS(n){return n>>>=0,n===0?32:31-(LS(n)/MS|0)|0}var Vd=64,Xd=4194304;function au(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function sp(n,t){var e=n.pendingLanes;if(e===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=e&268435455;if(a!==0){var o=a&~i;o!==0?s=au(o):(r&=a,r!==0&&(s=au(r)))}else a=e&~i,a!==0?s=au(a):r!==0&&(s=au(r));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(s&4&&(s|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=s;0<t;)e=31-Os(t),i=1<<e,s|=n[e],t&=~i;return s}function DS(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OS(n,t){for(var e=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-Os(r),o=1<<a,c=i[a];c===-1?(!(o&e)||o&s)&&(i[a]=DS(o,t)):c<=t&&(n.expiredLanes|=o),r&=~o}}function km(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function eb(){var n=Vd;return Vd<<=1,!(Vd&4194240)&&(Vd=64),n}function Pg(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function Pd(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-Os(t),n[t]=e}function jS(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<e;){var i=31-Os(e),r=1<<i;t[i]=0,s[i]=-1,n[i]=-1,e&=~r}}function Rv(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var s=31-Os(e),i=1<<s;i&t|n[s]&t&&(n[s]|=t),e&=~i}}var zt=0;function nb(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var sb,Nv,ib,rb,ab,Em=!1,Yd=[],Zr=null,Qr=null,Jr=null,zu=new Map,Bu=new Map,mr=[],zS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(n,t){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":zu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(t.pointerId)}}function Vc(n,t,e,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Nd(t),t!==null&&Nv(t)),n):(n.eventSystemFlags|=s,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function BS(n,t,e,s,i){switch(t){case"focusin":return Zr=Vc(Zr,n,t,e,s,i),!0;case"dragenter":return Qr=Vc(Qr,n,t,e,s,i),!0;case"mouseover":return Jr=Vc(Jr,n,t,e,s,i),!0;case"pointerover":var r=i.pointerId;return zu.set(r,Vc(zu.get(r)||null,n,t,e,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Bu.set(r,Vc(Bu.get(r)||null,n,t,e,s,i)),!0}return!1}function ob(n){var t=Aa(n.target);if(t!==null){var e=$o(t);if(e!==null){if(t=e.tag,t===13){if(t=q1(e),t!==null){n.blockedOn=t,ab(n.priority,function(){ib(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ff(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Cm(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var s=new e.constructor(e.type,e);xm=s,e.target.dispatchEvent(s),xm=null}else return t=Nd(e),t!==null&&Nv(t),n.blockedOn=e,!1;t.shift()}return!0}function Zy(n,t,e){ff(n)&&e.delete(t)}function HS(){Em=!1,Zr!==null&&ff(Zr)&&(Zr=null),Qr!==null&&ff(Qr)&&(Qr=null),Jr!==null&&ff(Jr)&&(Jr=null),zu.forEach(Zy),Bu.forEach(Zy)}function Xc(n,t){n.blockedOn===t&&(n.blockedOn=null,Em||(Em=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,HS)))}function Hu(n){function t(i){return Xc(i,n)}if(0<Yd.length){Xc(Yd[0],n);for(var e=1;e<Yd.length;e++){var s=Yd[e];s.blockedOn===n&&(s.blockedOn=null)}}for(Zr!==null&&Xc(Zr,n),Qr!==null&&Xc(Qr,n),Jr!==null&&Xc(Jr,n),zu.forEach(t),Bu.forEach(t),e=0;e<mr.length;e++)s=mr[e],s.blockedOn===n&&(s.blockedOn=null);for(;0<mr.length&&(e=mr[0],e.blockedOn===null);)ob(e),e.blockedOn===null&&mr.shift()}var ml=cr.ReactCurrentBatchConfig,ip=!0;function US(n,t,e,s){var i=zt,r=ml.transition;ml.transition=null;try{zt=1,Iv(n,t,e,s)}finally{zt=i,ml.transition=r}}function $S(n,t,e,s){var i=zt,r=ml.transition;ml.transition=null;try{zt=4,Iv(n,t,e,s)}finally{zt=i,ml.transition=r}}function Iv(n,t,e,s){if(ip){var i=Cm(n,t,e,s);if(i===null)zg(n,t,s,rp,e),Ky(n,s);else if(BS(i,n,t,e,s))s.stopPropagation();else if(Ky(n,s),t&4&&-1<zS.indexOf(n)){for(;i!==null;){var r=Nd(i);if(r!==null&&sb(r),r=Cm(n,t,e,s),r===null&&zg(n,t,s,rp,e),r===i)break;i=r}i!==null&&s.stopPropagation()}else zg(n,t,s,null,e)}}var rp=null;function Cm(n,t,e,s){if(rp=null,n=Tv(s),n=Aa(n),n!==null)if(t=$o(n),t===null)n=null;else if(e=t.tag,e===13){if(n=q1(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return rp=n,null}function lb(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RS()){case Pv:return 1;case J1:return 4;case np:case NS:return 16;case tb:return 536870912;default:return 16}default:return 16}}var qr=null,Lv=null,pf=null;function cb(){if(pf)return pf;var n,t=Lv,e=t.length,s,i="value"in qr?qr.value:qr.textContent,r=i.length;for(n=0;n<e&&t[n]===i[n];n++);var a=e-n;for(s=1;s<=a&&t[e-s]===i[r-s];s++);return pf=i.slice(n,1<s?1-s:void 0)}function gf(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function qd(){return!0}function Qy(){return!1}function Qn(n){function t(e,s,i,r,a){this._reactName=e,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?qd:Qy,this.isPropagationStopped=Qy,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=qd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=qd)},persist:function(){},isPersistent:qd}),t}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=Qn(Fc),Rd=re({},Fc,{view:0,detail:0}),WS=Qn(Rd),Rg,Ng,Yc,tg=re({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yc&&(Yc&&n.type==="mousemove"?(Rg=n.screenX-Yc.screenX,Ng=n.screenY-Yc.screenY):Ng=Rg=0,Yc=n),Rg)},movementY:function(n){return"movementY"in n?n.movementY:Ng}}),Jy=Qn(tg),GS=re({},tg,{dataTransfer:0}),VS=Qn(GS),XS=re({},Rd,{relatedTarget:0}),Ig=Qn(XS),YS=re({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),qS=Qn(YS),KS=re({},Fc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ZS=Qn(KS),QS=re({},Fc,{data:0}),tw=Qn(QS),JS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=e2[n])?!!t[n]:!1}function Fv(){return n2}var s2=re({},Rd,{key:function(n){if(n.key){var t=JS[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=gf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?t2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fv,charCode:function(n){return n.type==="keypress"?gf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i2=Qn(s2),r2=re({},tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ew=Qn(r2),a2=re({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fv}),o2=Qn(a2),l2=re({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=Qn(l2),u2=re({},tg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Qn(u2),d2=[9,13,27,32],Dv=sr&&"CompositionEvent"in window,Eu=null;sr&&"documentMode"in document&&(Eu=document.documentMode);var f2=sr&&"TextEvent"in window&&!Eu,ub=sr&&(!Dv||Eu&&8<Eu&&11>=Eu),nw=" ",sw=!1;function hb(n,t){switch(n){case"keyup":return d2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function db(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var el=!1;function p2(n,t){switch(n){case"compositionend":return db(t);case"keypress":return t.which!==32?null:(sw=!0,nw);case"textInput":return n=t.data,n===nw&&sw?null:n;default:return null}}function g2(n,t){if(el)return n==="compositionend"||!Dv&&hb(n,t)?(n=cb(),pf=Lv=qr=null,el=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ub&&t.locale!=="ko"?null:t.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iw(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!m2[n.type]:t==="textarea"}function fb(n,t,e,s){W1(s),t=ap(t,"onChange"),0<t.length&&(e=new Mv("onChange","change",null,e,s),n.push({event:e,listeners:t}))}var Cu=null,Uu=null;function v2(n){Sb(n,0)}function eg(n){var t=il(n);if(O1(t))return n}function y2(n,t){if(n==="change")return t}var pb=!1;if(sr){var Lg;if(sr){var Mg="oninput"in document;if(!Mg){var rw=document.createElement("div");rw.setAttribute("oninput","return;"),Mg=typeof rw.oninput=="function"}Lg=Mg}else Lg=!1;pb=Lg&&(!document.documentMode||9<document.documentMode)}function aw(){Cu&&(Cu.detachEvent("onpropertychange",gb),Uu=Cu=null)}function gb(n){if(n.propertyName==="value"&&eg(Uu)){var t=[];fb(t,Uu,n,Tv(n)),Y1(v2,t)}}function w2(n,t,e){n==="focusin"?(aw(),Cu=t,Uu=e,Cu.attachEvent("onpropertychange",gb)):n==="focusout"&&aw()}function b2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return eg(Uu)}function x2(n,t){if(n==="click")return eg(t)}function _2(n,t){if(n==="input"||n==="change")return eg(t)}function A2(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Bs=typeof Object.is=="function"?Object.is:A2;function $u(n,t){if(Bs(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),s=Object.keys(t);if(e.length!==s.length)return!1;for(s=0;s<e.length;s++){var i=e[s];if(!cm.call(t,i)||!Bs(n[i],t[i]))return!1}return!0}function ow(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function lw(n,t){var e=ow(n);n=0;for(var s;e;){if(e.nodeType===3){if(s=n+e.textContent.length,n<=t&&s>=t)return{node:e,offset:t-n};n=s}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=ow(e)}}function mb(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?mb(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function vb(){for(var n=window,t=Jf();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=Jf(n.document)}return t}function Ov(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function S2(n){var t=vb(),e=n.focusedElem,s=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&mb(e.ownerDocument.documentElement,e)){if(s!==null&&Ov(e)){if(t=s.start,n=s.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var i=e.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=lw(e,r);var a=lw(e,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(t),n.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var k2=sr&&"documentMode"in document&&11>=document.documentMode,nl=null,Tm=null,Tu=null,Pm=!1;function cw(n,t,e){var s=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Pm||nl==null||nl!==Jf(s)||(s=nl,"selectionStart"in s&&Ov(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Tu&&$u(Tu,s)||(Tu=s,s=ap(Tm,"onSelect"),0<s.length&&(t=new Mv("onSelect","select",null,t,e),n.push({event:t,listeners:s}),t.target=nl)))}function Kd(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var sl={animationend:Kd("Animation","AnimationEnd"),animationiteration:Kd("Animation","AnimationIteration"),animationstart:Kd("Animation","AnimationStart"),transitionend:Kd("Transition","TransitionEnd")},Fg={},yb={};sr&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function ng(n){if(Fg[n])return Fg[n];if(!sl[n])return n;var t=sl[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in yb)return Fg[n]=t[e];return n}var wb=ng("animationend"),bb=ng("animationiteration"),xb=ng("animationstart"),_b=ng("transitionend"),Ab=new Map,uw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(n,t){Ab.set(n,t),Uo(t,[n])}for(var Dg=0;Dg<uw.length;Dg++){var Og=uw[Dg],E2=Og.toLowerCase(),C2=Og[0].toUpperCase()+Og.slice(1);da(E2,"on"+C2)}da(wb,"onAnimationEnd");da(bb,"onAnimationIteration");da(xb,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(_b,"onTransitionEnd");Cc("onMouseEnter",["mouseout","mouseover"]);Cc("onMouseLeave",["mouseout","mouseover"]);Cc("onPointerEnter",["pointerout","pointerover"]);Cc("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function hw(n,t,e){var s=n.type||"unknown-event";n.currentTarget=e,ES(s,t,void 0,n),n.currentTarget=null}function Sb(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var s=n[e],i=s.event;s=s.listeners;t:{var r=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&i.isPropagationStopped())break t;hw(i,o,u),r=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&i.isPropagationStopped())break t;hw(i,o,u),r=c}}}if(ep)throw n=Sm,ep=!1,Sm=null,n}function Xt(n,t){var e=t[Mm];e===void 0&&(e=t[Mm]=new Set);var s=n+"__bubble";e.has(s)||(kb(t,n,2,!1),e.add(s))}function jg(n,t,e){var s=0;t&&(s|=4),kb(e,n,s,t)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function Wu(n){if(!n[Zd]){n[Zd]=!0,I1.forEach(function(e){e!=="selectionchange"&&(T2.has(e)||jg(e,!1,n),jg(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Zd]||(t[Zd]=!0,jg("selectionchange",!1,t))}}function kb(n,t,e,s){switch(lb(t)){case 1:var i=US;break;case 4:i=$S;break;default:i=Iv}e=i.bind(null,t,e,n),i=void 0,!Am||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(t,e,{capture:!0,passive:i}):n.addEventListener(t,e,!0):i!==void 0?n.addEventListener(t,e,{passive:i}):n.addEventListener(t,e,!1)}function zg(n,t,e,s,i){var r=s;if(!(t&1)&&!(t&2)&&s!==null)t:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Aa(o),a===null)return;if(c=a.tag,c===5||c===6){s=r=a;continue t}o=o.parentNode}}s=s.return}Y1(function(){var u=r,h=Tv(e),d=[];t:{var f=Ab.get(n);if(f!==void 0){var g=Mv,v=n;switch(n){case"keypress":if(gf(e)===0)break t;case"keydown":case"keyup":g=i2;break;case"focusin":v="focus",g=Ig;break;case"focusout":v="blur",g=Ig;break;case"beforeblur":case"afterblur":g=Ig;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=VS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=o2;break;case wb:case bb:case xb:g=qS;break;case _b:g=c2;break;case"scroll":g=WS;break;case"wheel":g=h2;break;case"copy":case"cut":case"paste":g=ZS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ew}var p=(t&4)!==0,w=!p&&n==="scroll",m=p?f!==null?f+"Capture":null:f;p=[];for(var y=u,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=ju(y,m),_!=null&&p.push(Gu(y,_,b)))),w)break;y=y.return}0<p.length&&(f=new g(f,v,null,e,h),d.push({event:f,listeners:p}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&e!==xm&&(v=e.relatedTarget||e.fromElement)&&(Aa(v)||v[ir]))break t;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=e.relatedTarget||e.toElement,g=u,v=v?Aa(v):null,v!==null&&(w=$o(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(p=Jy,_="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(p=ew,_="onPointerLeave",m="onPointerEnter",y="pointer"),w=g==null?f:il(g),b=v==null?f:il(v),f=new p(_,y+"leave",g,e,h),f.target=w,f.relatedTarget=b,_=null,Aa(h)===u&&(p=new p(m,y+"enter",v,e,h),p.target=b,p.relatedTarget=w,_=p),w=_,g&&v)e:{for(p=g,m=v,y=0,b=p;b;b=Go(b))y++;for(b=0,_=m;_;_=Go(_))b++;for(;0<y-b;)p=Go(p),y--;for(;0<b-y;)m=Go(m),b--;for(;y--;){if(p===m||m!==null&&p===m.alternate)break e;p=Go(p),m=Go(m)}p=null}else p=null;g!==null&&dw(d,f,g,p,!1),v!==null&&w!==null&&dw(d,w,v,p,!0)}}t:{if(f=u?il(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=y2;else if(iw(f))if(pb)S=_2;else{S=b2;var R=w2}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=x2);if(S&&(S=S(n,u))){fb(d,S,e,h);break t}R&&R(n,f,u),n==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&mm(f,"number",f.value)}switch(R=u?il(u):window,n){case"focusin":(iw(R)||R.contentEditable==="true")&&(nl=R,Tm=u,Tu=null);break;case"focusout":Tu=Tm=nl=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,cw(d,e,h);break;case"selectionchange":if(k2)break;case"keydown":case"keyup":cw(d,e,h)}var P;if(Dv)t:{switch(n){case"compositionstart":var I="onCompositionStart";break t;case"compositionend":I="onCompositionEnd";break t;case"compositionupdate":I="onCompositionUpdate";break t}I=void 0}else el?hb(n,e)&&(I="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(I="onCompositionStart");I&&(ub&&e.locale!=="ko"&&(el||I!=="onCompositionStart"?I==="onCompositionEnd"&&el&&(P=cb()):(qr=h,Lv="value"in qr?qr.value:qr.textContent,el=!0)),R=ap(u,I),0<R.length&&(I=new tw(I,n,null,e,h),d.push({event:I,listeners:R}),P?I.data=P:(P=db(e),P!==null&&(I.data=P)))),(P=f2?p2(n,e):g2(n,e))&&(u=ap(u,"onBeforeInput"),0<u.length&&(h=new tw("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=P))}Sb(d,t)})}function Gu(n,t,e){return{instance:n,listener:t,currentTarget:e}}function ap(n,t){for(var e=t+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=ju(n,e),r!=null&&s.unshift(Gu(n,r,i)),r=ju(n,t),r!=null&&s.push(Gu(n,r,i))),n=n.return}return s}function Go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function dw(n,t,e,s,i){for(var r=t._reactName,a=[];e!==null&&e!==s;){var o=e,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,i?(c=ju(e,r),c!=null&&a.unshift(Gu(e,c,o))):i||(c=ju(e,r),c!=null&&a.push(Gu(e,c,o)))),e=e.return}a.length!==0&&n.push({event:t,listeners:a})}var P2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function fw(n){return(typeof n=="string"?n:""+n).replace(P2,`
`).replace(R2,"")}function Qd(n,t,e){if(t=fw(t),fw(n)!==t&&e)throw Error(tt(425))}function op(){}var Rm=null,Nm=null;function Im(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,N2=typeof clearTimeout=="function"?clearTimeout:void 0,pw=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof pw<"u"?function(n){return pw.resolve(null).then(n).catch(L2)}:Lm;function L2(n){setTimeout(function(){throw n})}function Bg(n,t){var e=t,s=0;do{var i=e.nextSibling;if(n.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(s===0){n.removeChild(i),Hu(t);return}s--}else e!=="$"&&e!=="$?"&&e!=="$!"||s++;e=i}while(e);Hu(t)}function ta(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function gw(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Dc=Math.random().toString(36).slice(2),fi="__reactFiber$"+Dc,Vu="__reactProps$"+Dc,ir="__reactContainer$"+Dc,Mm="__reactEvents$"+Dc,M2="__reactListeners$"+Dc,F2="__reactHandles$"+Dc;function Aa(n){var t=n[fi];if(t)return t;for(var e=n.parentNode;e;){if(t=e[ir]||e[fi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=gw(n);n!==null;){if(e=n[fi])return e;n=gw(n)}return t}n=e,e=n.parentNode}return null}function Nd(n){return n=n[fi]||n[ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function il(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(tt(33))}function sg(n){return n[Vu]||null}var Fm=[],rl=-1;function fa(n){return{current:n}}function qt(n){0>rl||(n.current=Fm[rl],Fm[rl]=null,rl--)}function Gt(n,t){rl++,Fm[rl]=n.current,n.current=t}var oa={},rn=fa(oa),Tn=fa(!1),Lo=oa;function Tc(n,t){var e=n.type.contextTypes;if(!e)return oa;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in e)i[r]=t[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=i),i}function Pn(n){return n=n.childContextTypes,n!=null}function lp(){qt(Tn),qt(rn)}function mw(n,t,e){if(rn.current!==oa)throw Error(tt(168));Gt(rn,t),Gt(Tn,e)}function Eb(n,t,e){var s=n.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return e;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(tt(108,wS(n)||"Unknown",i));return re({},e,s)}function cp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||oa,Lo=rn.current,Gt(rn,n),Gt(Tn,Tn.current),!0}function vw(n,t,e){var s=n.stateNode;if(!s)throw Error(tt(169));e?(n=Eb(n,t,Lo),s.__reactInternalMemoizedMergedChildContext=n,qt(Tn),qt(rn),Gt(rn,n)):qt(Tn),Gt(Tn,e)}var ki=null,ig=!1,Hg=!1;function Cb(n){ki===null?ki=[n]:ki.push(n)}function D2(n){ig=!0,Cb(n)}function pa(){if(!Hg&&ki!==null){Hg=!0;var n=0,t=zt;try{var e=ki;for(zt=1;n<e.length;n++){var s=e[n];do s=s(!0);while(s!==null)}ki=null,ig=!1}catch(i){throw ki!==null&&(ki=ki.slice(n+1)),Q1(Pv,pa),i}finally{zt=t,Hg=!1}}return null}var al=[],ol=0,up=null,hp=0,ls=[],cs=0,Mo=null,Qi=1,Ji="";function ma(n,t){al[ol++]=hp,al[ol++]=up,up=n,hp=t}function Tb(n,t,e){ls[cs++]=Qi,ls[cs++]=Ji,ls[cs++]=Mo,Mo=n;var s=Qi;n=Ji;var i=32-Os(s)-1;s&=~(1<<i),e+=1;var r=32-Os(t)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Qi=1<<32-Os(t)+i|e<<i|s,Ji=r+n}else Qi=1<<r|e<<i|s,Ji=n}function jv(n){n.return!==null&&(ma(n,1),Tb(n,1,0))}function zv(n){for(;n===up;)up=al[--ol],al[ol]=null,hp=al[--ol],al[ol]=null;for(;n===Mo;)Mo=ls[--cs],ls[cs]=null,Ji=ls[--cs],ls[cs]=null,Qi=ls[--cs],ls[cs]=null}var Yn=null,Xn=null,Jt=!1,Fs=null;function Pb(n,t){var e=ds(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function yw(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,Yn=n,Xn=ta(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,Yn=n,Xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Mo!==null?{id:Qi,overflow:Ji}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ds(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,Yn=n,Xn=null,!0):!1;default:return!1}}function Dm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Om(n){if(Jt){var t=Xn;if(t){var e=t;if(!yw(n,t)){if(Dm(n))throw Error(tt(418));t=ta(e.nextSibling);var s=Yn;t&&yw(n,t)?Pb(s,e):(n.flags=n.flags&-4097|2,Jt=!1,Yn=n)}}else{if(Dm(n))throw Error(tt(418));n.flags=n.flags&-4097|2,Jt=!1,Yn=n}}}function ww(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Yn=n}function Jd(n){if(n!==Yn)return!1;if(!Jt)return ww(n),Jt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Im(n.type,n.memoizedProps)),t&&(t=Xn)){if(Dm(n))throw Rb(),Error(tt(418));for(;t;)Pb(n,t),t=ta(t.nextSibling)}if(ww(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(tt(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Xn=ta(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Xn=null}}else Xn=Yn?ta(n.stateNode.nextSibling):null;return!0}function Rb(){for(var n=Xn;n;)n=ta(n.nextSibling)}function Pc(){Xn=Yn=null,Jt=!1}function Bv(n){Fs===null?Fs=[n]:Fs.push(n)}var O2=cr.ReactCurrentBatchConfig;function qc(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(tt(309));var s=e.stateNode}if(!s)throw Error(tt(147,n));var i=s,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},t._stringRef=r,t)}if(typeof n!="string")throw Error(tt(284));if(!e._owner)throw Error(tt(290,n))}return n}function tf(n,t){throw n=Object.prototype.toString.call(t),Error(tt(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function bw(n){var t=n._init;return t(n._payload)}function Nb(n){function t(m,y){if(n){var b=m.deletions;b===null?(m.deletions=[y],m.flags|=16):b.push(y)}}function e(m,y){if(!n)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function s(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=ia(m,y),m.index=0,m.sibling=null,m}function r(m,y,b){return m.index=b,n?(b=m.alternate,b!==null?(b=b.index,b<y?(m.flags|=2,y):b):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function o(m,y,b,_){return y===null||y.tag!==6?(y=Yg(b,m.mode,_),y.return=m,y):(y=i(y,b),y.return=m,y)}function c(m,y,b,_){var S=b.type;return S===tl?h(m,y,b.props.children,_,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pr&&bw(S)===y.type)?(_=i(y,b.props),_.ref=qc(m,y,b),_.return=m,_):(_=_f(b.type,b.key,b.props,null,m.mode,_),_.ref=qc(m,y,b),_.return=m,_)}function u(m,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=qg(b,m.mode,_),y.return=m,y):(y=i(y,b.children||[]),y.return=m,y)}function h(m,y,b,_,S){return y===null||y.tag!==7?(y=Io(b,m.mode,_,S),y.return=m,y):(y=i(y,b),y.return=m,y)}function d(m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yg(""+y,m.mode,b),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $d:return b=_f(y.type,y.key,y.props,null,m.mode,b),b.ref=qc(m,null,y),b.return=m,b;case Jo:return y=qg(y,m.mode,b),y.return=m,y;case pr:var _=y._init;return d(m,_(y._payload),b)}if(ru(y)||Wc(y))return y=Io(y,m.mode,b,null),y.return=m,y;tf(m,y)}return null}function f(m,y,b,_){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:o(m,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $d:return b.key===S?c(m,y,b,_):null;case Jo:return b.key===S?u(m,y,b,_):null;case pr:return S=b._init,f(m,y,S(b._payload),_)}if(ru(b)||Wc(b))return S!==null?null:h(m,y,b,_,null);tf(m,b)}return null}function g(m,y,b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,o(y,m,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $d:return m=m.get(_.key===null?b:_.key)||null,c(y,m,_,S);case Jo:return m=m.get(_.key===null?b:_.key)||null,u(y,m,_,S);case pr:var R=_._init;return g(m,y,b,R(_._payload),S)}if(ru(_)||Wc(_))return m=m.get(b)||null,h(y,m,_,S,null);tf(y,_)}return null}function v(m,y,b,_){for(var S=null,R=null,P=y,I=y=0,M=null;P!==null&&I<b.length;I++){P.index>I?(M=P,P=null):M=P.sibling;var D=f(m,P,b[I],_);if(D===null){P===null&&(P=M);break}n&&P&&D.alternate===null&&t(m,P),y=r(D,y,I),R===null?S=D:R.sibling=D,R=D,P=M}if(I===b.length)return e(m,P),Jt&&ma(m,I),S;if(P===null){for(;I<b.length;I++)P=d(m,b[I],_),P!==null&&(y=r(P,y,I),R===null?S=P:R.sibling=P,R=P);return Jt&&ma(m,I),S}for(P=s(m,P);I<b.length;I++)M=g(P,m,I,b[I],_),M!==null&&(n&&M.alternate!==null&&P.delete(M.key===null?I:M.key),y=r(M,y,I),R===null?S=M:R.sibling=M,R=M);return n&&P.forEach(function($){return t(m,$)}),Jt&&ma(m,I),S}function p(m,y,b,_){var S=Wc(b);if(typeof S!="function")throw Error(tt(150));if(b=S.call(b),b==null)throw Error(tt(151));for(var R=S=null,P=y,I=y=0,M=null,D=b.next();P!==null&&!D.done;I++,D=b.next()){P.index>I?(M=P,P=null):M=P.sibling;var $=f(m,P,D.value,_);if($===null){P===null&&(P=M);break}n&&P&&$.alternate===null&&t(m,P),y=r($,y,I),R===null?S=$:R.sibling=$,R=$,P=M}if(D.done)return e(m,P),Jt&&ma(m,I),S;if(P===null){for(;!D.done;I++,D=b.next())D=d(m,D.value,_),D!==null&&(y=r(D,y,I),R===null?S=D:R.sibling=D,R=D);return Jt&&ma(m,I),S}for(P=s(m,P);!D.done;I++,D=b.next())D=g(P,m,I,D.value,_),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?I:D.key),y=r(D,y,I),R===null?S=D:R.sibling=D,R=D);return n&&P.forEach(function(N){return t(m,N)}),Jt&&ma(m,I),S}function w(m,y,b,_){if(typeof b=="object"&&b!==null&&b.type===tl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $d:t:{for(var S=b.key,R=y;R!==null;){if(R.key===S){if(S=b.type,S===tl){if(R.tag===7){e(m,R.sibling),y=i(R,b.props.children),y.return=m,m=y;break t}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pr&&bw(S)===R.type){e(m,R.sibling),y=i(R,b.props),y.ref=qc(m,R,b),y.return=m,m=y;break t}e(m,R);break}else t(m,R);R=R.sibling}b.type===tl?(y=Io(b.props.children,m.mode,_,b.key),y.return=m,m=y):(_=_f(b.type,b.key,b.props,null,m.mode,_),_.ref=qc(m,y,b),_.return=m,m=_)}return a(m);case Jo:t:{for(R=b.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){e(m,y.sibling),y=i(y,b.children||[]),y.return=m,m=y;break t}else{e(m,y);break}else t(m,y);y=y.sibling}y=qg(b,m.mode,_),y.return=m,m=y}return a(m);case pr:return R=b._init,w(m,y,R(b._payload),_)}if(ru(b))return v(m,y,b,_);if(Wc(b))return p(m,y,b,_);tf(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(e(m,y.sibling),y=i(y,b),y.return=m,m=y):(e(m,y),y=Yg(b,m.mode,_),y.return=m,m=y),a(m)):e(m,y)}return w}var Rc=Nb(!0),Ib=Nb(!1),dp=fa(null),fp=null,ll=null,Hv=null;function Uv(){Hv=ll=fp=null}function $v(n){var t=dp.current;qt(dp),n._currentValue=t}function jm(n,t,e){for(;n!==null;){var s=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),n===e)break;n=n.return}}function vl(n,t){fp=n,Hv=ll=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Cn=!0),n.firstContext=null)}function gs(n){var t=n._currentValue;if(Hv!==n)if(n={context:n,memoizedValue:t,next:null},ll===null){if(fp===null)throw Error(tt(308));ll=n,fp.dependencies={lanes:0,firstContext:n}}else ll=ll.next=n;return t}var Sa=null;function Wv(n){Sa===null?Sa=[n]:Sa.push(n)}function Lb(n,t,e,s){var i=t.interleaved;return i===null?(e.next=e,Wv(t)):(e.next=i.next,i.next=e),t.interleaved=e,rr(n,s)}function rr(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var gr=!1;function Gv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mb(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function tr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function ea(n,t,e){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Lt&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,rr(n,e)}return i=s.interleaved,i===null?(t.next=t,Wv(s)):(t.next=i.next,i.next=t),s.interleaved=t,rr(n,e)}function mf(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,Rv(n,e)}}function xw(n,t){var e=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,e===s)){var i=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?i=r=a:r=r.next=a,e=e.next}while(e!==null);r===null?i=r=t:r=r.next=t}else i=r=t;e={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function pp(n,t,e,s){var i=n.updateQueue;gr=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;a=0,h=u=c=null,o=r;do{var f=o.lane,g=o.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var v=n,p=o;switch(f=t,g=e,p.tag){case 1:if(v=p.payload,typeof v=="function"){d=v.call(g,d,f);break t}d=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break t;d=re({},d,f);break t;case 2:gr=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else g={eventTime:g,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);Do|=a,n.lanes=a,n.memoizedState=d}}function _w(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var s=n[t],i=s.callback;if(i!==null){if(s.callback=null,s=e,typeof i!="function")throw Error(tt(191,i));i.call(s)}}}var Id={},gi=fa(Id),Xu=fa(Id),Yu=fa(Id);function ka(n){if(n===Id)throw Error(tt(174));return n}function Vv(n,t){switch(Gt(Yu,t),Gt(Xu,n),Gt(gi,Id),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ym(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=ym(t,n)}qt(gi),Gt(gi,t)}function Nc(){qt(gi),qt(Xu),qt(Yu)}function Fb(n){ka(Yu.current);var t=ka(gi.current),e=ym(t,n.type);t!==e&&(Gt(Xu,n),Gt(gi,e))}function Xv(n){Xu.current===n&&(qt(gi),qt(Xu))}var ne=fa(0);function gp(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ug=[];function Yv(){for(var n=0;n<Ug.length;n++)Ug[n]._workInProgressVersionPrimary=null;Ug.length=0}var vf=cr.ReactCurrentDispatcher,$g=cr.ReactCurrentBatchConfig,Fo=0,ie=null,ke=null,Me=null,mp=!1,Pu=!1,qu=0,j2=0;function Ge(){throw Error(tt(321))}function qv(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Bs(n[e],t[e]))return!1;return!0}function Kv(n,t,e,s,i,r){if(Fo=r,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vf.current=n===null||n.memoizedState===null?U2:$2,n=e(s,i),Pu){r=0;do{if(Pu=!1,qu=0,25<=r)throw Error(tt(301));r+=1,Me=ke=null,t.updateQueue=null,vf.current=W2,n=e(s,i)}while(Pu)}if(vf.current=vp,t=ke!==null&&ke.next!==null,Fo=0,Me=ke=ie=null,mp=!1,t)throw Error(tt(300));return n}function Zv(){var n=qu!==0;return qu=0,n}function qs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?ie.memoizedState=Me=n:Me=Me.next=n,Me}function ms(){if(ke===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ke.next;var t=Me===null?ie.memoizedState:Me.next;if(t!==null)Me=t,ke=n;else{if(n===null)throw Error(tt(310));ke=n,n={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Me===null?ie.memoizedState=Me=n:Me=Me.next=n}return Me}function Ku(n,t){return typeof t=="function"?t(n):t}function Wg(n){var t=ms(),e=t.queue;if(e===null)throw Error(tt(311));e.lastRenderedReducer=n;var s=ke,i=s.baseQueue,r=e.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,e.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((Fo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=s):c=c.next=d,ie.lanes|=h,Do|=h}u=u.next}while(u!==null&&u!==r);c===null?a=s:c.next=o,Bs(s,t.memoizedState)||(Cn=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,e.lastRenderedState=s}if(n=e.interleaved,n!==null){i=n;do r=i.lane,ie.lanes|=r,Do|=r,i=i.next;while(i!==n)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Gg(n){var t=ms(),e=t.queue;if(e===null)throw Error(tt(311));e.lastRenderedReducer=n;var s=e.dispatch,i=e.pending,r=t.memoizedState;if(i!==null){e.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);Bs(r,t.memoizedState)||(Cn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,s]}function Db(){}function Ob(n,t){var e=ie,s=ms(),i=t(),r=!Bs(s.memoizedState,i);if(r&&(s.memoizedState=i,Cn=!0),s=s.queue,Qv(Bb.bind(null,e,s,n),[n]),s.getSnapshot!==t||r||Me!==null&&Me.memoizedState.tag&1){if(e.flags|=2048,Zu(9,zb.bind(null,e,s,i,t),void 0,null),Fe===null)throw Error(tt(349));Fo&30||jb(e,t,i)}return i}function jb(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function zb(n,t,e,s){t.value=e,t.getSnapshot=s,Hb(t)&&Ub(n)}function Bb(n,t,e){return e(function(){Hb(t)&&Ub(n)})}function Hb(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Bs(n,e)}catch{return!0}}function Ub(n){var t=rr(n,1);t!==null&&js(t,n,1,-1)}function Aw(n){var t=qs();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:n},t.queue=n,n=n.dispatch=H2.bind(null,ie,n),[t.memoizedState,n]}function Zu(n,t,e,s){return n={tag:n,create:t,destroy:e,deps:s,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(s=e.next,e.next=n,n.next=s,t.lastEffect=n)),n}function $b(){return ms().memoizedState}function yf(n,t,e,s){var i=qs();ie.flags|=n,i.memoizedState=Zu(1|t,e,void 0,s===void 0?null:s)}function rg(n,t,e,s){var i=ms();s=s===void 0?null:s;var r=void 0;if(ke!==null){var a=ke.memoizedState;if(r=a.destroy,s!==null&&qv(s,a.deps)){i.memoizedState=Zu(t,e,r,s);return}}ie.flags|=n,i.memoizedState=Zu(1|t,e,r,s)}function Sw(n,t){return yf(8390656,8,n,t)}function Qv(n,t){return rg(2048,8,n,t)}function Wb(n,t){return rg(4,2,n,t)}function Gb(n,t){return rg(4,4,n,t)}function Vb(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function Xb(n,t,e){return e=e!=null?e.concat([n]):null,rg(4,4,Vb.bind(null,t,n),e)}function Jv(){}function Yb(n,t){var e=ms();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&qv(t,s[1])?s[0]:(e.memoizedState=[n,t],n)}function qb(n,t){var e=ms();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&qv(t,s[1])?s[0]:(n=n(),e.memoizedState=[n,t],n)}function Kb(n,t,e){return Fo&21?(Bs(e,t)||(e=eb(),ie.lanes|=e,Do|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Cn=!0),n.memoizedState=e)}function z2(n,t){var e=zt;zt=e!==0&&4>e?e:4,n(!0);var s=$g.transition;$g.transition={};try{n(!1),t()}finally{zt=e,$g.transition=s}}function Zb(){return ms().memoizedState}function B2(n,t,e){var s=sa(n);if(e={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null},Qb(n))Jb(t,e);else if(e=Lb(n,t,e,s),e!==null){var i=fn();js(e,n,s,i),tx(e,t,s)}}function H2(n,t,e){var s=sa(n),i={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null};if(Qb(n))Jb(t,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,o=r(a,e);if(i.hasEagerState=!0,i.eagerState=o,Bs(o,a)){var c=t.interleaved;c===null?(i.next=i,Wv(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}e=Lb(n,t,i,s),e!==null&&(i=fn(),js(e,n,s,i),tx(e,t,s))}}function Qb(n){var t=n.alternate;return n===ie||t!==null&&t===ie}function Jb(n,t){Pu=mp=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function tx(n,t,e){if(e&4194240){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,Rv(n,e)}}var vp={readContext:gs,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},U2={readContext:gs,useCallback:function(n,t){return qs().memoizedState=[n,t===void 0?null:t],n},useContext:gs,useEffect:Sw,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,yf(4194308,4,Vb.bind(null,t,n),e)},useLayoutEffect:function(n,t){return yf(4194308,4,n,t)},useInsertionEffect:function(n,t){return yf(4,2,n,t)},useMemo:function(n,t){var e=qs();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var s=qs();return t=e!==void 0?e(t):t,s.memoizedState=s.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},s.queue=n,n=n.dispatch=B2.bind(null,ie,n),[s.memoizedState,n]},useRef:function(n){var t=qs();return n={current:n},t.memoizedState=n},useState:Aw,useDebugValue:Jv,useDeferredValue:function(n){return qs().memoizedState=n},useTransition:function(){var n=Aw(!1),t=n[0];return n=z2.bind(null,n[1]),qs().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var s=ie,i=qs();if(Jt){if(e===void 0)throw Error(tt(407));e=e()}else{if(e=t(),Fe===null)throw Error(tt(349));Fo&30||jb(s,t,e)}i.memoizedState=e;var r={value:e,getSnapshot:t};return i.queue=r,Sw(Bb.bind(null,s,r,n),[n]),s.flags|=2048,Zu(9,zb.bind(null,s,r,e,t),void 0,null),e},useId:function(){var n=qs(),t=Fe.identifierPrefix;if(Jt){var e=Ji,s=Qi;e=(s&~(1<<32-Os(s)-1)).toString(32)+e,t=":"+t+"R"+e,e=qu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=j2++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},$2={readContext:gs,useCallback:Yb,useContext:gs,useEffect:Qv,useImperativeHandle:Xb,useInsertionEffect:Wb,useLayoutEffect:Gb,useMemo:qb,useReducer:Wg,useRef:$b,useState:function(){return Wg(Ku)},useDebugValue:Jv,useDeferredValue:function(n){var t=ms();return Kb(t,ke.memoizedState,n)},useTransition:function(){var n=Wg(Ku)[0],t=ms().memoizedState;return[n,t]},useMutableSource:Db,useSyncExternalStore:Ob,useId:Zb,unstable_isNewReconciler:!1},W2={readContext:gs,useCallback:Yb,useContext:gs,useEffect:Qv,useImperativeHandle:Xb,useInsertionEffect:Wb,useLayoutEffect:Gb,useMemo:qb,useReducer:Gg,useRef:$b,useState:function(){return Gg(Ku)},useDebugValue:Jv,useDeferredValue:function(n){var t=ms();return ke===null?t.memoizedState=n:Kb(t,ke.memoizedState,n)},useTransition:function(){var n=Gg(Ku)[0],t=ms().memoizedState;return[n,t]},useMutableSource:Db,useSyncExternalStore:Ob,useId:Zb,unstable_isNewReconciler:!1};function bs(n,t){if(n&&n.defaultProps){t=re({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function zm(n,t,e,s){t=n.memoizedState,e=e(s,t),e=e==null?t:re({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var ag={isMounted:function(n){return(n=n._reactInternals)?$o(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var s=fn(),i=sa(n),r=tr(s,i);r.payload=t,e!=null&&(r.callback=e),t=ea(n,r,i),t!==null&&(js(t,n,i,s),mf(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var s=fn(),i=sa(n),r=tr(s,i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=ea(n,r,i),t!==null&&(js(t,n,i,s),mf(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=fn(),s=sa(n),i=tr(e,s);i.tag=2,t!=null&&(i.callback=t),t=ea(n,i,s),t!==null&&(js(t,n,s,e),mf(t,n,s))}};function kw(n,t,e,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):t.prototype&&t.prototype.isPureReactComponent?!$u(e,s)||!$u(i,r):!0}function ex(n,t,e){var s=!1,i=oa,r=t.contextType;return typeof r=="object"&&r!==null?r=gs(r):(i=Pn(t)?Lo:rn.current,s=t.contextTypes,r=(s=s!=null)?Tc(n,i):oa),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ag,n.stateNode=t,t._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),t}function Ew(n,t,e,s){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,s),t.state!==n&&ag.enqueueReplaceState(t,t.state,null)}function Bm(n,t,e,s){var i=n.stateNode;i.props=e,i.state=n.memoizedState,i.refs={},Gv(n);var r=t.contextType;typeof r=="object"&&r!==null?i.context=gs(r):(r=Pn(t)?Lo:rn.current,i.context=Tc(n,r)),i.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(zm(n,t,r,e),i.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ag.enqueueReplaceState(i,i.state,null),pp(n,e,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ic(n,t){try{var e="",s=t;do e+=yS(s),s=s.return;while(s);var i=e}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:i,digest:null}}function Vg(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function Hm(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function nx(n,t,e){e=tr(-1,e),e.tag=3,e.payload={element:null};var s=t.value;return e.callback=function(){wp||(wp=!0,Zm=s),Hm(n,t)},e}function sx(n,t,e){e=tr(-1,e),e.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;e.payload=function(){return s(i)},e.callback=function(){Hm(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Hm(n,t),typeof s!="function"&&(na===null?na=new Set([this]):na.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function Cw(n,t,e){var s=n.pingCache;if(s===null){s=n.pingCache=new G2;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(e)||(i.add(e),n=rk.bind(null,n,t,e),t.then(n,n))}function Tw(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function Pw(n,t,e,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=tr(-1,1),t.tag=2,ea(e,t,1))),e.lanes|=1),n)}var V2=cr.ReactCurrentOwner,Cn=!1;function dn(n,t,e,s){t.child=n===null?Ib(t,null,e,s):Rc(t,n.child,e,s)}function Rw(n,t,e,s,i){e=e.render;var r=t.ref;return vl(t,i),s=Kv(n,t,e,s,r,i),e=Zv(),n!==null&&!Cn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,ar(n,t,i)):(Jt&&e&&jv(t),t.flags|=1,dn(n,t,s,i),t.child)}function Nw(n,t,e,s,i){if(n===null){var r=e.type;return typeof r=="function"&&!oy(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,ix(n,t,r,s,i)):(n=_f(e.type,null,s,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(e=e.compare,e=e!==null?e:$u,e(a,s)&&n.ref===t.ref)return ar(n,t,i)}return t.flags|=1,n=ia(r,s),n.ref=t.ref,n.return=t,t.child=n}function ix(n,t,e,s,i){if(n!==null){var r=n.memoizedProps;if($u(r,s)&&n.ref===t.ref)if(Cn=!1,t.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(Cn=!0);else return t.lanes=n.lanes,ar(n,t,i)}return Um(n,t,e,s,i)}function rx(n,t,e){var s=t.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(ul,Wn),Wn|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Gt(ul,Wn),Wn|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:e,Gt(ul,Wn),Wn|=s}else r!==null?(s=r.baseLanes|e,t.memoizedState=null):s=e,Gt(ul,Wn),Wn|=s;return dn(n,t,i,e),t.child}function ax(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Um(n,t,e,s,i){var r=Pn(e)?Lo:rn.current;return r=Tc(t,r),vl(t,i),e=Kv(n,t,e,s,r,i),s=Zv(),n!==null&&!Cn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,ar(n,t,i)):(Jt&&s&&jv(t),t.flags|=1,dn(n,t,e,i),t.child)}function Iw(n,t,e,s,i){if(Pn(e)){var r=!0;cp(t)}else r=!1;if(vl(t,i),t.stateNode===null)wf(n,t),ex(t,e,s),Bm(t,e,s,i),s=!0;else if(n===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,u=e.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=Pn(e)?Lo:rn.current,u=Tc(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Ew(t,a,s,u),gr=!1;var f=t.memoizedState;a.state=f,pp(t,s,a,i),c=t.memoizedState,o!==s||f!==c||Tn.current||gr?(typeof h=="function"&&(zm(t,e,h,s),c=t.memoizedState),(o=gr||kw(t,e,o,s,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Mb(n,t),o=t.memoizedProps,u=t.type===t.elementType?o:bs(t.type,o),a.props=u,d=t.pendingProps,f=a.context,c=e.contextType,typeof c=="object"&&c!==null?c=gs(c):(c=Pn(e)?Lo:rn.current,c=Tc(t,c));var g=e.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&Ew(t,a,s,c),gr=!1,f=t.memoizedState,a.state=f,pp(t,s,a,i);var v=t.memoizedState;o!==d||f!==v||Tn.current||gr?(typeof g=="function"&&(zm(t,e,g,s),v=t.memoizedState),(u=gr||kw(t,e,u,s,f,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),a.props=s,a.state=v,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),s=!1)}return $m(n,t,e,s,r,i)}function $m(n,t,e,s,i,r){ax(n,t);var a=(t.flags&128)!==0;if(!s&&!a)return i&&vw(t,e,!1),ar(n,t,r);s=t.stateNode,V2.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,n!==null&&a?(t.child=Rc(t,n.child,null,r),t.child=Rc(t,null,o,r)):dn(n,t,o,r),t.memoizedState=s.state,i&&vw(t,e,!0),t.child}function ox(n){var t=n.stateNode;t.pendingContext?mw(n,t.pendingContext,t.pendingContext!==t.context):t.context&&mw(n,t.context,!1),Vv(n,t.containerInfo)}function Lw(n,t,e,s,i){return Pc(),Bv(i),t.flags|=256,dn(n,t,e,s),t.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function Gm(n){return{baseLanes:n,cachePool:null,transitions:null}}function lx(n,t,e){var s=t.pendingProps,i=ne.current,r=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Gt(ne,i&1),n===null)return Om(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,n=s.fallback,r?(s=t.mode,r=t.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=cg(a,s,0,null),n=Io(n,s,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=Gm(e),t.memoizedState=Wm,n):ty(t,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return X2(n,t,a,s,o,i,e);if(r){r=s.fallback,a=t.mode,i=n.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ia(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=ia(o,r):(r=Io(r,a,e,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,a=n.child.memoizedState,a=a===null?Gm(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~e,t.memoizedState=Wm,s}return r=n.child,n=r.sibling,s=ia(r,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=e),s.return=t,s.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=s,t.memoizedState=null,s}function ty(n,t){return t=cg({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function ef(n,t,e,s){return s!==null&&Bv(s),Rc(t,n.child,null,e),n=ty(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function X2(n,t,e,s,i,r,a){if(e)return t.flags&256?(t.flags&=-257,s=Vg(Error(tt(422))),ef(n,t,a,s)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=s.fallback,i=t.mode,s=cg({mode:"visible",children:s.children},i,0,null),r=Io(r,i,a,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,t.mode&1&&Rc(t,n.child,null,a),t.child.memoizedState=Gm(a),t.memoizedState=Wm,r);if(!(t.mode&1))return ef(n,t,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(tt(419)),s=Vg(r,s,void 0),ef(n,t,a,s)}if(o=(a&n.childLanes)!==0,Cn||o){if(s=Fe,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,rr(n,i),js(s,n,i,-1))}return ay(),s=Vg(Error(tt(421))),ef(n,t,a,s)}return i.data==="$?"?(t.flags|=128,t.child=n.child,t=ak.bind(null,n),i._reactRetry=t,null):(n=r.treeContext,Xn=ta(i.nextSibling),Yn=t,Jt=!0,Fs=null,n!==null&&(ls[cs++]=Qi,ls[cs++]=Ji,ls[cs++]=Mo,Qi=n.id,Ji=n.overflow,Mo=t),t=ty(t,s.children),t.flags|=4096,t)}function Mw(n,t,e){n.lanes|=t;var s=n.alternate;s!==null&&(s.lanes|=t),jm(n.return,t,e)}function Xg(n,t,e,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:e,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=e,r.tailMode=i)}function cx(n,t,e){var s=t.pendingProps,i=s.revealOrder,r=s.tail;if(dn(n,t,s.children,e),s=ne.current,s&2)s=s&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mw(n,e,t);else if(n.tag===19)Mw(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Gt(ne,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)n=e.alternate,n!==null&&gp(n)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Xg(t,!1,i,e,r);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&gp(n)===null){t.child=i;break}n=i.sibling,i.sibling=e,e=i,i=n}Xg(t,!0,e,null,r);break;case"together":Xg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wf(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function ar(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Do|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(tt(153));if(t.child!==null){for(n=t.child,e=ia(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=ia(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function Y2(n,t,e){switch(t.tag){case 3:ox(t),Pc();break;case 5:Fb(t);break;case 1:Pn(t.type)&&cp(t);break;case 4:Vv(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Gt(dp,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Gt(ne,ne.current&1),t.flags|=128,null):e&t.child.childLanes?lx(n,t,e):(Gt(ne,ne.current&1),n=ar(n,t,e),n!==null?n.sibling:null);Gt(ne,ne.current&1);break;case 19:if(s=(e&t.childLanes)!==0,n.flags&128){if(s)return cx(n,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gt(ne,ne.current),s)break;return null;case 22:case 23:return t.lanes=0,rx(n,t,e)}return ar(n,t,e)}var ux,Vm,hx,dx;ux=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Vm=function(){};hx=function(n,t,e,s){var i=n.memoizedProps;if(i!==s){n=t.stateNode,ka(gi.current);var r=null;switch(e){case"input":i=pm(n,i),s=pm(n,s),r=[];break;case"select":i=re({},i,{value:void 0}),s=re({},s,{value:void 0}),r=[];break;case"textarea":i=vm(n,i),s=vm(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=op)}wm(e,s);var a;e=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Du.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(o=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(e||(e={}),e[a]=c[a])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Du.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xt("scroll",n),r||o===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};dx=function(n,t,e,s){e!==s&&(t.flags|=4)};function Kc(n,t){if(!Jt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Ve(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,s=0;if(t)for(var i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=e,t}function q2(n,t,e){var s=t.pendingProps;switch(zv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return Pn(t.type)&&lp(),Ve(t),null;case 3:return s=t.stateNode,Nc(),qt(Tn),qt(rn),Yv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Jd(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fs!==null&&(t0(Fs),Fs=null))),Vm(n,t),Ve(t),null;case 5:Xv(t);var i=ka(Yu.current);if(e=t.type,n!==null&&t.stateNode!=null)hx(n,t,e,s,i),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(tt(166));return Ve(t),null}if(n=ka(gi.current),Jd(t)){s=t.stateNode,e=t.type;var r=t.memoizedProps;switch(s[fi]=t,s[Vu]=r,n=(t.mode&1)!==0,e){case"dialog":Xt("cancel",s),Xt("close",s);break;case"iframe":case"object":case"embed":Xt("load",s);break;case"video":case"audio":for(i=0;i<ou.length;i++)Xt(ou[i],s);break;case"source":Xt("error",s);break;case"img":case"image":case"link":Xt("error",s),Xt("load",s);break;case"details":Xt("toggle",s);break;case"input":$y(s,r),Xt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Xt("invalid",s);break;case"textarea":Gy(s,r),Xt("invalid",s)}wm(e,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&Qd(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Qd(s.textContent,o,n),i=["children",""+o]):Du.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xt("scroll",s)}switch(e){case"input":Wd(s),Wy(s,r,!0);break;case"textarea":Wd(s),Vy(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=op)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=B1(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(e,{is:s.is}):(n=a.createElement(e),e==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,e),n[fi]=t,n[Vu]=s,ux(n,t,!1,!1),t.stateNode=n;t:{switch(a=bm(e,s),e){case"dialog":Xt("cancel",n),Xt("close",n),i=s;break;case"iframe":case"object":case"embed":Xt("load",n),i=s;break;case"video":case"audio":for(i=0;i<ou.length;i++)Xt(ou[i],n);i=s;break;case"source":Xt("error",n),i=s;break;case"img":case"image":case"link":Xt("error",n),Xt("load",n),i=s;break;case"details":Xt("toggle",n),i=s;break;case"input":$y(n,s),i=pm(n,s),Xt("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=re({},s,{value:void 0}),Xt("invalid",n);break;case"textarea":Gy(n,s),i=vm(n,s),Xt("invalid",n);break;default:i=s}wm(e,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?$1(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&H1(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Ou(n,c):typeof c=="number"&&Ou(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Du.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Xt("scroll",n):c!=null&&Sv(n,r,c,a))}switch(e){case"input":Wd(n),Wy(n,s,!1);break;case"textarea":Wd(n),Vy(n);break;case"option":s.value!=null&&n.setAttribute("value",""+aa(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?fl(n,!!s.multiple,r,!1):s.defaultValue!=null&&fl(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=op)}switch(e){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ve(t),null;case 6:if(n&&t.stateNode!=null)dx(n,t,n.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(tt(166));if(e=ka(Yu.current),ka(gi.current),Jd(t)){if(s=t.stateNode,e=t.memoizedProps,s[fi]=t,(r=s.nodeValue!==e)&&(n=Yn,n!==null))switch(n.tag){case 3:Qd(s.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qd(s.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else s=(e.nodeType===9?e:e.ownerDocument).createTextNode(s),s[fi]=t,t.stateNode=s}return Ve(t),null;case 13:if(qt(ne),s=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Jt&&Xn!==null&&t.mode&1&&!(t.flags&128))Rb(),Pc(),t.flags|=98560,r=!1;else if(r=Jd(t),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(tt(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(tt(317));r[fi]=t}else Pc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ve(t),r=!1}else Fs!==null&&(t0(Fs),Fs=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(n===null||ne.current&1?Ee===0&&(Ee=3):ay())),t.updateQueue!==null&&(t.flags|=4),Ve(t),null);case 4:return Nc(),Vm(n,t),n===null&&Wu(t.stateNode.containerInfo),Ve(t),null;case 10:return $v(t.type._context),Ve(t),null;case 17:return Pn(t.type)&&lp(),Ve(t),null;case 19:if(qt(ne),r=t.memoizedState,r===null)return Ve(t),null;if(s=(t.flags&128)!==0,a=r.rendering,a===null)if(s)Kc(r,!1);else{if(Ee!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=gp(n),a!==null){for(t.flags|=128,Kc(r,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=e,e=t.child;e!==null;)r=e,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Gt(ne,ne.current&1|2),t.child}n=n.sibling}r.tail!==null&&fe()>Lc&&(t.flags|=128,s=!0,Kc(r,!1),t.lanes=4194304)}else{if(!s)if(n=gp(a),n!==null){if(t.flags|=128,s=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Kc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Jt)return Ve(t),null}else 2*fe()-r.renderingStartTime>Lc&&e!==1073741824&&(t.flags|=128,s=!0,Kc(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=fe(),t.sibling=null,e=ne.current,Gt(ne,s?e&1|2:e&1),t):(Ve(t),null);case 22:case 23:return ry(),s=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Wn&1073741824&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function K2(n,t){switch(zv(t),t.tag){case 1:return Pn(t.type)&&lp(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Nc(),qt(Tn),qt(rn),Yv(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return Xv(t),null;case 13:if(qt(ne),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));Pc()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return qt(ne),null;case 4:return Nc(),null;case 10:return $v(t.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var nf=!1,nn=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,ct=null;function cl(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(s){oe(n,t,s)}else e.current=null}function Xm(n,t,e){try{e()}catch(s){oe(n,t,s)}}var Fw=!1;function Q2(n,t){if(Rm=ip,n=vb(),Ov(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var s=e.getSelection&&e.getSelection();if(s&&s.rangeCount!==0){e=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var a=0,o=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var g;d!==e||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(c=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break e;if(f===e&&++u===i&&(o=a),f===r&&++h===s&&(c=a),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}e=o===-1||c===-1?null:{start:o,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Nm={focusedElem:n,selectionRange:e},ip=!1,ct=t;ct!==null;)if(t=ct,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,ct=n;else for(;ct!==null;){t=ct;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,w=v.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?p:bs(t.type,p),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(_){oe(t,t.return,_)}if(n=t.sibling,n!==null){n.return=t.return,ct=n;break}ct=t.return}return v=Fw,Fw=!1,v}function Ru(n,t,e){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&Xm(t,e,r)}i=i.next}while(i!==s)}}function og(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var s=e.create;e.destroy=s()}e=e.next}while(e!==t)}}function Ym(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function fx(n){var t=n.alternate;t!==null&&(n.alternate=null,fx(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[fi],delete t[Vu],delete t[Mm],delete t[M2],delete t[F2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function px(n){return n.tag===5||n.tag===3||n.tag===4}function Dw(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||px(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qm(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=op));else if(s!==4&&(n=n.child,n!==null))for(qm(n,t,e),n=n.sibling;n!==null;)qm(n,t,e),n=n.sibling}function Km(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Km(n,t,e),n=n.sibling;n!==null;)Km(n,t,e),n=n.sibling}var He=null,Ms=!1;function ur(n,t,e){for(e=e.child;e!==null;)gx(n,t,e),e=e.sibling}function gx(n,t,e){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(Jp,e)}catch{}switch(e.tag){case 5:nn||cl(e,t);case 6:var s=He,i=Ms;He=null,ur(n,t,e),He=s,Ms=i,He!==null&&(Ms?(n=He,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):He.removeChild(e.stateNode));break;case 18:He!==null&&(Ms?(n=He,e=e.stateNode,n.nodeType===8?Bg(n.parentNode,e):n.nodeType===1&&Bg(n,e),Hu(n)):Bg(He,e.stateNode));break;case 4:s=He,i=Ms,He=e.stateNode.containerInfo,Ms=!0,ur(n,t,e),He=s,Ms=i;break;case 0:case 11:case 14:case 15:if(!nn&&(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&Xm(e,t,a),i=i.next}while(i!==s)}ur(n,t,e);break;case 1:if(!nn&&(cl(e,t),s=e.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(o){oe(e,t,o)}ur(n,t,e);break;case 21:ur(n,t,e);break;case 22:e.mode&1?(nn=(s=nn)||e.memoizedState!==null,ur(n,t,e),nn=s):ur(n,t,e);break;default:ur(n,t,e)}}function Ow(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new Z2),t.forEach(function(s){var i=ok.bind(null,n,s);e.has(s)||(e.add(s),s.then(i,i))})}}function ys(n,t){var e=t.deletions;if(e!==null)for(var s=0;s<e.length;s++){var i=e[s];try{var r=n,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:He=o.stateNode,Ms=!1;break t;case 3:He=o.stateNode.containerInfo,Ms=!0;break t;case 4:He=o.stateNode.containerInfo,Ms=!0;break t}o=o.return}if(He===null)throw Error(tt(160));gx(r,a,i),He=null,Ms=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){oe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mx(t,n),t=t.sibling}function mx(n,t){var e=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ys(t,n),Gs(n),s&4){try{Ru(3,n,n.return),og(3,n)}catch(p){oe(n,n.return,p)}try{Ru(5,n,n.return)}catch(p){oe(n,n.return,p)}}break;case 1:ys(t,n),Gs(n),s&512&&e!==null&&cl(e,e.return);break;case 5:if(ys(t,n),Gs(n),s&512&&e!==null&&cl(e,e.return),n.flags&32){var i=n.stateNode;try{Ou(i,"")}catch(p){oe(n,n.return,p)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=e!==null?e.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&j1(i,r),bm(o,a);var u=bm(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?$1(i,d):h==="dangerouslySetInnerHTML"?H1(i,d):h==="children"?Ou(i,d):Sv(i,h,d,u)}switch(o){case"input":gm(i,r);break;case"textarea":z1(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?fl(i,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?fl(i,!!r.multiple,r.defaultValue,!0):fl(i,!!r.multiple,r.multiple?[]:"",!1))}i[Vu]=r}catch(p){oe(n,n.return,p)}}break;case 6:if(ys(t,n),Gs(n),s&4){if(n.stateNode===null)throw Error(tt(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(p){oe(n,n.return,p)}}break;case 3:if(ys(t,n),Gs(n),s&4&&e!==null&&e.memoizedState.isDehydrated)try{Hu(t.containerInfo)}catch(p){oe(n,n.return,p)}break;case 4:ys(t,n),Gs(n);break;case 13:ys(t,n),Gs(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(sy=fe())),s&4&&Ow(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(nn=(u=nn)||h,ys(t,n),nn=u):ys(t,n),Gs(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(ct=n,h=n.child;h!==null;){for(d=ct=h;ct!==null;){switch(f=ct,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ru(4,f,f.return);break;case 1:cl(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){s=f,e=f.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){oe(s,e,p)}}break;case 5:cl(f,f.return);break;case 22:if(f.memoizedState!==null){zw(d);continue}}g!==null?(g.return=f,ct=g):zw(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=U1("display",a))}catch(p){oe(n,n.return,p)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){oe(n,n.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ys(t,n),Gs(n),s&4&&Ow(n);break;case 21:break;default:ys(t,n),Gs(n)}}function Gs(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(px(e)){var s=e;break t}e=e.return}throw Error(tt(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Ou(i,""),s.flags&=-33);var r=Dw(n);Km(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=Dw(n);qm(n,o,a);break;default:throw Error(tt(161))}}catch(c){oe(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function J2(n,t,e){ct=n,vx(n)}function vx(n,t,e){for(var s=(n.mode&1)!==0;ct!==null;){var i=ct,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||nf;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||nn;o=nf;var u=nn;if(nf=a,(nn=c)&&!u)for(ct=i;ct!==null;)a=ct,c=a.child,a.tag===22&&a.memoizedState!==null?Bw(i):c!==null?(c.return=a,ct=c):Bw(i);for(;r!==null;)ct=r,vx(r),r=r.sibling;ct=i,nf=o,nn=u}jw(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,ct=r):jw(n)}}function jw(n){for(;ct!==null;){var t=ct;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nn||og(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!nn)if(e===null)s.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:bs(t.type,e.memoizedProps);s.componentDidUpdate(i,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&_w(t,r,s);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}_w(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Hu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}nn||t.flags&512&&Ym(t)}catch(f){oe(t,t.return,f)}}if(t===n){ct=null;break}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}}function zw(n){for(;ct!==null;){var t=ct;if(t===n){ct=null;break}var e=t.sibling;if(e!==null){e.return=t.return,ct=e;break}ct=t.return}}function Bw(n){for(;ct!==null;){var t=ct;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{og(4,t)}catch(c){oe(t,e,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){oe(t,i,c)}}var r=t.return;try{Ym(t)}catch(c){oe(t,r,c)}break;case 5:var a=t.return;try{Ym(t)}catch(c){oe(t,a,c)}}}catch(c){oe(t,t.return,c)}if(t===n){ct=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ct=o;break}ct=t.return}}var tk=Math.ceil,yp=cr.ReactCurrentDispatcher,ey=cr.ReactCurrentOwner,fs=cr.ReactCurrentBatchConfig,Lt=0,Fe=null,ye=null,$e=0,Wn=0,ul=fa(0),Ee=0,Qu=null,Do=0,lg=0,ny=0,Nu=null,En=null,sy=0,Lc=1/0,_i=null,wp=!1,Zm=null,na=null,sf=!1,Kr=null,bp=0,Iu=0,Qm=null,bf=-1,xf=0;function fn(){return Lt&6?fe():bf!==-1?bf:bf=fe()}function sa(n){return n.mode&1?Lt&2&&$e!==0?$e&-$e:O2.transition!==null?(xf===0&&(xf=eb()),xf):(n=zt,n!==0||(n=window.event,n=n===void 0?16:lb(n.type)),n):1}function js(n,t,e,s){if(50<Iu)throw Iu=0,Qm=null,Error(tt(185));Pd(n,e,s),(!(Lt&2)||n!==Fe)&&(n===Fe&&(!(Lt&2)&&(lg|=e),Ee===4&&vr(n,$e)),Rn(n,s),e===1&&Lt===0&&!(t.mode&1)&&(Lc=fe()+500,ig&&pa()))}function Rn(n,t){var e=n.callbackNode;OS(n,t);var s=sp(n,n===Fe?$e:0);if(s===0)e!==null&&qy(e),n.callbackNode=null,n.callbackPriority=0;else if(t=s&-s,n.callbackPriority!==t){if(e!=null&&qy(e),t===1)n.tag===0?D2(Hw.bind(null,n)):Cb(Hw.bind(null,n)),I2(function(){!(Lt&6)&&pa()}),e=null;else{switch(nb(s)){case 1:e=Pv;break;case 4:e=J1;break;case 16:e=np;break;case 536870912:e=tb;break;default:e=np}e=kx(e,yx.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function yx(n,t){if(bf=-1,xf=0,Lt&6)throw Error(tt(327));var e=n.callbackNode;if(yl()&&n.callbackNode!==e)return null;var s=sp(n,n===Fe?$e:0);if(s===0)return null;if(s&30||s&n.expiredLanes||t)t=xp(n,s);else{t=s;var i=Lt;Lt|=2;var r=bx();(Fe!==n||$e!==t)&&(_i=null,Lc=fe()+500,No(n,t));do try{sk();break}catch(o){wx(n,o)}while(!0);Uv(),yp.current=r,Lt=i,ye!==null?t=0:(Fe=null,$e=0,t=Ee)}if(t!==0){if(t===2&&(i=km(n),i!==0&&(s=i,t=Jm(n,i))),t===1)throw e=Qu,No(n,0),vr(n,s),Rn(n,fe()),e;if(t===6)vr(n,s);else{if(i=n.current.alternate,!(s&30)&&!ek(i)&&(t=xp(n,s),t===2&&(r=km(n),r!==0&&(s=r,t=Jm(n,r))),t===1))throw e=Qu,No(n,0),vr(n,s),Rn(n,fe()),e;switch(n.finishedWork=i,n.finishedLanes=s,t){case 0:case 1:throw Error(tt(345));case 2:va(n,En,_i);break;case 3:if(vr(n,s),(s&130023424)===s&&(t=sy+500-fe(),10<t)){if(sp(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){fn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Lm(va.bind(null,n,En,_i),t);break}va(n,En,_i);break;case 4:if(vr(n,s),(s&4194240)===s)break;for(t=n.eventTimes,i=-1;0<s;){var a=31-Os(s);r=1<<a,a=t[a],a>i&&(i=a),s&=~r}if(s=i,s=fe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*tk(s/1960))-s,10<s){n.timeoutHandle=Lm(va.bind(null,n,En,_i),s);break}va(n,En,_i);break;case 5:va(n,En,_i);break;default:throw Error(tt(329))}}}return Rn(n,fe()),n.callbackNode===e?yx.bind(null,n):null}function Jm(n,t){var e=Nu;return n.current.memoizedState.isDehydrated&&(No(n,t).flags|=256),n=xp(n,t),n!==2&&(t=En,En=e,t!==null&&t0(t)),n}function t0(n){En===null?En=n:En.push.apply(En,n)}function ek(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var s=0;s<e.length;s++){var i=e[s],r=i.getSnapshot;i=i.value;try{if(!Bs(r(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(n,t){for(t&=~ny,t&=~lg,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-Os(t),s=1<<e;n[e]=-1,t&=~s}}function Hw(n){if(Lt&6)throw Error(tt(327));yl();var t=sp(n,0);if(!(t&1))return Rn(n,fe()),null;var e=xp(n,t);if(n.tag!==0&&e===2){var s=km(n);s!==0&&(t=s,e=Jm(n,s))}if(e===1)throw e=Qu,No(n,0),vr(n,t),Rn(n,fe()),e;if(e===6)throw Error(tt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,va(n,En,_i),Rn(n,fe()),null}function iy(n,t){var e=Lt;Lt|=1;try{return n(t)}finally{Lt=e,Lt===0&&(Lc=fe()+500,ig&&pa())}}function Oo(n){Kr!==null&&Kr.tag===0&&!(Lt&6)&&yl();var t=Lt;Lt|=1;var e=fs.transition,s=zt;try{if(fs.transition=null,zt=1,n)return n()}finally{zt=s,fs.transition=e,Lt=t,!(Lt&6)&&pa()}}function ry(){Wn=ul.current,qt(ul)}function No(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,N2(e)),ye!==null)for(e=ye.return;e!==null;){var s=e;switch(zv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&lp();break;case 3:Nc(),qt(Tn),qt(rn),Yv();break;case 5:Xv(s);break;case 4:Nc();break;case 13:qt(ne);break;case 19:qt(ne);break;case 10:$v(s.type._context);break;case 22:case 23:ry()}e=e.return}if(Fe=n,ye=n=ia(n.current,null),$e=Wn=t,Ee=0,Qu=null,ny=lg=Do=0,En=Nu=null,Sa!==null){for(t=0;t<Sa.length;t++)if(e=Sa[t],s=e.interleaved,s!==null){e.interleaved=null;var i=s.next,r=e.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}e.pending=s}Sa=null}return n}function wx(n,t){do{var e=ye;try{if(Uv(),vf.current=vp,mp){for(var s=ie.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}mp=!1}if(Fo=0,Me=ke=ie=null,Pu=!1,qu=0,ey.current=null,e===null||e.return===null){Ee=1,Qu=t,ye=null;break}t:{var r=n,a=e.return,o=e,c=t;if(t=$e,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Tw(a);if(g!==null){g.flags&=-257,Pw(g,a,o,r,t),g.mode&1&&Cw(r,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break t}else{if(!(t&1)){Cw(r,u,t),ay();break t}c=Error(tt(426))}}else if(Jt&&o.mode&1){var w=Tw(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Pw(w,a,o,r,t),Bv(Ic(c,o));break t}}r=c=Ic(c,o),Ee!==4&&(Ee=2),Nu===null?Nu=[r]:Nu.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=nx(r,c,t);xw(r,m);break t;case 1:o=c;var y=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(na===null||!na.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var _=sx(r,o,t);xw(r,_);break t}}r=r.return}while(r!==null)}_x(e)}catch(S){t=S,ye===e&&e!==null&&(ye=e=e.return);continue}break}while(!0)}function bx(){var n=yp.current;return yp.current=vp,n===null?vp:n}function ay(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Fe===null||!(Do&268435455)&&!(lg&268435455)||vr(Fe,$e)}function xp(n,t){var e=Lt;Lt|=2;var s=bx();(Fe!==n||$e!==t)&&(_i=null,No(n,t));do try{nk();break}catch(i){wx(n,i)}while(!0);if(Uv(),Lt=e,yp.current=s,ye!==null)throw Error(tt(261));return Fe=null,$e=0,Ee}function nk(){for(;ye!==null;)xx(ye)}function sk(){for(;ye!==null&&!TS();)xx(ye)}function xx(n){var t=Sx(n.alternate,n,Wn);n.memoizedProps=n.pendingProps,t===null?_x(n):ye=t,ey.current=null}function _x(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=K2(e,t),e!==null){e.flags&=32767,ye=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ee=6,ye=null;return}}else if(e=q2(e,t,Wn),e!==null){ye=e;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=n}while(t!==null);Ee===0&&(Ee=5)}function va(n,t,e){var s=zt,i=fs.transition;try{fs.transition=null,zt=1,ik(n,t,e,s)}finally{fs.transition=i,zt=s}return null}function ik(n,t,e,s){do yl();while(Kr!==null);if(Lt&6)throw Error(tt(327));e=n.finishedWork;var i=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(tt(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(jS(n,r),n===Fe&&(ye=Fe=null,$e=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||sf||(sf=!0,kx(np,function(){return yl(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=fs.transition,fs.transition=null;var a=zt;zt=1;var o=Lt;Lt|=4,ey.current=null,Q2(n,e),mx(e,n),S2(Nm),ip=!!Rm,Nm=Rm=null,n.current=e,J2(e),PS(),Lt=o,zt=a,fs.transition=r}else n.current=e;if(sf&&(sf=!1,Kr=n,bp=i),r=n.pendingLanes,r===0&&(na=null),IS(e.stateNode),Rn(n,fe()),t!==null)for(s=n.onRecoverableError,e=0;e<t.length;e++)i=t[e],s(i.value,{componentStack:i.stack,digest:i.digest});if(wp)throw wp=!1,n=Zm,Zm=null,n;return bp&1&&n.tag!==0&&yl(),r=n.pendingLanes,r&1?n===Qm?Iu++:(Iu=0,Qm=n):Iu=0,pa(),null}function yl(){if(Kr!==null){var n=nb(bp),t=fs.transition,e=zt;try{if(fs.transition=null,zt=16>n?16:n,Kr===null)var s=!1;else{if(n=Kr,Kr=null,bp=0,Lt&6)throw Error(tt(331));var i=Lt;for(Lt|=4,ct=n.current;ct!==null;){var r=ct,a=r.child;if(ct.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(ct=u;ct!==null;){var h=ct;switch(h.tag){case 0:case 11:case 15:Ru(8,h,r)}var d=h.child;if(d!==null)d.return=h,ct=d;else for(;ct!==null;){h=ct;var f=h.sibling,g=h.return;if(fx(h),h===u){ct=null;break}if(f!==null){f.return=g,ct=f;break}ct=g}}}var v=r.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}ct=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,ct=a;else t:for(;ct!==null;){if(r=ct,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Ru(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,ct=m;break t}ct=r.return}}var y=n.current;for(ct=y;ct!==null;){a=ct;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ct=b;else t:for(a=y;ct!==null;){if(o=ct,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:og(9,o)}}catch(S){oe(o,o.return,S)}if(o===a){ct=null;break t}var _=o.sibling;if(_!==null){_.return=o.return,ct=_;break t}ct=o.return}}if(Lt=i,pa(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(Jp,n)}catch{}s=!0}return s}finally{zt=e,fs.transition=t}}return!1}function Uw(n,t,e){t=Ic(e,t),t=nx(n,t,1),n=ea(n,t,1),t=fn(),n!==null&&(Pd(n,1,t),Rn(n,t))}function oe(n,t,e){if(n.tag===3)Uw(n,n,e);else for(;t!==null;){if(t.tag===3){Uw(t,n,e);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(na===null||!na.has(s))){n=Ic(e,n),n=sx(t,n,1),t=ea(t,n,1),n=fn(),t!==null&&(Pd(t,1,n),Rn(t,n));break}}t=t.return}}function rk(n,t,e){var s=n.pingCache;s!==null&&s.delete(t),t=fn(),n.pingedLanes|=n.suspendedLanes&e,Fe===n&&($e&e)===e&&(Ee===4||Ee===3&&($e&130023424)===$e&&500>fe()-sy?No(n,0):ny|=e),Rn(n,t)}function Ax(n,t){t===0&&(n.mode&1?(t=Xd,Xd<<=1,!(Xd&130023424)&&(Xd=4194304)):t=1);var e=fn();n=rr(n,t),n!==null&&(Pd(n,t,e),Rn(n,e))}function ak(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),Ax(n,e)}function ok(n,t){var e=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(e=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(tt(314))}s!==null&&s.delete(t),Ax(n,e)}var Sx;Sx=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||Tn.current)Cn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Cn=!1,Y2(n,t,e);Cn=!!(n.flags&131072)}else Cn=!1,Jt&&t.flags&1048576&&Tb(t,hp,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;wf(n,t),n=t.pendingProps;var i=Tc(t,rn.current);vl(t,e),i=Kv(null,t,s,n,i,e);var r=Zv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pn(s)?(r=!0,cp(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gv(t),i.updater=ag,t.stateNode=i,i._reactInternals=t,Bm(t,s,n,e),t=$m(null,t,s,!0,r,e)):(t.tag=0,Jt&&r&&jv(t),dn(null,t,i,e),t=t.child),t;case 16:s=t.elementType;t:{switch(wf(n,t),n=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=ck(s),n=bs(s,n),i){case 0:t=Um(null,t,s,n,e);break t;case 1:t=Iw(null,t,s,n,e);break t;case 11:t=Rw(null,t,s,n,e);break t;case 14:t=Nw(null,t,s,bs(s.type,n),e);break t}throw Error(tt(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:bs(s,i),Um(n,t,s,i,e);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:bs(s,i),Iw(n,t,s,i,e);case 3:t:{if(ox(t),n===null)throw Error(tt(387));s=t.pendingProps,r=t.memoizedState,i=r.element,Mb(n,t),pp(t,s,null,e);var a=t.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=Ic(Error(tt(423)),t),t=Lw(n,t,s,e,i);break t}else if(s!==i){i=Ic(Error(tt(424)),t),t=Lw(n,t,s,e,i);break t}else for(Xn=ta(t.stateNode.containerInfo.firstChild),Yn=t,Jt=!0,Fs=null,e=Ib(t,null,s,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Pc(),s===i){t=ar(n,t,e);break t}dn(n,t,s,e)}t=t.child}return t;case 5:return Fb(t),n===null&&Om(t),s=t.type,i=t.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,Im(s,i)?a=null:r!==null&&Im(s,r)&&(t.flags|=32),ax(n,t),dn(n,t,a,e),t.child;case 6:return n===null&&Om(t),null;case 13:return lx(n,t,e);case 4:return Vv(t,t.stateNode.containerInfo),s=t.pendingProps,n===null?t.child=Rc(t,null,s,e):dn(n,t,s,e),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:bs(s,i),Rw(n,t,s,i,e);case 7:return dn(n,t,t.pendingProps,e),t.child;case 8:return dn(n,t,t.pendingProps.children,e),t.child;case 12:return dn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(s=t.type._context,i=t.pendingProps,r=t.memoizedProps,a=i.value,Gt(dp,s._currentValue),s._currentValue=a,r!==null)if(Bs(r.value,a)){if(r.children===i.children&&!Tn.current){t=ar(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=tr(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),jm(r.return,e,t),o.lanes|=e;break}c=c.next}}else if(r.tag===10)a=r.type===t.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(tt(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),jm(a,e,t),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}dn(n,t,i.children,e),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,vl(t,e),i=gs(i),s=s(i),t.flags|=1,dn(n,t,s,e),t.child;case 14:return s=t.type,i=bs(s,t.pendingProps),i=bs(s.type,i),Nw(n,t,s,i,e);case 15:return ix(n,t,t.type,t.pendingProps,e);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:bs(s,i),wf(n,t),t.tag=1,Pn(s)?(n=!0,cp(t)):n=!1,vl(t,e),ex(t,s,i),Bm(t,s,i,e),$m(null,t,s,!0,n,e);case 19:return cx(n,t,e);case 22:return rx(n,t,e)}throw Error(tt(156,t.tag))};function kx(n,t){return Q1(n,t)}function lk(n,t,e,s){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(n,t,e,s){return new lk(n,t,e,s)}function oy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ck(n){if(typeof n=="function")return oy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ev)return 11;if(n===Cv)return 14}return 2}function ia(n,t){var e=n.alternate;return e===null?(e=ds(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function _f(n,t,e,s,i,r){var a=2;if(s=n,typeof n=="function")oy(n)&&(a=1);else if(typeof n=="string")a=5;else t:switch(n){case tl:return Io(e.children,i,r,t);case kv:a=8,i|=8;break;case um:return n=ds(12,e,t,i|2),n.elementType=um,n.lanes=r,n;case hm:return n=ds(13,e,t,i),n.elementType=hm,n.lanes=r,n;case dm:return n=ds(19,e,t,i),n.elementType=dm,n.lanes=r,n;case F1:return cg(e,i,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case L1:a=10;break t;case M1:a=9;break t;case Ev:a=11;break t;case Cv:a=14;break t;case pr:a=16,s=null;break t}throw Error(tt(130,n==null?n:typeof n,""))}return t=ds(a,e,t,i),t.elementType=n,t.type=s,t.lanes=r,t}function Io(n,t,e,s){return n=ds(7,n,s,t),n.lanes=e,n}function cg(n,t,e,s){return n=ds(22,n,s,t),n.elementType=F1,n.lanes=e,n.stateNode={isHidden:!1},n}function Yg(n,t,e){return n=ds(6,n,null,t),n.lanes=e,n}function qg(n,t,e){return t=ds(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function uk(n,t,e,s,i){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pg(0),this.expirationTimes=Pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pg(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ly(n,t,e,s,i,r,a,o,c){return n=new uk(n,t,e,o,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=ds(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gv(r),n}function hk(n,t,e){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:s==null?null:""+s,children:n,containerInfo:t,implementation:e}}function Ex(n){if(!n)return oa;n=n._reactInternals;t:{if($o(n)!==n||n.tag!==1)throw Error(tt(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(tt(171))}if(n.tag===1){var e=n.type;if(Pn(e))return Eb(n,e,t)}return t}function Cx(n,t,e,s,i,r,a,o,c){return n=ly(e,s,!0,n,i,r,a,o,c),n.context=Ex(null),e=n.current,s=fn(),i=sa(e),r=tr(s,i),r.callback=t??null,ea(e,r,i),n.current.lanes=i,Pd(n,i,s),Rn(n,s),n}function ug(n,t,e,s){var i=t.current,r=fn(),a=sa(i);return e=Ex(e),t.context===null?t.context=e:t.pendingContext=e,t=tr(r,a),t.payload={element:n},s=s===void 0?null:s,s!==null&&(t.callback=s),n=ea(i,t,a),n!==null&&(js(n,i,a,r),mf(n,i,a)),a}function _p(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function $w(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function cy(n,t){$w(n,t),(n=n.alternate)&&$w(n,t)}function dk(){return null}var Tx=typeof reportError=="function"?reportError:function(n){console.error(n)};function uy(n){this._internalRoot=n}hg.prototype.render=uy.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(tt(409));ug(n,t,null,null)};hg.prototype.unmount=uy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;Oo(function(){ug(null,n,null,null)}),t[ir]=null}};function hg(n){this._internalRoot=n}hg.prototype.unstable_scheduleHydration=function(n){if(n){var t=rb();n={blockedOn:null,target:n,priority:t};for(var e=0;e<mr.length&&t!==0&&t<mr[e].priority;e++);mr.splice(e,0,n),e===0&&ob(n)}};function hy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function dg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ww(){}function fk(n,t,e,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=_p(a);r.call(u)}}var a=Cx(t,s,n,0,null,!1,!1,"",Ww);return n._reactRootContainer=a,n[ir]=a.current,Wu(n.nodeType===8?n.parentNode:n),Oo(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var u=_p(c);o.call(u)}}var c=ly(n,0,!1,null,null,!1,!1,"",Ww);return n._reactRootContainer=c,n[ir]=c.current,Wu(n.nodeType===8?n.parentNode:n),Oo(function(){ug(t,c,e,s)}),c}function fg(n,t,e,s,i){var r=e._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var c=_p(a);o.call(c)}}ug(t,a,n,i)}else a=fk(e,t,n,i,s);return _p(a)}sb=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=au(t.pendingLanes);e!==0&&(Rv(t,e|1),Rn(t,fe()),!(Lt&6)&&(Lc=fe()+500,pa()))}break;case 13:Oo(function(){var s=rr(n,1);if(s!==null){var i=fn();js(s,n,1,i)}}),cy(n,1)}};Nv=function(n){if(n.tag===13){var t=rr(n,134217728);if(t!==null){var e=fn();js(t,n,134217728,e)}cy(n,134217728)}};ib=function(n){if(n.tag===13){var t=sa(n),e=rr(n,t);if(e!==null){var s=fn();js(e,n,t,s)}cy(n,t)}};rb=function(){return zt};ab=function(n,t){var e=zt;try{return zt=n,t()}finally{zt=e}};_m=function(n,t,e){switch(t){case"input":if(gm(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var s=e[t];if(s!==n&&s.form===n.form){var i=sg(s);if(!i)throw Error(tt(90));O1(s),gm(s,i)}}}break;case"textarea":z1(n,e);break;case"select":t=e.value,t!=null&&fl(n,!!e.multiple,t,!1)}};V1=iy;X1=Oo;var pk={usingClientEntryPoint:!1,Events:[Nd,il,sg,W1,G1,iy]},Zc={findFiberByHostInstance:Aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gk={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=K1(n),n===null?null:n.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||dk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{Jp=rf.inject(gk),pi=rf}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pk;Zn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hy(t))throw Error(tt(200));return hk(n,t,null,e)};Zn.createRoot=function(n,t){if(!hy(n))throw Error(tt(299));var e=!1,s="",i=Tx;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ly(n,1,!1,null,null,e,!1,s,i),n[ir]=t.current,Wu(n.nodeType===8?n.parentNode:n),new uy(t)};Zn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(tt(188)):(n=Object.keys(n).join(","),Error(tt(268,n)));return n=K1(t),n=n===null?null:n.stateNode,n};Zn.flushSync=function(n){return Oo(n)};Zn.hydrate=function(n,t,e){if(!dg(t))throw Error(tt(200));return fg(null,n,t,!0,e)};Zn.hydrateRoot=function(n,t,e){if(!hy(n))throw Error(tt(405));var s=e!=null&&e.hydratedSources||null,i=!1,r="",a=Tx;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=Cx(t,null,n,1,e??null,i,!1,r,a),n[ir]=t.current,Wu(n),s)for(n=0;n<s.length;n++)e=s[n],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new hg(t)};Zn.render=function(n,t,e){if(!dg(t))throw Error(tt(200));return fg(null,n,t,!1,e)};Zn.unmountComponentAtNode=function(n){if(!dg(n))throw Error(tt(40));return n._reactRootContainer?(Oo(function(){fg(null,null,n,!1,function(){n._reactRootContainer=null,n[ir]=null})}),!0):!1};Zn.unstable_batchedUpdates=iy;Zn.unstable_renderSubtreeIntoContainer=function(n,t,e,s){if(!dg(e))throw Error(tt(200));if(n==null||n._reactInternals===void 0)throw Error(tt(38));return fg(n,t,e,!1,s)};Zn.version="18.3.1-next-f1338f8080-20240426";function Px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Px)}catch(n){console.error(n)}}Px(),P1.exports=Zn;var mk=P1.exports,Gw=mk;lm.createRoot=Gw.createRoot,lm.hydrateRoot=Gw.hydrateRoot;var Pt=(n=>(n.HOME="home",n.LOGO="logo",n.PDF="pdf",n.SPLIT="split",n.STORY="story",n.STILLS="stills",n.ADLINKS="adlinks",n.RENAME="rename",n))(Pt||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(n,t)=>{const e=ht.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:c,...u},h)=>ht.createElement("svg",{ref:h,...vk,width:i,height:i,stroke:s,strokeWidth:a?Number(r)*24/Number(i):r,className:["lucide",`lucide-${yk(n)}`,o].join(" "),...u},[...t.map(([d,f])=>ht.createElement(d,f)),...Array.isArray(c)?c:[c]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=le("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=le("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=le("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=le("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=le("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=le("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Lx(n){var t,e,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=Lx(n[t]))&&(s&&(s+=" "),s+=e)}else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function n0(){for(var n,t,e=0,s="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=Lx(n))&&(s&&(s+=" "),s+=t);return s}const Tk=({currentView:n,onChangeView:t,activeColor:e,activeBg:s})=>{const i=[{id:Pt.HOME,icon:Ak,label:"Home"},{type:"divider"},{id:Pt.LOGO,icon:fy,label:"Logo"},{id:Pt.PDF,icon:dy,label:"PDF"},{id:Pt.SPLIT,icon:gy,label:"Split"},{id:Pt.STILLS,icon:Ap,label:"Stills"},{id:Pt.STORY,icon:Nx,label:"Story"},{id:Pt.ADLINKS,icon:Ix,label:"Links"},{id:Pt.RENAME,icon:py,label:"Rename"}];return E.jsx("nav",{className:"w-full md:w-[80px] md:h-full flex md:flex-col items-center justify-evenly md:justify-start py-2 md:py-6 gap-2 md:gap-4 z-20 px-2 md:px-0",children:i.map((r,a)=>{if(r.type==="divider")return E.jsx("div",{className:"hidden md:block w-8 h-px bg-[#222] my-2"},a);const o=n===r.id,c=r.icon;return E.jsxs("div",{className:"flex flex-col items-center gap-1 group w-full",children:[E.jsx("button",{onClick:()=>t(r.id),className:n0("w-12 h-8 md:w-14 md:h-8 rounded-full flex items-center justify-center transition-all duration-300 relative overflow-hidden",!o&&"text-[#666] hover:bg-[#1A1A1A] hover:text-[#EEE]"),style:o?{backgroundColor:e,color:s}:{},title:r.label,children:E.jsx(c,{className:"w-5 h-5 md:w-5 md:h-5",strokeWidth:o?2.5:2})}),E.jsx("span",{className:n0("text-[10px] font-medium tracking-wide transition-colors",o?"text-[#E6E1E5]":"text-[#555] group-hover:text-[#999]"),children:r.label})]},r.id)})})},Xw=({onNavigate:n})=>{const t=[{id:Pt.LOGO,name:"Logo Resizer",desc:"Batch resize images & overlay text.",icon:fy,theme:"blue"},{id:Pt.PDF,name:"PDF to Image",desc:"Convert PDF pages to high-res PNGs.",icon:dy,theme:"red"},{id:Pt.SPLIT,name:"Image Splitter",desc:"Split images into grids or rows.",icon:gy,theme:"orange"},{id:Pt.STILLS,name:"Video Stills",desc:"Extract frames from video files.",icon:Ap,theme:"cyan"},{id:Pt.STORY,name:"Storyboard",desc:"Arrange images into a single board.",icon:Nx,theme:"purple"},{id:Pt.ADLINKS,name:"Ad Link Gen",desc:"Generate HTML for ad exposure.",icon:Ix,theme:"emerald"},{id:Pt.RENAME,name:"Batch Rename",desc:"Rename multiple files with rules.",icon:py,theme:"yellow"}],e=s=>{switch(s){case"blue":return{bg:"bg-[#0842A0]",text:"text-[#D3E3FD]",iconBg:"bg-[#D3E3FD]",iconText:"text-[#041E49]"};case"red":return{bg:"bg-[#93000A]",text:"text-[#FFDAD6]",iconBg:"bg-[#FFDAD6]",iconText:"text-[#410002]"};case"orange":return{bg:"bg-[#8B5000]",text:"text-[#FFDCC1]",iconBg:"bg-[#FFDCC1]",iconText:"text-[#2B1700]"};case"cyan":return{bg:"bg-[#004E5F]",text:"text-[#A6EEFF]",iconBg:"bg-[#A6EEFF]",iconText:"text-[#001F26]"};case"purple":return{bg:"bg-[#4A0072]",text:"text-[#E9DDFF]",iconBg:"bg-[#E9DDFF]",iconText:"text-[#21005D]"};case"emerald":return{bg:"bg-[#005231]",text:"text-[#C4EED0]",iconBg:"bg-[#C4EED0]",iconText:"text-[#002114]"};case"yellow":return{bg:"bg-[#FFD600]",text:"text-[#211B00]",iconBg:"bg-[#FFE082]",iconText:"text-[#261900]"};default:return{bg:"bg-[#4A4458]",text:"text-[#E8DEF8]",iconBg:"bg-[#E8DEF8]",iconText:"text-[#1D192B]"}}};return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-16 animate-in fade-in duration-500 py-10",children:[E.jsx("div",{className:"text-center space-y-2 max-w-2xl px-4",children:E.jsx("h1",{className:"text-5xl md:text-7xl font-display font-bold text-[#E6E1E5] tracking-tight",children:"Creative Suite"})}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl px-4",children:t.map(s=>{const i=e(s.theme);return E.jsxs("div",{onClick:()=>n(s.id),className:`
                relative overflow-hidden
                bg-[#111] rounded-[24px] border border-[#222] p-0 cursor-pointer
                transition-all duration-300 group
                hover:border-[#444] hover:shadow-2xl hover:scale-[1.01] hover:bg-[#161616]
            `,children:[E.jsxs("div",{className:"p-6 pb-4",children:[E.jsxs("div",{className:"flex justify-between items-start mb-6",children:[E.jsx("div",{className:`w-14 h-14 rounded-[20px] flex items-center justify-center transition-colors ${i.iconBg} ${i.iconText}`,children:E.jsx(s.icon,{className:"w-7 h-7",strokeWidth:2})}),E.jsx("div",{className:`p-2 rounded-full opacity-0 -translate-x-2 group-hover:translate-x-0 group-hover:opacity-100 transition-all duration-300 ${i.bg}`,children:E.jsx(Rx,{className:`w-5 h-5 ${i.text}`})})]}),E.jsx("h3",{className:"text-2xl font-bold text-[#E6E1E5] mb-2 font-display tracking-wide",children:s.name}),E.jsx("p",{className:"text-sm text-[#888] leading-relaxed group-hover:text-[#AAA] transition-colors",children:s.desc})]}),E.jsx("div",{className:`h-1 w-full ${i.bg} opacity-50 group-hover:opacity-100 transition-opacity`})]},s.id)})}),E.jsx("footer",{className:"text-center text-[10px] uppercase tracking-widest text-[#444] mt-12",children:"Material 3 Design  V1.0.0"})]})},my="-",Pk=n=>{const t=Nk(n),{conflictingClassGroups:e,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const o=a.split(my);return o[0]===""&&o.length!==1&&o.shift(),Mx(o,t)||Rk(a)},getConflictingClassGroupIds:(a,o)=>{const c=e[a]||[];return o&&s[a]?[...c,...s[a]]:c}}},Mx=(n,t)=>{var a;if(n.length===0)return t.classGroupId;const e=n[0],s=t.nextPart.get(e),i=s?Mx(n.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const r=n.join(my);return(a=t.validators.find(({validator:o})=>o(r)))==null?void 0:a.classGroupId},Yw=/^\[(.+)\]$/,Rk=n=>{if(Yw.test(n)){const t=Yw.exec(n)[1],e=t==null?void 0:t.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},Nk=n=>{const{theme:t,prefix:e}=n,s={nextPart:new Map,validators:[]};return Lk(Object.entries(n.classGroups),e).forEach(([r,a])=>{s0(a,s,r,t)}),s},s0=(n,t,e,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?t:qw(t,i);r.classGroupId=e;return}if(typeof i=="function"){if(Ik(i)){s0(i(s),t,e,s);return}t.validators.push({validator:i,classGroupId:e});return}Object.entries(i).forEach(([r,a])=>{s0(a,qw(t,r),e,s)})})},qw=(n,t)=>{let e=n;return t.split(my).forEach(s=>{e.nextPart.has(s)||e.nextPart.set(s,{nextPart:new Map,validators:[]}),e=e.nextPart.get(s)}),e},Ik=n=>n.isThemeGetter,Lk=(n,t)=>t?n.map(([e,s])=>{const i=s.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,o])=>[t+a,o])):r);return[e,i]}):n,Mk=n=>{if(n<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,s=new Map;const i=(r,a)=>{e.set(r,a),t++,t>n&&(t=0,s=e,e=new Map)};return{get(r){let a=e.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return i(r,a),a},set(r,a){e.has(r)?e.set(r,a):i(r,a)}}},Fx="!",Fk=n=>{const{separator:t,experimentalParseClassName:e}=n,s=t.length===1,i=t[0],r=t.length,a=o=>{const c=[];let u=0,h=0,d;for(let w=0;w<o.length;w++){let m=o[w];if(u===0){if(m===i&&(s||o.slice(w,w+r)===t)){c.push(o.slice(h,w)),h=w+r;continue}if(m==="/"){d=w;continue}}m==="["?u++:m==="]"&&u--}const f=c.length===0?o:o.substring(h),g=f.startsWith(Fx),v=g?f.substring(1):f,p=d&&d>h?d-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:p}};return e?o=>e({className:o,parseClassName:a}):a},Dk=n=>{if(n.length<=1)return n;const t=[];let e=[];return n.forEach(s=>{s[0]==="["?(t.push(...e.sort(),s),e=[]):e.push(s)}),t.push(...e.sort()),t},Ok=n=>({cache:Mk(n.cacheSize),parseClassName:Fk(n),...Pk(n)}),jk=/\s+/,zk=(n,t)=>{const{parseClassName:e,getClassGroupId:s,getConflictingClassGroupIds:i}=t,r=[],a=n.trim().split(jk);let o="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=e(u);let v=!!g,p=s(v?f.substring(0,g):f);if(!p){if(!v){o=u+(o.length>0?" "+o:o);continue}if(p=s(f),!p){o=u+(o.length>0?" "+o:o);continue}v=!1}const w=Dk(h).join(":"),m=d?w+Fx:w,y=m+p;if(r.includes(y))continue;r.push(y);const b=i(p,v);for(let _=0;_<b.length;++_){const S=b[_];r.push(m+S)}o=u+(o.length>0?" "+o:o)}return o};function Bk(){let n=0,t,e,s="";for(;n<arguments.length;)(t=arguments[n++])&&(e=Dx(t))&&(s&&(s+=" "),s+=e);return s}const Dx=n=>{if(typeof n=="string")return n;let t,e="";for(let s=0;s<n.length;s++)n[s]&&(t=Dx(n[s]))&&(e&&(e+=" "),e+=t);return e};function Hk(n,...t){let e,s,i,r=a;function a(c){const u=t.reduce((h,d)=>d(h),n());return e=Ok(u),s=e.cache.get,i=e.cache.set,r=o,o(c)}function o(c){const u=s(c);if(u)return u;const h=zk(c,e);return i(c,h),h}return function(){return r(Bk.apply(null,arguments))}}const Vt=n=>{const t=e=>e[n]||[];return t.isThemeGetter=!0,t},Ox=/^\[(?:([a-z-]+):)?(.+)\]$/i,Uk=/^\d+\/\d+$/,$k=new Set(["px","full","screen"]),Wk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Yk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yi=n=>wl(n)||$k.has(n)||Uk.test(n),hr=n=>jc(n,"length",nE),wl=n=>!!n&&!Number.isNaN(Number(n)),Kg=n=>jc(n,"number",wl),Qc=n=>!!n&&Number.isInteger(Number(n)),qk=n=>n.endsWith("%")&&wl(n.slice(0,-1)),_t=n=>Ox.test(n),dr=n=>Wk.test(n),Kk=new Set(["length","size","percentage"]),Zk=n=>jc(n,Kk,jx),Qk=n=>jc(n,"position",jx),Jk=new Set(["image","url"]),tE=n=>jc(n,Jk,iE),eE=n=>jc(n,"",sE),Jc=()=>!0,jc=(n,t,e)=>{const s=Ox.exec(n);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):e(s[2]):!1},nE=n=>Gk.test(n)&&!Vk.test(n),jx=()=>!1,sE=n=>Xk.test(n),iE=n=>Yk.test(n),rE=()=>{const n=Vt("colors"),t=Vt("spacing"),e=Vt("blur"),s=Vt("brightness"),i=Vt("borderColor"),r=Vt("borderRadius"),a=Vt("borderSpacing"),o=Vt("borderWidth"),c=Vt("contrast"),u=Vt("grayscale"),h=Vt("hueRotate"),d=Vt("invert"),f=Vt("gap"),g=Vt("gradientColorStops"),v=Vt("gradientColorStopPositions"),p=Vt("inset"),w=Vt("margin"),m=Vt("opacity"),y=Vt("padding"),b=Vt("saturate"),_=Vt("scale"),S=Vt("sepia"),R=Vt("skew"),P=Vt("space"),I=Vt("translate"),M=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",_t,t],N=()=>[_t,t],B=()=>["",yi,hr],k=()=>["auto",wl,_t],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",_t],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[wl,_t];return{cacheSize:500,separator:":",theme:{colors:[Jc],spacing:[yi,hr],blur:["none","",dr,_t],brightness:O(),borderColor:[n],borderRadius:["none","","full",dr,_t],borderSpacing:N(),borderWidth:B(),contrast:O(),grayscale:U(),hueRotate:O(),invert:U(),gap:N(),gradientColorStops:[n],gradientColorStopPositions:[qk,hr],inset:$(),margin:$(),opacity:O(),padding:N(),saturate:O(),scale:O(),sepia:U(),skew:O(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[dr]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),_t]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qc,_t]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Qc,_t]}],"grid-cols":[{"grid-cols":[Jc]}],"col-start-end":[{col:["auto",{span:["full",Qc,_t]},_t]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Jc]}],"row-start-end":[{row:["auto",{span:[Qc,_t]},_t]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,t]}],"min-w":[{"min-w":[_t,t,"min","max","fit"]}],"max-w":[{"max-w":[_t,t,"none","full","min","max","fit","prose",{screen:[dr]},dr]}],h:[{h:[_t,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,t,"auto","min","max","fit"]}],"font-size":[{text:["base",dr,hr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kg]}],"font-family":[{font:[Jc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",wl,Kg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yi,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yi,hr]}],"underline-offset":[{"underline-offset":["auto",yi,_t]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),Qk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tE]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[yi,_t]}],"outline-w":[{outline:[yi,hr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[yi,hr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",dr,eE]}],"shadow-color":[{shadow:[Jc]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",dr,_t]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Qc,_t]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[yi,hr,Kg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aE=Hk(rE);function la(...n){return aE(n0(n))}const pe=({className:n,variant:t="tonal",icon:e,children:s,...i})=>{const r="h-10 px-6 rounded-full font-medium text-sm tracking-wide flex items-center justify-center gap-2 transition-all duration-200 select-none disabled:opacity-38 disabled:cursor-not-allowed active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#000000] relative overflow-hidden",a={filled:"bg-[#D0BCFF] text-[#381E72] hover:bg-[#E8DEF8] hover:shadow-md",tonal:"bg-[#2A2A2A] text-[#E8DEF8] hover:bg-[#333333] hover:shadow-sm border border-[#333]",outlined:"border border-[#555] text-[#D0BCFF] hover:bg-[#D0BCFF]/10",text:"bg-transparent text-[#D0BCFF] hover:bg-[#D0BCFF]/10 px-3",primary:"bg-[#D0BCFF] text-[#381E72] hover:bg-[#E8DEF8]",secondary:"bg-[#2A2A2A] text-[#E8DEF8] hover:bg-[#333333]",danger:"bg-[#3C1A1A] text-[#FFB4AB] hover:bg-[#4F2525] border border-[#552020]",blue:"bg-[#0842A0] text-[#D3E3FD] hover:bg-[#0B57D0]",red:"bg-[#93000A] text-[#FFDAD6] hover:bg-[#BA1A1A]",orange:"bg-[#8B5000] text-[#FFDCC1] hover:bg-[#FFB77C]",purple:"bg-[#7c4dff] text-[#ffffff] hover:bg-[#651fff]",cyan:"bg-[#004E5F] text-[#A6EEFF] hover:bg-[#00687A]",emerald:"bg-[#005231] text-[#C4EED0] hover:bg-[#006C41]"};return E.jsxs("button",{className:la(r,a[t]||a.tonal,n),...i,children:[e&&E.jsx("span",{className:"mr-1 -ml-1",children:e}),s]})},tn=({className:n,...t})=>E.jsx("div",{className:"relative group w-full",children:E.jsx("input",{className:la("h-12 px-4 w-full bg-[#1A1A1A] rounded-lg border border-[#333] text-[#E6E1E5] text-sm placeholder:text-[#666]","focus:border-[#D0BCFF] focus:bg-[#222] focus:outline-none transition-colors duration-200","hover:bg-[#222] hover:border-[#555]",n),...t})}),vy=({className:n,children:t,...e})=>E.jsxs("div",{className:"relative group w-full",children:[E.jsx("select",{className:la("h-12 px-4 pr-10 w-full bg-[#1A1A1A] rounded-lg border border-[#333] text-[#E6E1E5] text-sm appearance-none cursor-pointer","focus:border-[#D0BCFF] focus:bg-[#222] focus:outline-none transition-colors duration-200","hover:bg-[#222] hover:border-[#555]",n),...e,children:t}),E.jsx(xk,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#666] pointer-events-none w-4 h-4"})]}),Zg=({className:n,...t})=>E.jsx("div",{className:"relative group w-full h-full",children:E.jsx("textarea",{className:la("w-full bg-[#1A1A1A] rounded-lg border border-[#333] text-[#E6E1E5] text-sm placeholder:text-[#666] p-4 resize-none","focus:border-[#D0BCFF] focus:bg-[#222] focus:outline-none transition-colors duration-200","hover:bg-[#222] hover:border-[#555]",n),...t})}),Ju=({checked:n,onChange:t,label:e})=>E.jsxs("label",{className:"flex items-center gap-4 cursor-pointer select-none group",children:[E.jsxs("div",{className:"relative flex items-center",children:[E.jsx("input",{type:"checkbox",className:"sr-only",checked:n,onChange:s=>t(s.target.checked)}),E.jsx("div",{className:la("w-[52px] h-8 rounded-full transition-colors duration-200 border",n?"bg-[#D0BCFF] border-[#D0BCFF]":"bg-[#1A1A1A] border-[#444] group-hover:border-[#666]")}),E.jsx("div",{className:la("absolute top-1/2 -translate-y-1/2 w-6 h-6 rounded-full transition-all duration-200 flex items-center justify-center shadow-sm",n?"left-[calc(100%-28px)] bg-[#381E72] w-6 h-6":"left-[6px] bg-[#888] group-hover:bg-[#AAA] w-4 h-4"),children:n&&E.jsx("svg",{className:"w-4 h-4 text-[#D0BCFF]",fill:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})})})]}),e&&E.jsx("span",{className:"text-sm font-medium text-[#E6E1E5]",children:e})]}),Qg=({label:n,valueDisplay:t,className:e,...s})=>E.jsxs("div",{className:"flex flex-col gap-2 w-full py-1",children:[n&&E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"text-xs font-medium text-[#888] uppercase tracking-wider",children:n}),t!==void 0&&E.jsx("span",{className:"text-xs font-bold text-[#D0BCFF] bg-[#222] border border-[#333] px-2 py-0.5 rounded-md",children:t})]}),E.jsx("input",{type:"range",className:la("w-full h-1 bg-[#333] rounded-full appearance-none cursor-pointer","accent-[#D0BCFF] hover:accent-[#E8DEF8]",e),...s})]}),zc=({onFiles:n,accept:t,icon:e,label:s})=>{const i=a=>{a.preventDefault(),a.dataTransfer.files.length>0&&n(Array.from(a.dataTransfer.files))},r=a=>{a.target.files&&a.target.files.length>0&&n(Array.from(a.target.files))};return E.jsx("div",{className:"relative w-full min-h-[140px] border border-dashed border-[#444] hover:border-[#D0BCFF] bg-[#111] hover:bg-[#161616] rounded-[24px] flex flex-col items-center justify-center transition-all duration-300 cursor-pointer group overflow-hidden",onDragOver:a=>a.preventDefault(),onDrop:i,children:E.jsxs("label",{className:"cursor-pointer flex flex-col items-center gap-3 relative z-10 w-full h-full justify-center p-6",children:[E.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:t,onChange:r}),E.jsx("div",{className:"bg-[#1A1A1A] w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 group-hover:bg-[#D0BCFF] group-hover:text-[#381E72] transition-all duration-300 text-[#666] shadow-sm border border-[#333]",children:e}),E.jsx("div",{className:"text-center",children:E.jsx("span",{className:"text-[#999] text-sm font-medium group-hover:text-[#D0BCFF] transition-colors block",children:s})})]})})},zs=({children:n,className:t})=>E.jsx("div",{className:la("bg-[#111111] border border-[#222] rounded-[24px] p-5 shadow-sm",t),children:n}),Md=({icon:n,message:t})=>E.jsxs("div",{className:"w-full h-full min-h-[300px] border border-dashed border-[#333] bg-[#0A0A0A] rounded-[32px] flex flex-col items-center justify-center gap-4 text-[#555] animate-in fade-in zoom-in duration-300",children:[E.jsx("div",{className:"opacity-50 bg-[#111] p-6 rounded-3xl text-[#E6E1E5] border border-[#222]",children:n}),E.jsx("p",{className:"font-medium tracking-wide text-sm uppercase text-[#666]",children:t})]}),oE=n=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},lE=(n,t,e)=>{n/=255,t/=255,e/=255;const s=Math.max(n,t,e),i=Math.min(n,t,e);let r=0,a,o=s;const c=s-i;if(a=s===0?0:c/s,s===i)r=0;else{switch(s){case n:r=(t-e)/c+(t<e?6:0);break;case t:r=(e-n)/c+2;break;case e:r=(n-t)/c+4;break}r/=6}return{h:r,s:a,v:o}},Jg=(n,t,e)=>{let s=0,i=0,r=0;const a=Math.floor(n*6),o=n*6-a,c=e*(1-t),u=e*(1-o*t),h=e*(1-(1-o)*t);switch(a%6){case 0:s=e,i=h,r=c;break;case 1:s=u,i=e,r=c;break;case 2:s=c,i=e,r=h;break;case 3:s=c,i=u,r=e;break;case 4:s=h,i=c,r=e;break;case 5:s=e,i=c,r=u;break}return{r:Math.round(s*255),g:Math.round(i*255),b:Math.round(r*255)}},tm=(n,t,e)=>"#"+((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1).toUpperCase(),cE=({value:n,onChange:t})=>{const[e,s]=ht.useState(!1),[i,r]=ht.useState({h:0,s:0,v:0}),[a,o]=ht.useState({}),c=ht.useRef(null),u=ht.useRef(null),h=ht.useRef(null),d=ht.useRef(null);ht.useEffect(()=>{const p=oE(n),w=lE(p.r,p.g,p.b);r(w)},[n]),ht.useEffect(()=>{if(e&&c.current){const p=c.current.getBoundingClientRect(),w=window.innerHeight-p.bottom,m=320;let y=p.bottom+8;w<m&&p.top>m&&(y=p.top-m-8);let b=p.left;b+256>window.innerWidth&&(b=window.innerWidth-256-16),o({position:"fixed",top:y,left:b,zIndex:9999});const _=()=>s(!1);return window.addEventListener("scroll",_,!0),()=>window.removeEventListener("scroll",_,!0)}},[e]),ht.useEffect(()=>{const p=w=>{c.current&&!c.current.contains(w.target)&&u.current&&!u.current.contains(w.target)&&s(!1)};return e&&document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[e]);const f=p=>{const w=y=>{if(!h.current)return;const b=h.current.getBoundingClientRect(),_=Math.max(0,Math.min(b.width,y.clientX-b.left)),S=Math.max(0,Math.min(b.height,y.clientY-b.top)),R=_/b.width,P=1-S/b.height;r(I=>{const M={...I,s:R,v:P},D=Jg(M.h,M.s,M.v);return t(tm(D.r,D.g,D.b)),M})},m=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",m)};w(p.nativeEvent),document.addEventListener("mousemove",w),document.addEventListener("mouseup",m)},g=p=>{const w=y=>{if(!d.current)return;const b=d.current.getBoundingClientRect(),S=Math.max(0,Math.min(b.width,y.clientX-b.left))/b.width;r(R=>{const P={...R,h:S},I=Jg(P.h,P.s,P.v);return t(tm(I.r,I.g,I.b)),P})},m=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",m)};w(p.nativeEvent),document.addEventListener("mousemove",w),document.addEventListener("mouseup",m)},v=Jg(i.h,i.s,i.v);return E.jsxs("div",{ref:c,children:[E.jsxs("button",{onClick:()=>s(!e),className:"w-full h-12 bg-transparent hover:bg-[#333537]/50 border-none rounded-lg flex items-center gap-3 px-0 transition-colors focus:outline-none group",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiPjxyZWN0IHdpZHRoPSI4IiBoZWlnaHQ9IjgiIGZpbGw9IiMzMzMiLz48cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjNDQ0Ii8+PHJlY3QgeD0iNCIgeT0iNCIgd2lkdGg9IjQiIGhlaWdodD0iNCIgZmlsbD0iIzQ0NCIvPjwvc3ZnPg==')] overflow-hidden border border-[#444746] group-hover:border-[#a8c7fa] shadow-sm",children:E.jsx("div",{className:"w-full h-full shadow-inner",style:{backgroundColor:n}})}),E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsx("span",{className:"text-xs font-bold text-[#c4c7c5] uppercase tracking-wide",children:"Color"}),E.jsx("span",{className:"text-sm font-mono text-[#e3e3e3] uppercase",children:n})]})]}),e&&E.jsxs("div",{ref:u,style:a,className:"w-64 bg-[#1e1e21] border border-[#444746] rounded-[24px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.8)] p-5 animate-in fade-in zoom-in-95 duration-200 backdrop-blur-3xl ring-1 ring-white/10",children:[E.jsx("div",{ref:h,className:"w-full h-40 rounded-xl mb-5 relative cursor-crosshair overflow-hidden touch-none shadow-inner border border-white/5",style:{backgroundColor:`hsl(${i.h*360}, 100%, 50%)`,backgroundImage:"linear-gradient(to right, #FFF, rgba(255,255,255,0)), linear-gradient(to top, #000, rgba(0,0,0,0))"},onMouseDown:f,children:E.jsx("div",{className:"absolute w-5 h-5 rounded-full border-2 border-white ring-1 ring-black/50 shadow-md -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${i.s*100}%`,top:`${(1-i.v)*100}%`}})}),E.jsx("div",{ref:d,className:"w-full h-4 rounded-full mb-5 relative cursor-pointer touch-none shadow-inner border border-white/5",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},onMouseDown:g,children:E.jsx("div",{className:"absolute top-0 w-4 h-4 rounded-full border-2 border-white ring-1 ring-black/50 shadow-sm bg-transparent -translate-x-1/2 pointer-events-none",style:{left:`${i.h*100}%`}})}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-3 items-center",children:[E.jsx("div",{className:"grid grid-cols-3 gap-2",children:["r","g","b"].map(p=>E.jsxs("div",{children:[E.jsx("label",{className:"text-[9px] text-[#c4c7c5] uppercase font-bold block mb-1 text-center",children:p}),E.jsx("input",{className:"w-full bg-[#333537] border-b border-[#8e918f] rounded-t-sm px-1 py-1 text-xs text-center text-[#e3e3e3] focus:border-[#a8c7fa] focus:bg-[#444746] focus:outline-none transition-colors",value:v[p],onChange:w=>{const m=Math.min(255,Math.max(0,parseInt(w.target.value)||0)),y={...v,[p]:m},b=tm(y.r,y.g,y.b);t(b)}})]},p))}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("label",{className:"text-[9px] text-[#c4c7c5] uppercase font-bold mb-1",children:"View"}),E.jsx("div",{className:"w-9 h-9 rounded-full border border-[#444746] shadow-lg",style:{backgroundColor:n}})]})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{className:"w-full bg-[#333537] border-b border-[#8e918f] rounded-t px-2 py-2 text-xs font-mono text-[#e3e3e3] focus:border-[#a8c7fa] focus:bg-[#444746] focus:outline-none transition-colors uppercase pl-8",value:n.replace("#",""),onChange:p=>{let w=p.target.value;w.startsWith("#")||(w="#"+w),t(w)}}),E.jsx("span",{className:"absolute left-3 top-[8px] text-[#c4c7c5] text-xs font-mono",children:"#"})]})]})]})]})};function af(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zx={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,t){(function(e){n.exports=e()})(function(){return function e(s,i,r){function a(u,h){if(!i[u]){if(!s[u]){var d=typeof af=="function"&&af;if(!h&&d)return d(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var g=i[u]={exports:{}};s[u][0].call(g.exports,function(v){var p=s[u][1][v];return a(p||v)},g,g.exports,e,s,i,r)}return i[u].exports}for(var o=typeof af=="function"&&af,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(e,s,i){var r=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var u,h,d,f,g,v,p,w=[],m=0,y=c.length,b=y,_=r.getTypeOf(c)!=="string";m<c.length;)b=y-m,d=_?(u=c[m++],h=m<y?c[m++]:0,m<y?c[m++]:0):(u=c.charCodeAt(m++),h=m<y?c.charCodeAt(m++):0,m<y?c.charCodeAt(m++):0),f=u>>2,g=(3&u)<<4|h>>4,v=1<b?(15&h)<<2|d>>6:64,p=2<b?63&d:64,w.push(o.charAt(f)+o.charAt(g)+o.charAt(v)+o.charAt(p));return w.join("")},i.decode=function(c){var u,h,d,f,g,v,p=0,w=0,m="data:";if(c.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var y,b=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&b--,c.charAt(c.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|b):new Array(0|b);p<c.length;)u=o.indexOf(c.charAt(p++))<<2|(f=o.indexOf(c.charAt(p++)))>>4,h=(15&f)<<4|(g=o.indexOf(c.charAt(p++)))>>2,d=(3&g)<<6|(v=o.indexOf(c.charAt(p++))),y[w++]=u,g!==64&&(y[w++]=h),v!==64&&(y[w++]=d);return y}},{"./support":30,"./utils":32}],2:[function(e,s,i){var r=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function u(h,d,f,g,v){this.compressedSize=h,this.uncompressedSize=d,this.crc32=f,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var h=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),d=this;return h.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,d,f){return h.pipe(new o).pipe(new c("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",d)},s.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,i){var r=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,i){var r=e("./utils"),a=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();s.exports=function(o,c){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?function(u,h,d,f){var g=a,v=f+d;u^=-1;for(var p=f;p<v;p++)u=u>>>8^g[255&(u^h[p])];return-1^u}(0|c,o,o.length,0):function(u,h,d,f){var g=a,v=f+d;u^=-1;for(var p=f;p<v;p++)u=u>>>8^g[255&(u^h.charCodeAt(p))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(e,s,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,s,i){var r=null;r=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:r}},{lie:37}],7:[function(e,s,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),c=e("./stream/GenericWorker"),u=r?"uint8array":"array";function h(d,f){c.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}i.magic="\b\0",o.inherits(h,c),h.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,d.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},i.compressWorker=function(d){return new h("Deflate",d)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,i){function r(g,v){var p,w="";for(p=0;p<v;p++)w+=String.fromCharCode(255&g),g>>>=8;return w}function a(g,v,p,w,m,y){var b,_,S=g.file,R=g.compression,P=y!==u.utf8encode,I=o.transformTo("string",y(S.name)),M=o.transformTo("string",u.utf8encode(S.name)),D=S.comment,$=o.transformTo("string",y(D)),N=o.transformTo("string",u.utf8encode(D)),B=M.length!==S.name.length,k=N.length!==D.length,G="",Y="",H="",X=S.dir,U=S.date,K={crc32:0,compressedSize:0,uncompressedSize:0};v&&!p||(K.crc32=g.crc32,K.compressedSize=g.compressedSize,K.uncompressedSize=g.uncompressedSize);var O=0;v&&(O|=8),P||!B&&!k||(O|=2048);var j=0,it=0;X&&(j|=16),m==="UNIX"?(it=798,j|=function(J,vt){var yt=J;return J||(yt=vt?16893:33204),(65535&yt)<<16}(S.unixPermissions,X)):(it=20,j|=function(J){return 63&(J||0)}(S.dosPermissions)),b=U.getUTCHours(),b<<=6,b|=U.getUTCMinutes(),b<<=5,b|=U.getUTCSeconds()/2,_=U.getUTCFullYear()-1980,_<<=4,_|=U.getUTCMonth()+1,_<<=5,_|=U.getUTCDate(),B&&(Y=r(1,1)+r(h(I),4)+M,G+="up"+r(Y.length,2)+Y),k&&(H=r(1,1)+r(h($),4)+N,G+="uc"+r(H.length,2)+H);var nt="";return nt+=`
\0`,nt+=r(O,2),nt+=R.magic,nt+=r(b,2),nt+=r(_,2),nt+=r(K.crc32,4),nt+=r(K.compressedSize,4),nt+=r(K.uncompressedSize,4),nt+=r(I.length,2),nt+=r(G.length,2),{fileRecord:d.LOCAL_FILE_HEADER+nt+I+G,dirRecord:d.CENTRAL_FILE_HEADER+r(it,2)+nt+r($.length,2)+"\0\0\0\0"+r(j,4)+r(w,4)+I+G+$}}var o=e("../utils"),c=e("../stream/GenericWorker"),u=e("../utf8"),h=e("../crc32"),d=e("../signature");function f(g,v,p,w){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=p,this.encodeFileName=w,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,c),f.prototype.push=function(g){var v=g.meta.percent||0,p=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:p?(v+100*(p-w-1))/p:100}}))},f.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var p=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,p=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),v)this.push({data:function(w){return d.DATA_DESCRIPTOR+r(w.crc32,4)+r(w.compressedSize,4)+r(w.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var p=this.bytesWritten-g,w=function(m,y,b,_,S){var R=o.transformTo("string",S(_));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(m,2)+r(m,2)+r(y,4)+r(b,4)+r(R.length,2)+R}(this.dirRecords.length,p,g,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(p){v.processChunk(p)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(p){v.error(p)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(g){var v=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var p=0;p<v.length;p++)try{v[p].error(g)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},s.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,i){var r=e("../compressions"),a=e("./ZipFileWorker");i.generateWorker=function(o,c,u){var h=new a(c.streamFiles,u,c.platform,c.encodeFileName),d=0;try{o.forEach(function(f,g){d++;var v=function(y,b){var _=y||b,S=r[_];if(!S)throw new Error(_+" is not a valid compression method !");return S}(g.options.compression,c.compression),p=g.options.compressionOptions||c.compressionOptions||{},w=g.dir,m=g.date;g._compressWorker(v,p).withStreamInfo("file",{name:f,dir:w,date:m,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=d}catch(f){h.error(f)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(a,o){return new r().loadAsync(a,o)},r.external=e("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,i){var r=e("./utils"),a=e("./external"),o=e("./utf8"),c=e("./zipEntries"),u=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function d(f){return new a.Promise(function(g,v){var p=f.decompressed.getContentWorker().pipe(new u);p.on("error",function(w){v(w)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}s.exports=function(f,g){var v=this;return g=r.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",f,!0,g.optimizedBinaryString,g.base64).then(function(p){var w=new c(g);return w.load(p),w}).then(function(p){var w=[a.Promise.resolve(p)],m=p.files;if(g.checkCRC32)for(var y=0;y<m.length;y++)w.push(d(m[y]));return a.Promise.all(w)}).then(function(p){for(var w=p.shift(),m=w.files,y=0;y<m.length;y++){var b=m[y],_=b.fileNameStr,S=r.resolve(b.fileNameStr);v.file(S,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:g.createFolders}),b.dir||(v.file(S).unsafeOriginalName=_)}return w.zipComment.length&&(v.comment=w.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,i){var r=e("../utils"),a=e("../stream/GenericWorker");function o(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}r.inherits(o,a),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,i){var r=e("readable-stream").Readable;function a(o,c,u){r.call(this,c),this._helper=o;var h=this;o.on("data",function(d,f){h.push(d)||h._helper.pause(),u&&u(f)}).on("error",function(d){h.emit("error",d)}).on("end",function(){h.push(null)})}e("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,s,i){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,a)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var a=new Buffer(r);return a.fill(0),a},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,s,i){function r(S,R,P){var I,M=o.getTypeOf(R),D=o.extend(P||{},h);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(S=m(S)),D.createFolders&&(I=w(S))&&y.call(this,I,!0);var $=M==="string"&&D.binary===!1&&D.base64===!1;P&&P.binary!==void 0||(D.binary=!$),(R instanceof d&&R.uncompressedSize===0||D.dir||!R||R.length===0)&&(D.base64=!1,D.binary=!0,R="",D.compression="STORE",M="string");var N=null;N=R instanceof d||R instanceof c?R:v.isNode&&v.isStream(R)?new p(S,R):o.prepareContent(S,R,D.binary,D.optimizedBinaryString,D.base64);var B=new f(S,N,D);this.files[S]=B}var a=e("./utf8"),o=e("./utils"),c=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),h=e("./defaults"),d=e("./compressedObject"),f=e("./zipObject"),g=e("./generate"),v=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),w=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var R=S.lastIndexOf("/");return 0<R?S.substring(0,R):""},m=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},y=function(S,R){return R=R!==void 0?R:h.createFolders,S=m(S),this.files[S]||r.call(this,S,null,{dir:!0,createFolders:R}),this.files[S]};function b(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var R,P,I;for(R in this.files)I=this.files[R],(P=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&S(P,I)},filter:function(S){var R=[];return this.forEach(function(P,I){S(P,I)&&R.push(I)}),R},file:function(S,R,P){if(arguments.length!==1)return S=this.root+S,r.call(this,S,R,P),this;if(b(S)){var I=S;return this.filter(function(D,$){return!$.dir&&I.test(D)})}var M=this.files[this.root+S];return M&&!M.dir?M:null},folder:function(S){if(!S)return this;if(b(S))return this.filter(function(M,D){return D.dir&&S.test(M)});var R=this.root+S,P=y.call(this,R),I=this.clone();return I.root=P.name,I},remove:function(S){S=this.root+S;var R=this.files[S];if(R||(S.slice(-1)!=="/"&&(S+="/"),R=this.files[S]),R&&!R.dir)delete this.files[S];else for(var P=this.filter(function(M,D){return D.name.slice(0,S.length)===S}),I=0;I<P.length;I++)delete this.files[P[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var R,P={};try{if((P=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");o.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var I=P.comment||this.comment||"";R=g.generateWorker(this,P,I)}catch(M){(R=new c("error")).error(M)}return new u(R,P.type||"string",P.mimeType)},generateAsync:function(S,R){return this.generateInternalStream(S).accumulate(R)},generateNodeStream:function(S,R){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(R)}};s.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,i){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,i){var r=e("./DataReader");function a(o){r.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}e("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===u&&this.data[f+2]===h&&this.data[f+3]===d)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.readData(4);return c===f[0]&&u===f[1]&&h===f[2]&&d===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,s,i){var r=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(e,s,i){var r=e("./Uint8ArrayReader");function a(o){r.call(this,o)}e("../utils").inherits(a,r),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,i){var r=e("./DataReader");function a(o){r.call(this,o)}e("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,s,i){var r=e("./ArrayReader");function a(o){r.call(this,o)}e("../utils").inherits(a,r),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,i){var r=e("../utils"),a=e("../support"),o=e("./ArrayReader"),c=e("./StringReader"),u=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");s.exports=function(d){var f=r.getTypeOf(d);return r.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new u(d):a.uint8array?new h(r.transformTo("uint8array",d)):new o(r.transformTo("array",d)):new c(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,i){var r=e("./GenericWorker"),a=e("../utils");function o(c){r.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,r),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,i){var r=e("./GenericWorker"),a=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,i){var r=e("../utils"),a=e("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}r.inherits(o,a),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,i){var r=e("../utils"),a=e("./GenericWorker");function o(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=r.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}r.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,i){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=r},{}],29:[function(e,s,i){var r=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),c=e("../base64"),u=e("../support"),h=e("../external"),d=null;if(u.nodestream)try{d=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,p){return new h.Promise(function(w,m){var y=[],b=v._internalType,_=v._outputType,S=v._mimeType;v.on("data",function(R,P){y.push(R),p&&p(P)}).on("error",function(R){y=[],m(R)}).on("end",function(){try{var R=function(P,I,M){switch(P){case"blob":return r.newBlob(r.transformTo("arraybuffer",I),M);case"base64":return c.encode(I);default:return r.transformTo(P,I)}}(_,function(P,I){var M,D=0,$=null,N=0;for(M=0;M<I.length;M++)N+=I[M].length;switch(P){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for($=new Uint8Array(N),M=0;M<I.length;M++)$.set(I[M],D),D+=I[M].length;return $;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+P+"'")}}(b,y),S);w(R)}catch(P){m(P)}y=[]}).resume()})}function g(v,p,w){var m=p;switch(p){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=p,this._mimeType=w,r.checkSupport(m),this._worker=v.pipe(new a(m)),v.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}g.prototype={accumulate:function(v){return f(this,v)},on:function(v,p){var w=this;return v==="data"?this._worker.on(v,function(m){p.call(w,m.data,m.meta)}):this._worker.on(v,function(){r.delay(p,arguments,w)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},v)}},s.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,i){for(var r=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),c=e("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function d(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}i.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var p,w,m,y,b,_=v.length,S=0;for(y=0;y<_;y++)(64512&(w=v.charCodeAt(y)))==55296&&y+1<_&&(64512&(m=v.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(m-56320),y++),S+=w<128?1:w<2048?2:w<65536?3:4;for(p=a.uint8array?new Uint8Array(S):new Array(S),y=b=0;b<S;y++)(64512&(w=v.charCodeAt(y)))==55296&&y+1<_&&(64512&(m=v.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(m-56320),y++),w<128?p[b++]=w:(w<2048?p[b++]=192|w>>>6:(w<65536?p[b++]=224|w>>>12:(p[b++]=240|w>>>18,p[b++]=128|w>>>12&63),p[b++]=128|w>>>6&63),p[b++]=128|63&w);return p}(g)},i.utf8decode=function(g){return a.nodebuffer?r.transformTo("nodebuffer",g).toString("utf-8"):function(v){var p,w,m,y,b=v.length,_=new Array(2*b);for(p=w=0;p<b;)if((m=v[p++])<128)_[w++]=m;else if(4<(y=u[m]))_[w++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<b;)m=m<<6|63&v[p++],y--;1<y?_[w++]=65533:m<65536?_[w++]=m:(m-=65536,_[w++]=55296|m>>10&1023,_[w++]=56320|1023&m)}return _.length!==w&&(_.subarray?_=_.subarray(0,w):_.length=w),r.applyFromCharCode(_)}(g=r.transformTo(a.uint8array?"uint8array":"array",g))},r.inherits(d,c),d.prototype.processChunk=function(g){var v=r.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=v;(v=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),v.set(p,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var w=function(y,b){var _;for((b=b||y.length)>y.length&&(b=y.length),_=b-1;0<=_&&(192&y[_])==128;)_--;return _<0||_===0?b:_+u[y[_]]>b?_:b}(v),m=v;w!==v.length&&(a.uint8array?(m=v.subarray(0,w),this.leftOver=v.subarray(w,v.length)):(m=v.slice(0,w),this.leftOver=v.slice(w,v.length))),this.push({data:i.utf8decode(m),meta:g.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,r.inherits(f,c),f.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,i){var r=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),c=e("./external");function u(p){return p}function h(p,w){for(var m=0;m<p.length;++m)w[m]=255&p.charCodeAt(m);return w}e("setimmediate"),i.newBlob=function(p,w){i.checkSupport("blob");try{return new Blob([p],{type:w})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(p),m.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(p,w,m){var y=[],b=0,_=p.length;if(_<=m)return String.fromCharCode.apply(null,p);for(;b<_;)w==="array"||w==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(b,Math.min(b+m,_)))):y.push(String.fromCharCode.apply(null,p.subarray(b,Math.min(b+m,_)))),b+=m;return y.join("")},stringifyByChar:function(p){for(var w="",m=0;m<p.length;m++)w+=String.fromCharCode(p[m]);return w},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var w=65536,m=i.getTypeOf(p),y=!0;if(m==="uint8array"?y=d.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=d.applyCanBeUsed.nodebuffer),y)for(;1<w;)try{return d.stringifyByChunk(p,m,w)}catch{w=Math.floor(w/2)}return d.stringifyByChar(p)}function g(p,w){for(var m=0;m<p.length;m++)w[m]=p[m];return w}i.applyFromCharCode=f;var v={};v.string={string:u,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return v.string.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:function(p){return h(p,o.allocBuffer(p.length))}},v.array={string:f,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},v.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return g(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},v.uint8array={string:f,array:function(p){return g(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return o.newBufferFrom(p)}},v.nodebuffer={string:f,array:function(p){return g(p,new Array(p.length))},arraybuffer:function(p){return v.nodebuffer.uint8array(p).buffer},uint8array:function(p){return g(p,new Uint8Array(p.length))},nodebuffer:u},i.transformTo=function(p,w){if(w=w||"",!p)return w;i.checkSupport(p);var m=i.getTypeOf(w);return v[m][p](w)},i.resolve=function(p){for(var w=p.split("/"),m=[],y=0;y<w.length;y++){var b=w[y];b==="."||b===""&&y!==0&&y!==w.length-1||(b===".."?m.pop():m.push(b))}return m.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var w,m,y="";for(m=0;m<(p||"").length;m++)y+="\\x"+((w=p.charCodeAt(m))<16?"0":"")+w.toString(16).toUpperCase();return y},i.delay=function(p,w,m){setImmediate(function(){p.apply(m||null,w||[])})},i.inherits=function(p,w){function m(){}m.prototype=w.prototype,p.prototype=new m},i.extend=function(){var p,w,m={};for(p=0;p<arguments.length;p++)for(w in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],w)&&m[w]===void 0&&(m[w]=arguments[p][w]);return m},i.prepareContent=function(p,w,m,y,b){return c.Promise.resolve(w).then(function(_){return r.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new c.Promise(function(S,R){var P=new FileReader;P.onload=function(I){S(I.target.result)},P.onerror=function(I){R(I.target.error)},P.readAsArrayBuffer(_)}):_}).then(function(_){var S=i.getTypeOf(_);return S?(S==="arraybuffer"?_=i.transformTo("uint8array",_):S==="string"&&(b?_=a.decode(_):m&&y!==!0&&(_=function(R){return h(R,r.uint8array?new Uint8Array(R.length):new Array(R.length))}(_))),_):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,i){var r=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),c=e("./zipEntry"),u=e("./support");function h(d){this.files=[],this.loadOptions=d}h.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(d)+")")}},isSignature:function(d,f){var g=this.reader.index;this.reader.setIndex(d);var v=this.reader.readString(4)===f;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",g=a.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,g,v=this.zip64EndOfCentralSize-44;0<v;)d=this.reader.readInt(2),f=this.reader.readInt(4),g=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=f-g;if(0<v)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(d){this.reader=r(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,i){var r=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),c=e("./crc32"),u=e("./utf8"),h=e("./compressions"),d=e("./support");function f(g,v){this.options=g,this.loadOptions=v}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,p;if(g.skip(22),this.fileNameLength=g.readInt(2),p=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(w){for(var m in h)if(Object.prototype.hasOwnProperty.call(h,m)&&h[m].magic===w)return h[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,p,w,m=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<m;)v=g.readInt(2),p=g.readInt(2),w=g.readData(p),this.extraFields[v]={id:v,length:p,value:w};g.setIndex(m)},handleUTF8:function(){var g=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var p=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var m=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=r(g.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=r(g.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},s.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,i){function r(v,p,w){this.name=v,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=p,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),c=e("./utf8"),u=e("./compressedObject"),h=e("./stream/GenericWorker");r.prototype={internalStream:function(v){var p=null,w="string";try{if(!v)throw new Error("No output type specified.");var m=(w=v.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!m&&(p=p.pipe(new c.Utf8EncodeWorker)),!y&&m&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(b){(p=new h("error")).error(b)}return new a(p,w,"")},async:function(v,p){return this.internalStream(v).accumulate(p)},nodeStream:function(v,p){return this.internalStream(v||"nodebuffer").toNodejsStream(p)},_compressWorker:function(v,p){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(w,v,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<d.length;g++)r.prototype[d[g]]=f;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,i){(function(r){var a,o,c=r.MutationObserver||r.WebKitMutationObserver;if(c){var u=0,h=new c(v),d=r.document.createTextNode("");h.observe(d,{characterData:!0}),a=function(){d.data=u=++u%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){v(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(v,0)};else{var f=new r.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}var g=[];function v(){var p,w;o=!0;for(var m=g.length;m;){for(w=g,g=[],p=-1;++p<m;)w[p]();m=g.length}o=!1}s.exports=function(p){g.push(p)!==1||o||a()}}).call(this,typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,i){var r=e("immediate");function a(){}var o={},c=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function d(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,m!==a&&p(this,m)}function f(m,y,b){this.promise=m,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function g(m,y,b){r(function(){var _;try{_=y(b)}catch(S){return o.reject(m,S)}_===m?o.reject(m,new TypeError("Cannot resolve promise with itself")):o.resolve(m,_)})}function v(m){var y=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof y=="function")return function(){y.apply(m,arguments)}}function p(m,y){var b=!1;function _(P){b||(b=!0,o.reject(m,P))}function S(P){b||(b=!0,o.resolve(m,P))}var R=w(function(){y(S,_)});R.status==="error"&&_(R.value)}function w(m,y){var b={};try{b.value=m(y),b.status="success"}catch(_){b.status="error",b.value=_}return b}(s.exports=d).prototype.finally=function(m){if(typeof m!="function")return this;var y=this.constructor;return this.then(function(b){return y.resolve(m()).then(function(){return b})},function(b){return y.resolve(m()).then(function(){throw b})})},d.prototype.catch=function(m){return this.then(null,m)},d.prototype.then=function(m,y){if(typeof m!="function"&&this.state===u||typeof y!="function"&&this.state===c)return this;var b=new this.constructor(a);return this.state!==h?g(b,this.state===u?m:y,this.outcome):this.queue.push(new f(b,m,y)),b},f.prototype.callFulfilled=function(m){o.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){g(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){o.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){g(this.promise,this.onRejected,m)},o.resolve=function(m,y){var b=w(v,y);if(b.status==="error")return o.reject(m,b.value);var _=b.value;if(_)p(m,_);else{m.state=u,m.outcome=y;for(var S=-1,R=m.queue.length;++S<R;)m.queue[S].callFulfilled(y)}return m},o.reject=function(m,y){m.state=c,m.outcome=y;for(var b=-1,_=m.queue.length;++b<_;)m.queue[b].callRejected(y);return m},d.resolve=function(m){return m instanceof this?m:o.resolve(new this(a),m)},d.reject=function(m){var y=new this(a);return o.reject(y,m)},d.all=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=m.length,_=!1;if(!b)return this.resolve([]);for(var S=new Array(b),R=0,P=-1,I=new this(a);++P<b;)M(m[P],P);return I;function M(D,$){y.resolve(D).then(function(N){S[$]=N,++R!==b||_||(_=!0,o.resolve(I,S))},function(N){_||(_=!0,o.reject(I,N))})}},d.race=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=m.length,_=!1;if(!b)return this.resolve([]);for(var S=-1,R=new this(a);++S<b;)P=m[S],y.resolve(P).then(function(I){_||(_=!0,o.resolve(R,I))},function(I){_||(_=!0,o.reject(R,I))});var P;return R}},{immediate:36}],38:[function(e,s,i){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,i){var r=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/messages"),u=e("./zlib/zstream"),h=Object.prototype.toString,d=0,f=-1,g=0,v=8;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({level:f,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},m||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(b!==d)throw new Error(c[b]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var _;if(_=typeof y.dictionary=="string"?o.string2buf(y.dictionary):h.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(b=r.deflateSetDictionary(this.strm,_))!==d)throw new Error(c[b]);this._dict_set=!0}}function w(m,y){var b=new p(y);if(b.push(m,!0),b.err)throw b.msg||c[b.err];return b.result}p.prototype.push=function(m,y){var b,_,S=this.strm,R=this.options.chunkSize;if(this.ended)return!1;_=y===~~y?y:y===!0?4:0,typeof m=="string"?S.input=o.string2buf(m):h.call(m)==="[object ArrayBuffer]"?S.input=new Uint8Array(m):S.input=m,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new a.Buf8(R),S.next_out=0,S.avail_out=R),(b=r.deflate(S,_))!==1&&b!==d)return this.onEnd(b),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(S.output,S.next_out))):this.onData(a.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&b!==1);return _===4?(b=r.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===d):_!==2||(this.onEnd(d),!(S.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=p,i.deflate=w,i.deflateRaw=function(m,y){return(y=y||{}).raw=!0,w(m,y)},i.gzip=function(m,y){return(y=y||{}).gzip=!0,w(m,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,i){var r=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/constants"),u=e("./zlib/messages"),h=e("./zlib/zstream"),d=e("./zlib/gzheader"),f=Object.prototype.toString;function g(p){if(!(this instanceof g))return new g(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||p&&p.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,w.windowBits);if(m!==c.Z_OK)throw new Error(u[m]);this.header=new d,r.inflateGetHeader(this.strm,this.header)}function v(p,w){var m=new g(w);if(m.push(p,!0),m.err)throw m.msg||u[m.err];return m.result}g.prototype.push=function(p,w){var m,y,b,_,S,R,P=this.strm,I=this.options.chunkSize,M=this.options.dictionary,D=!1;if(this.ended)return!1;y=w===~~w?w:w===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?P.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?P.input=new Uint8Array(p):P.input=p,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(I),P.next_out=0,P.avail_out=I),(m=r.inflate(P,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&M&&(R=typeof M=="string"?o.string2buf(M):f.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,m=r.inflateSetDictionary(this.strm,R)),m===c.Z_BUF_ERROR&&D===!0&&(m=c.Z_OK,D=!1),m!==c.Z_STREAM_END&&m!==c.Z_OK)return this.onEnd(m),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&m!==c.Z_STREAM_END&&(P.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(P.output,P.next_out),_=P.next_out-b,S=o.buf2string(P.output,b),P.next_out=_,P.avail_out=I-_,_&&a.arraySet(P.output,P.output,b,_,0),this.onData(S)):this.onData(a.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(D=!0)}while((0<P.avail_in||P.avail_out===0)&&m!==c.Z_STREAM_END);return m===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(m=r.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(P.avail_out=0))},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=g,i.inflate=v,i.inflateRaw=function(p,w){return(w=w||{}).raw=!0,v(p,w)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d])}}return c},i.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,h,d,f){if(u.subarray&&c.subarray)c.set(u.subarray(h,h+d),f);else for(var g=0;g<d;g++)c[f+g]=u[h+g]},flattenChunks:function(c){var u,h,d,f,g,v;for(u=d=0,h=c.length;u<h;u++)d+=c[u].length;for(v=new Uint8Array(d),u=f=0,h=c.length;u<h;u++)g=c[u],v.set(g,f),f+=g.length;return v}},o={arraySet:function(c,u,h,d,f){for(var g=0;g<d;g++)c[f+g]=u[h+g]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(r)},{}],42:[function(e,s,i){var r=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new r.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(d,f){if(f<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(d,f));for(var g="",v=0;v<f;v++)g+=String.fromCharCode(d[v]);return g}c[254]=c[254]=1,i.string2buf=function(d){var f,g,v,p,w,m=d.length,y=0;for(p=0;p<m;p++)(64512&(g=d.charCodeAt(p)))==55296&&p+1<m&&(64512&(v=d.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),p++),y+=g<128?1:g<2048?2:g<65536?3:4;for(f=new r.Buf8(y),p=w=0;w<y;p++)(64512&(g=d.charCodeAt(p)))==55296&&p+1<m&&(64512&(v=d.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),p++),g<128?f[w++]=g:(g<2048?f[w++]=192|g>>>6:(g<65536?f[w++]=224|g>>>12:(f[w++]=240|g>>>18,f[w++]=128|g>>>12&63),f[w++]=128|g>>>6&63),f[w++]=128|63&g);return f},i.buf2binstring=function(d){return h(d,d.length)},i.binstring2buf=function(d){for(var f=new r.Buf8(d.length),g=0,v=f.length;g<v;g++)f[g]=d.charCodeAt(g);return f},i.buf2string=function(d,f){var g,v,p,w,m=f||d.length,y=new Array(2*m);for(g=v=0;g<m;)if((p=d[g++])<128)y[v++]=p;else if(4<(w=c[p]))y[v++]=65533,g+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&g<m;)p=p<<6|63&d[g++],w--;1<w?y[v++]=65533:p<65536?y[v++]=p:(p-=65536,y[v++]=55296|p>>10&1023,y[v++]=56320|1023&p)}return h(y,v)},i.utf8border=function(d,f){var g;for((f=f||d.length)>d.length&&(f=d.length),g=f-1;0<=g&&(192&d[g])==128;)g--;return g<0||g===0?f:g+c[d[g]]>f?g:f}},{"./common":41}],43:[function(e,s,i){s.exports=function(r,a,o,c){for(var u=65535&r|0,h=r>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;h=h+(u=u+a[c++]|0)|0,--d;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(e,s,i){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,i){var r=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();s.exports=function(a,o,c,u){var h=r,d=u+c;a^=-1;for(var f=u;f<d;f++)a=a>>>8^h[255&(a^o[f])];return-1^a}},{}],46:[function(e,s,i){var r,a=e("../utils/common"),o=e("./trees"),c=e("./adler32"),u=e("./crc32"),h=e("./messages"),d=0,f=4,g=0,v=-2,p=-1,w=4,m=2,y=8,b=9,_=286,S=30,R=19,P=2*_+1,I=15,M=3,D=258,$=D+M+1,N=42,B=113,k=1,G=2,Y=3,H=4;function X(A,q){return A.msg=h[q],q}function U(A){return(A<<1)-(4<A?9:0)}function K(A){for(var q=A.length;0<=--q;)A[q]=0}function O(A){var q=A.state,V=q.pending;V>A.avail_out&&(V=A.avail_out),V!==0&&(a.arraySet(A.output,q.pending_buf,q.pending_out,V,A.next_out),A.next_out+=V,q.pending_out+=V,A.total_out+=V,A.avail_out-=V,q.pending-=V,q.pending===0&&(q.pending_out=0))}function j(A,q){o._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,q),A.block_start=A.strstart,O(A.strm)}function it(A,q){A.pending_buf[A.pending++]=q}function nt(A,q){A.pending_buf[A.pending++]=q>>>8&255,A.pending_buf[A.pending++]=255&q}function J(A,q){var V,F,L=A.max_chain_length,z=A.strstart,Z=A.prev_length,Q=A.nice_match,W=A.strstart>A.w_size-$?A.strstart-(A.w_size-$):0,et=A.window,ot=A.w_mask,st=A.prev,pt=A.strstart+D,$t=et[z+Z-1],Nt=et[z+Z];A.prev_length>=A.good_match&&(L>>=2),Q>A.lookahead&&(Q=A.lookahead);do if(et[(V=q)+Z]===Nt&&et[V+Z-1]===$t&&et[V]===et[z]&&et[++V]===et[z+1]){z+=2,V++;do;while(et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&et[++z]===et[++V]&&z<pt);if(F=D-(pt-z),z=pt-D,Z<F){if(A.match_start=q,Q<=(Z=F))break;$t=et[z+Z-1],Nt=et[z+Z]}}while((q=st[q&ot])>W&&--L!=0);return Z<=A.lookahead?Z:A.lookahead}function vt(A){var q,V,F,L,z,Z,Q,W,et,ot,st=A.w_size;do{if(L=A.window_size-A.lookahead-A.strstart,A.strstart>=st+(st-$)){for(a.arraySet(A.window,A.window,st,st,0),A.match_start-=st,A.strstart-=st,A.block_start-=st,q=V=A.hash_size;F=A.head[--q],A.head[q]=st<=F?F-st:0,--V;);for(q=V=st;F=A.prev[--q],A.prev[q]=st<=F?F-st:0,--V;);L+=st}if(A.strm.avail_in===0)break;if(Z=A.strm,Q=A.window,W=A.strstart+A.lookahead,et=L,ot=void 0,ot=Z.avail_in,et<ot&&(ot=et),V=ot===0?0:(Z.avail_in-=ot,a.arraySet(Q,Z.input,Z.next_in,ot,W),Z.state.wrap===1?Z.adler=c(Z.adler,Q,ot,W):Z.state.wrap===2&&(Z.adler=u(Z.adler,Q,ot,W)),Z.next_in+=ot,Z.total_in+=ot,ot),A.lookahead+=V,A.lookahead+A.insert>=M)for(z=A.strstart-A.insert,A.ins_h=A.window[z],A.ins_h=(A.ins_h<<A.hash_shift^A.window[z+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[z+M-1])&A.hash_mask,A.prev[z&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=z,z++,A.insert--,!(A.lookahead+A.insert<M)););}while(A.lookahead<$&&A.strm.avail_in!==0)}function yt(A,q){for(var V,F;;){if(A.lookahead<$){if(vt(A),A.lookahead<$&&q===d)return k;if(A.lookahead===0)break}if(V=0,A.lookahead>=M&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+M-1])&A.hash_mask,V=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),V!==0&&A.strstart-V<=A.w_size-$&&(A.match_length=J(A,V)),A.match_length>=M)if(F=o._tr_tally(A,A.strstart-A.match_start,A.match_length-M),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=M){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+M-1])&A.hash_mask,V=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else F=o._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(F&&(j(A,!1),A.strm.avail_out===0))return k}return A.insert=A.strstart<M-1?A.strstart:M-1,q===f?(j(A,!0),A.strm.avail_out===0?Y:H):A.last_lit&&(j(A,!1),A.strm.avail_out===0)?k:G}function bt(A,q){for(var V,F,L;;){if(A.lookahead<$){if(vt(A),A.lookahead<$&&q===d)return k;if(A.lookahead===0)break}if(V=0,A.lookahead>=M&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+M-1])&A.hash_mask,V=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=M-1,V!==0&&A.prev_length<A.max_lazy_match&&A.strstart-V<=A.w_size-$&&(A.match_length=J(A,V),A.match_length<=5&&(A.strategy===1||A.match_length===M&&4096<A.strstart-A.match_start)&&(A.match_length=M-1)),A.prev_length>=M&&A.match_length<=A.prev_length){for(L=A.strstart+A.lookahead-M,F=o._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-M),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=L&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+M-1])&A.hash_mask,V=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=M-1,A.strstart++,F&&(j(A,!1),A.strm.avail_out===0))return k}else if(A.match_available){if((F=o._tr_tally(A,0,A.window[A.strstart-1]))&&j(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return k}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(F=o._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<M-1?A.strstart:M-1,q===f?(j(A,!0),A.strm.avail_out===0?Y:H):A.last_lit&&(j(A,!1),A.strm.avail_out===0)?k:G}function It(A,q,V,F,L){this.good_length=A,this.max_lazy=q,this.nice_length=V,this.max_chain=F,this.func=L}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*P),this.dyn_dtree=new a.Buf16(2*(2*S+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(I+1),this.heap=new a.Buf16(2*_+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(A){var q;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=m,(q=A.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?N:B,A.adler=q.wrap===2?0:1,q.last_flush=d,o._tr_init(q),g):X(A,v)}function $s(A){var q=ce(A);return q===g&&function(V){V.window_size=2*V.w_size,K(V.head),V.max_lazy_match=r[V.level].max_lazy,V.good_match=r[V.level].good_length,V.nice_match=r[V.level].nice_length,V.max_chain_length=r[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=M-1,V.match_available=0,V.ins_h=0}(A.state),q}function vs(A,q,V,F,L,z){if(!A)return v;var Z=1;if(q===p&&(q=6),F<0?(Z=0,F=-F):15<F&&(Z=2,F-=16),L<1||b<L||V!==y||F<8||15<F||q<0||9<q||z<0||w<z)return X(A,v);F===8&&(F=9);var Q=new me;return(A.state=Q).strm=A,Q.wrap=Z,Q.gzhead=null,Q.w_bits=F,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=L+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+M-1)/M),Q.window=new a.Buf8(2*Q.w_size),Q.head=new a.Buf16(Q.hash_size),Q.prev=new a.Buf16(Q.w_size),Q.lit_bufsize=1<<L+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new a.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=q,Q.strategy=z,Q.method=V,$s(A)}r=[new It(0,0,0,0,function(A,q){var V=65535;for(V>A.pending_buf_size-5&&(V=A.pending_buf_size-5);;){if(A.lookahead<=1){if(vt(A),A.lookahead===0&&q===d)return k;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var F=A.block_start+V;if((A.strstart===0||A.strstart>=F)&&(A.lookahead=A.strstart-F,A.strstart=F,j(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-$&&(j(A,!1),A.strm.avail_out===0))return k}return A.insert=0,q===f?(j(A,!0),A.strm.avail_out===0?Y:H):(A.strstart>A.block_start&&(j(A,!1),A.strm.avail_out),k)}),new It(4,4,8,4,yt),new It(4,5,16,8,yt),new It(4,6,32,32,yt),new It(4,4,16,16,bt),new It(8,16,32,32,bt),new It(8,16,128,128,bt),new It(8,32,128,256,bt),new It(32,128,258,1024,bt),new It(32,258,258,4096,bt)],i.deflateInit=function(A,q){return vs(A,q,y,15,8,0)},i.deflateInit2=vs,i.deflateReset=$s,i.deflateResetKeep=ce,i.deflateSetHeader=function(A,q){return A&&A.state?A.state.wrap!==2?v:(A.state.gzhead=q,g):v},i.deflate=function(A,q){var V,F,L,z;if(!A||!A.state||5<q||q<0)return A?X(A,v):v;if(F=A.state,!A.output||!A.input&&A.avail_in!==0||F.status===666&&q!==f)return X(A,A.avail_out===0?-5:v);if(F.strm=A,V=F.last_flush,F.last_flush=q,F.status===N)if(F.wrap===2)A.adler=0,it(F,31),it(F,139),it(F,8),F.gzhead?(it(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),it(F,255&F.gzhead.time),it(F,F.gzhead.time>>8&255),it(F,F.gzhead.time>>16&255),it(F,F.gzhead.time>>24&255),it(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),it(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(it(F,255&F.gzhead.extra.length),it(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(A.adler=u(A.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(it(F,0),it(F,0),it(F,0),it(F,0),it(F,0),it(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),it(F,3),F.status=B);else{var Z=y+(F.w_bits-8<<4)<<8;Z|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(Z|=32),Z+=31-Z%31,F.status=B,nt(F,Z),F.strstart!==0&&(nt(F,A.adler>>>16),nt(F,65535&A.adler)),A.adler=1}if(F.status===69)if(F.gzhead.extra){for(L=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),O(A),L=F.pending,F.pending!==F.pending_buf_size));)it(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),O(A),L=F.pending,F.pending===F.pending_buf_size)){z=1;break}z=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,it(F,z)}while(z!==0);F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),z===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),O(A),L=F.pending,F.pending===F.pending_buf_size)){z=1;break}z=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,it(F,z)}while(z!==0);F.gzhead.hcrc&&F.pending>L&&(A.adler=u(A.adler,F.pending_buf,F.pending-L,L)),z===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&O(A),F.pending+2<=F.pending_buf_size&&(it(F,255&A.adler),it(F,A.adler>>8&255),A.adler=0,F.status=B)):F.status=B),F.pending!==0){if(O(A),A.avail_out===0)return F.last_flush=-1,g}else if(A.avail_in===0&&U(q)<=U(V)&&q!==f)return X(A,-5);if(F.status===666&&A.avail_in!==0)return X(A,-5);if(A.avail_in!==0||F.lookahead!==0||q!==d&&F.status!==666){var Q=F.strategy===2?function(W,et){for(var ot;;){if(W.lookahead===0&&(vt(W),W.lookahead===0)){if(et===d)return k;break}if(W.match_length=0,ot=o._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,ot&&(j(W,!1),W.strm.avail_out===0))return k}return W.insert=0,et===f?(j(W,!0),W.strm.avail_out===0?Y:H):W.last_lit&&(j(W,!1),W.strm.avail_out===0)?k:G}(F,q):F.strategy===3?function(W,et){for(var ot,st,pt,$t,Nt=W.window;;){if(W.lookahead<=D){if(vt(W),W.lookahead<=D&&et===d)return k;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=M&&0<W.strstart&&(st=Nt[pt=W.strstart-1])===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]){$t=W.strstart+D;do;while(st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&st===Nt[++pt]&&pt<$t);W.match_length=D-($t-pt),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=M?(ot=o._tr_tally(W,1,W.match_length-M),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(ot=o._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),ot&&(j(W,!1),W.strm.avail_out===0))return k}return W.insert=0,et===f?(j(W,!0),W.strm.avail_out===0?Y:H):W.last_lit&&(j(W,!1),W.strm.avail_out===0)?k:G}(F,q):r[F.level].func(F,q);if(Q!==Y&&Q!==H||(F.status=666),Q===k||Q===Y)return A.avail_out===0&&(F.last_flush=-1),g;if(Q===G&&(q===1?o._tr_align(F):q!==5&&(o._tr_stored_block(F,0,0,!1),q===3&&(K(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),O(A),A.avail_out===0))return F.last_flush=-1,g}return q!==f?g:F.wrap<=0?1:(F.wrap===2?(it(F,255&A.adler),it(F,A.adler>>8&255),it(F,A.adler>>16&255),it(F,A.adler>>24&255),it(F,255&A.total_in),it(F,A.total_in>>8&255),it(F,A.total_in>>16&255),it(F,A.total_in>>24&255)):(nt(F,A.adler>>>16),nt(F,65535&A.adler)),O(A),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?g:1)},i.deflateEnd=function(A){var q;return A&&A.state?(q=A.state.status)!==N&&q!==69&&q!==73&&q!==91&&q!==103&&q!==B&&q!==666?X(A,v):(A.state=null,q===B?X(A,-3):g):v},i.deflateSetDictionary=function(A,q){var V,F,L,z,Z,Q,W,et,ot=q.length;if(!A||!A.state||(z=(V=A.state).wrap)===2||z===1&&V.status!==N||V.lookahead)return v;for(z===1&&(A.adler=c(A.adler,q,ot,0)),V.wrap=0,ot>=V.w_size&&(z===0&&(K(V.head),V.strstart=0,V.block_start=0,V.insert=0),et=new a.Buf8(V.w_size),a.arraySet(et,q,ot-V.w_size,V.w_size,0),q=et,ot=V.w_size),Z=A.avail_in,Q=A.next_in,W=A.input,A.avail_in=ot,A.next_in=0,A.input=q,vt(V);V.lookahead>=M;){for(F=V.strstart,L=V.lookahead-(M-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[F+M-1])&V.hash_mask,V.prev[F&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=F,F++,--L;);V.strstart=F,V.lookahead=M-1,vt(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=M-1,V.match_available=0,A.next_in=Q,A.input=W,A.avail_in=Z,V.wrap=z,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,i){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,i){s.exports=function(r,a){var o,c,u,h,d,f,g,v,p,w,m,y,b,_,S,R,P,I,M,D,$,N,B,k,G;o=r.state,c=r.next_in,k=r.input,u=c+(r.avail_in-5),h=r.next_out,G=r.output,d=h-(a-r.avail_out),f=h+(r.avail_out-257),g=o.dmax,v=o.wsize,p=o.whave,w=o.wnext,m=o.window,y=o.hold,b=o.bits,_=o.lencode,S=o.distcode,R=(1<<o.lenbits)-1,P=(1<<o.distbits)-1;t:do{b<15&&(y+=k[c++]<<b,b+=8,y+=k[c++]<<b,b+=8),I=_[y&R];e:for(;;){if(y>>>=M=I>>>24,b-=M,(M=I>>>16&255)===0)G[h++]=65535&I;else{if(!(16&M)){if(!(64&M)){I=_[(65535&I)+(y&(1<<M)-1)];continue e}if(32&M){o.mode=12;break t}r.msg="invalid literal/length code",o.mode=30;break t}D=65535&I,(M&=15)&&(b<M&&(y+=k[c++]<<b,b+=8),D+=y&(1<<M)-1,y>>>=M,b-=M),b<15&&(y+=k[c++]<<b,b+=8,y+=k[c++]<<b,b+=8),I=S[y&P];n:for(;;){if(y>>>=M=I>>>24,b-=M,!(16&(M=I>>>16&255))){if(!(64&M)){I=S[(65535&I)+(y&(1<<M)-1)];continue n}r.msg="invalid distance code",o.mode=30;break t}if($=65535&I,b<(M&=15)&&(y+=k[c++]<<b,(b+=8)<M&&(y+=k[c++]<<b,b+=8)),g<($+=y&(1<<M)-1)){r.msg="invalid distance too far back",o.mode=30;break t}if(y>>>=M,b-=M,(M=h-d)<$){if(p<(M=$-M)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break t}if(B=m,(N=0)===w){if(N+=v-M,M<D){for(D-=M;G[h++]=m[N++],--M;);N=h-$,B=G}}else if(w<M){if(N+=v+w-M,(M-=w)<D){for(D-=M;G[h++]=m[N++],--M;);if(N=0,w<D){for(D-=M=w;G[h++]=m[N++],--M;);N=h-$,B=G}}}else if(N+=w-M,M<D){for(D-=M;G[h++]=m[N++],--M;);N=h-$,B=G}for(;2<D;)G[h++]=B[N++],G[h++]=B[N++],G[h++]=B[N++],D-=3;D&&(G[h++]=B[N++],1<D&&(G[h++]=B[N++]))}else{for(N=h-$;G[h++]=G[N++],G[h++]=G[N++],G[h++]=G[N++],2<(D-=3););D&&(G[h++]=G[N++],1<D&&(G[h++]=G[N++]))}break}}break}}while(c<u&&h<f);c-=D=b>>3,y&=(1<<(b-=D<<3))-1,r.next_in=c,r.next_out=h,r.avail_in=c<u?u-c+5:5-(c-u),r.avail_out=h<f?f-h+257:257-(h-f),o.hold=y,o.bits=b}},{}],49:[function(e,s,i){var r=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),c=e("./inffast"),u=e("./inftrees"),h=1,d=2,f=0,g=-2,v=1,p=852,w=592;function m(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(N){var B;return N&&N.state?(B=N.state,N.total_in=N.total_out=B.total=0,N.msg="",B.wrap&&(N.adler=1&B.wrap),B.mode=v,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(p),B.distcode=B.distdyn=new r.Buf32(w),B.sane=1,B.back=-1,f):g}function _(N){var B;return N&&N.state?((B=N.state).wsize=0,B.whave=0,B.wnext=0,b(N)):g}function S(N,B){var k,G;return N&&N.state?(G=N.state,B<0?(k=0,B=-B):(k=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?g:(G.window!==null&&G.wbits!==B&&(G.window=null),G.wrap=k,G.wbits=B,_(N))):g}function R(N,B){var k,G;return N?(G=new y,(N.state=G).window=null,(k=S(N,B))!==f&&(N.state=null),k):g}var P,I,M=!0;function D(N){if(M){var B;for(P=new r.Buf32(512),I=new r.Buf32(32),B=0;B<144;)N.lens[B++]=8;for(;B<256;)N.lens[B++]=9;for(;B<280;)N.lens[B++]=7;for(;B<288;)N.lens[B++]=8;for(u(h,N.lens,0,288,P,0,N.work,{bits:9}),B=0;B<32;)N.lens[B++]=5;u(d,N.lens,0,32,I,0,N.work,{bits:5}),M=!1}N.lencode=P,N.lenbits=9,N.distcode=I,N.distbits=5}function $(N,B,k,G){var Y,H=N.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new r.Buf8(H.wsize)),G>=H.wsize?(r.arraySet(H.window,B,k-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(G<(Y=H.wsize-H.wnext)&&(Y=G),r.arraySet(H.window,B,k-G,Y,H.wnext),(G-=Y)?(r.arraySet(H.window,B,k-G,G,0),H.wnext=G,H.whave=H.wsize):(H.wnext+=Y,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=Y))),0}i.inflateReset=_,i.inflateReset2=S,i.inflateResetKeep=b,i.inflateInit=function(N){return R(N,15)},i.inflateInit2=R,i.inflate=function(N,B){var k,G,Y,H,X,U,K,O,j,it,nt,J,vt,yt,bt,It,me,ce,$s,vs,A,q,V,F,L=0,z=new r.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return g;(k=N.state).mode===12&&(k.mode=13),X=N.next_out,Y=N.output,K=N.avail_out,H=N.next_in,G=N.input,U=N.avail_in,O=k.hold,j=k.bits,it=U,nt=K,q=f;t:for(;;)switch(k.mode){case v:if(k.wrap===0){k.mode=13;break}for(;j<16;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(2&k.wrap&&O===35615){z[k.check=0]=255&O,z[1]=O>>>8&255,k.check=o(k.check,z,2,0),j=O=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&O)<<8)+(O>>8))%31){N.msg="incorrect header check",k.mode=30;break}if((15&O)!=8){N.msg="unknown compression method",k.mode=30;break}if(j-=4,A=8+(15&(O>>>=4)),k.wbits===0)k.wbits=A;else if(A>k.wbits){N.msg="invalid window size",k.mode=30;break}k.dmax=1<<A,N.adler=k.check=1,k.mode=512&O?10:12,j=O=0;break;case 2:for(;j<16;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(k.flags=O,(255&k.flags)!=8){N.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){N.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=O>>8&1),512&k.flags&&(z[0]=255&O,z[1]=O>>>8&255,k.check=o(k.check,z,2,0)),j=O=0,k.mode=3;case 3:for(;j<32;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.head&&(k.head.time=O),512&k.flags&&(z[0]=255&O,z[1]=O>>>8&255,z[2]=O>>>16&255,z[3]=O>>>24&255,k.check=o(k.check,z,4,0)),j=O=0,k.mode=4;case 4:for(;j<16;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.head&&(k.head.xflags=255&O,k.head.os=O>>8),512&k.flags&&(z[0]=255&O,z[1]=O>>>8&255,k.check=o(k.check,z,2,0)),j=O=0,k.mode=5;case 5:if(1024&k.flags){for(;j<16;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.length=O,k.head&&(k.head.extra_len=O),512&k.flags&&(z[0]=255&O,z[1]=O>>>8&255,k.check=o(k.check,z,2,0)),j=O=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(U<(J=k.length)&&(J=U),J&&(k.head&&(A=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),r.arraySet(k.head.extra,G,H,J,A)),512&k.flags&&(k.check=o(k.check,G,J,H)),U-=J,H+=J,k.length-=J),k.length))break t;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(U===0)break t;for(J=0;A=G[H+J++],k.head&&A&&k.length<65536&&(k.head.name+=String.fromCharCode(A)),A&&J<U;);if(512&k.flags&&(k.check=o(k.check,G,J,H)),U-=J,H+=J,A)break t}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(U===0)break t;for(J=0;A=G[H+J++],k.head&&A&&k.length<65536&&(k.head.comment+=String.fromCharCode(A)),A&&J<U;);if(512&k.flags&&(k.check=o(k.check,G,J,H)),U-=J,H+=J,A)break t}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;j<16;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(O!==(65535&k.check)){N.msg="header crc mismatch",k.mode=30;break}j=O=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),N.adler=k.check=0,k.mode=12;break;case 10:for(;j<32;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}N.adler=k.check=m(O),j=O=0,k.mode=11;case 11:if(k.havedict===0)return N.next_out=X,N.avail_out=K,N.next_in=H,N.avail_in=U,k.hold=O,k.bits=j,2;N.adler=k.check=1,k.mode=12;case 12:if(B===5||B===6)break t;case 13:if(k.last){O>>>=7&j,j-=7&j,k.mode=27;break}for(;j<3;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}switch(k.last=1&O,j-=1,3&(O>>>=1)){case 0:k.mode=14;break;case 1:if(D(k),k.mode=20,B!==6)break;O>>>=2,j-=2;break t;case 2:k.mode=17;break;case 3:N.msg="invalid block type",k.mode=30}O>>>=2,j-=2;break;case 14:for(O>>>=7&j,j-=7&j;j<32;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if((65535&O)!=(O>>>16^65535)){N.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&O,j=O=0,k.mode=15,B===6)break t;case 15:k.mode=16;case 16:if(J=k.length){if(U<J&&(J=U),K<J&&(J=K),J===0)break t;r.arraySet(Y,G,H,J,X),U-=J,H+=J,K-=J,X+=J,k.length-=J;break}k.mode=12;break;case 17:for(;j<14;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(k.nlen=257+(31&O),O>>>=5,j-=5,k.ndist=1+(31&O),O>>>=5,j-=5,k.ncode=4+(15&O),O>>>=4,j-=4,286<k.nlen||30<k.ndist){N.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;j<3;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.lens[Z[k.have++]]=7&O,O>>>=3,j-=3}for(;k.have<19;)k.lens[Z[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,V={bits:k.lenbits},q=u(0,k.lens,0,19,k.lencode,0,k.work,V),k.lenbits=V.bits,q){N.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;It=(L=k.lencode[O&(1<<k.lenbits)-1])>>>16&255,me=65535&L,!((bt=L>>>24)<=j);){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(me<16)O>>>=bt,j-=bt,k.lens[k.have++]=me;else{if(me===16){for(F=bt+2;j<F;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(O>>>=bt,j-=bt,k.have===0){N.msg="invalid bit length repeat",k.mode=30;break}A=k.lens[k.have-1],J=3+(3&O),O>>>=2,j-=2}else if(me===17){for(F=bt+3;j<F;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}j-=bt,A=0,J=3+(7&(O>>>=bt)),O>>>=3,j-=3}else{for(F=bt+7;j<F;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}j-=bt,A=0,J=11+(127&(O>>>=bt)),O>>>=7,j-=7}if(k.have+J>k.nlen+k.ndist){N.msg="invalid bit length repeat",k.mode=30;break}for(;J--;)k.lens[k.have++]=A}}if(k.mode===30)break;if(k.lens[256]===0){N.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,V={bits:k.lenbits},q=u(h,k.lens,0,k.nlen,k.lencode,0,k.work,V),k.lenbits=V.bits,q){N.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,V={bits:k.distbits},q=u(d,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,V),k.distbits=V.bits,q){N.msg="invalid distances set",k.mode=30;break}if(k.mode=20,B===6)break t;case 20:k.mode=21;case 21:if(6<=U&&258<=K){N.next_out=X,N.avail_out=K,N.next_in=H,N.avail_in=U,k.hold=O,k.bits=j,c(N,nt),X=N.next_out,Y=N.output,K=N.avail_out,H=N.next_in,G=N.input,U=N.avail_in,O=k.hold,j=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;It=(L=k.lencode[O&(1<<k.lenbits)-1])>>>16&255,me=65535&L,!((bt=L>>>24)<=j);){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(It&&!(240&It)){for(ce=bt,$s=It,vs=me;It=(L=k.lencode[vs+((O&(1<<ce+$s)-1)>>ce)])>>>16&255,me=65535&L,!(ce+(bt=L>>>24)<=j);){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}O>>>=ce,j-=ce,k.back+=ce}if(O>>>=bt,j-=bt,k.back+=bt,k.length=me,It===0){k.mode=26;break}if(32&It){k.back=-1,k.mode=12;break}if(64&It){N.msg="invalid literal/length code",k.mode=30;break}k.extra=15&It,k.mode=22;case 22:if(k.extra){for(F=k.extra;j<F;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.length+=O&(1<<k.extra)-1,O>>>=k.extra,j-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;It=(L=k.distcode[O&(1<<k.distbits)-1])>>>16&255,me=65535&L,!((bt=L>>>24)<=j);){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(!(240&It)){for(ce=bt,$s=It,vs=me;It=(L=k.distcode[vs+((O&(1<<ce+$s)-1)>>ce)])>>>16&255,me=65535&L,!(ce+(bt=L>>>24)<=j);){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}O>>>=ce,j-=ce,k.back+=ce}if(O>>>=bt,j-=bt,k.back+=bt,64&It){N.msg="invalid distance code",k.mode=30;break}k.offset=me,k.extra=15&It,k.mode=24;case 24:if(k.extra){for(F=k.extra;j<F;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}k.offset+=O&(1<<k.extra)-1,O>>>=k.extra,j-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){N.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(K===0)break t;if(J=nt-K,k.offset>J){if((J=k.offset-J)>k.whave&&k.sane){N.msg="invalid distance too far back",k.mode=30;break}vt=J>k.wnext?(J-=k.wnext,k.wsize-J):k.wnext-J,J>k.length&&(J=k.length),yt=k.window}else yt=Y,vt=X-k.offset,J=k.length;for(K<J&&(J=K),K-=J,k.length-=J;Y[X++]=yt[vt++],--J;);k.length===0&&(k.mode=21);break;case 26:if(K===0)break t;Y[X++]=k.length,K--,k.mode=21;break;case 27:if(k.wrap){for(;j<32;){if(U===0)break t;U--,O|=G[H++]<<j,j+=8}if(nt-=K,N.total_out+=nt,k.total+=nt,nt&&(N.adler=k.check=k.flags?o(k.check,Y,nt,X-nt):a(k.check,Y,nt,X-nt)),nt=K,(k.flags?O:m(O))!==k.check){N.msg="incorrect data check",k.mode=30;break}j=O=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;j<32;){if(U===0)break t;U--,O+=G[H++]<<j,j+=8}if(O!==(4294967295&k.total)){N.msg="incorrect length check",k.mode=30;break}j=O=0}k.mode=29;case 29:q=1;break t;case 30:q=-3;break t;case 31:return-4;case 32:default:return g}return N.next_out=X,N.avail_out=K,N.next_in=H,N.avail_in=U,k.hold=O,k.bits=j,(k.wsize||nt!==N.avail_out&&k.mode<30&&(k.mode<27||B!==4))&&$(N,N.output,N.next_out,nt-N.avail_out)?(k.mode=31,-4):(it-=N.avail_in,nt-=N.avail_out,N.total_in+=it,N.total_out+=nt,k.total+=nt,k.wrap&&nt&&(N.adler=k.check=k.flags?o(k.check,Y,nt,N.next_out-nt):a(k.check,Y,nt,N.next_out-nt)),N.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(it==0&&nt===0||B===4)&&q===f&&(q=-5),q)},i.inflateEnd=function(N){if(!N||!N.state)return g;var B=N.state;return B.window&&(B.window=null),N.state=null,f},i.inflateGetHeader=function(N,B){var k;return N&&N.state&&2&(k=N.state).wrap?((k.head=B).done=!1,f):g},i.inflateSetDictionary=function(N,B){var k,G=B.length;return N&&N.state?(k=N.state).wrap!==0&&k.mode!==11?g:k.mode===11&&a(1,B,G,0)!==k.check?-3:$(N,B,G,G)?(k.mode=31,-4):(k.havedict=1,f):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,i){var r=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,d,f,g,v,p,w,m){var y,b,_,S,R,P,I,M,D,$=m.bits,N=0,B=0,k=0,G=0,Y=0,H=0,X=0,U=0,K=0,O=0,j=null,it=0,nt=new r.Buf16(16),J=new r.Buf16(16),vt=null,yt=0;for(N=0;N<=15;N++)nt[N]=0;for(B=0;B<g;B++)nt[d[f+B]]++;for(Y=$,G=15;1<=G&&nt[G]===0;G--);if(G<Y&&(Y=G),G===0)return v[p++]=20971520,v[p++]=20971520,m.bits=1,0;for(k=1;k<G&&nt[k]===0;k++);for(Y<k&&(Y=k),N=U=1;N<=15;N++)if(U<<=1,(U-=nt[N])<0)return-1;if(0<U&&(h===0||G!==1))return-1;for(J[1]=0,N=1;N<15;N++)J[N+1]=J[N]+nt[N];for(B=0;B<g;B++)d[f+B]!==0&&(w[J[d[f+B]]++]=B);if(P=h===0?(j=vt=w,19):h===1?(j=a,it-=257,vt=o,yt-=257,256):(j=c,vt=u,-1),N=k,R=p,X=B=O=0,_=-1,S=(K=1<<(H=Y))-1,h===1&&852<K||h===2&&592<K)return 1;for(;;){for(I=N-X,D=w[B]<P?(M=0,w[B]):w[B]>P?(M=vt[yt+w[B]],j[it+w[B]]):(M=96,0),y=1<<N-X,k=b=1<<H;v[R+(O>>X)+(b-=y)]=I<<24|M<<16|D|0,b!==0;);for(y=1<<N-1;O&y;)y>>=1;if(y!==0?(O&=y-1,O+=y):O=0,B++,--nt[N]==0){if(N===G)break;N=d[f+w[B]]}if(Y<N&&(O&S)!==_){for(X===0&&(X=Y),R+=k,U=1<<(H=N-X);H+X<G&&!((U-=nt[H+X])<=0);)H++,U<<=1;if(K+=1<<H,h===1&&852<K||h===2&&592<K)return 1;v[_=O&S]=Y<<24|H<<16|R-p|0}}return O!==0&&(v[R+O]=N-X<<24|64<<16|0),m.bits=Y,0}},{"../utils/common":41}],51:[function(e,s,i){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,i){var r=e("../utils/common"),a=0,o=1;function c(L){for(var z=L.length;0<=--z;)L[z]=0}var u=0,h=29,d=256,f=d+1+h,g=30,v=19,p=2*f+1,w=15,m=16,y=7,b=256,_=16,S=17,R=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(f+2));c($);var N=new Array(2*g);c(N);var B=new Array(512);c(B);var k=new Array(256);c(k);var G=new Array(h);c(G);var Y,H,X,U=new Array(g);function K(L,z,Z,Q,W){this.static_tree=L,this.extra_bits=z,this.extra_base=Z,this.elems=Q,this.max_length=W,this.has_stree=L&&L.length}function O(L,z){this.dyn_tree=L,this.max_code=0,this.stat_desc=z}function j(L){return L<256?B[L]:B[256+(L>>>7)]}function it(L,z){L.pending_buf[L.pending++]=255&z,L.pending_buf[L.pending++]=z>>>8&255}function nt(L,z,Z){L.bi_valid>m-Z?(L.bi_buf|=z<<L.bi_valid&65535,it(L,L.bi_buf),L.bi_buf=z>>m-L.bi_valid,L.bi_valid+=Z-m):(L.bi_buf|=z<<L.bi_valid&65535,L.bi_valid+=Z)}function J(L,z,Z){nt(L,Z[2*z],Z[2*z+1])}function vt(L,z){for(var Z=0;Z|=1&L,L>>>=1,Z<<=1,0<--z;);return Z>>>1}function yt(L,z,Z){var Q,W,et=new Array(w+1),ot=0;for(Q=1;Q<=w;Q++)et[Q]=ot=ot+Z[Q-1]<<1;for(W=0;W<=z;W++){var st=L[2*W+1];st!==0&&(L[2*W]=vt(et[st]++,st))}}function bt(L){var z;for(z=0;z<f;z++)L.dyn_ltree[2*z]=0;for(z=0;z<g;z++)L.dyn_dtree[2*z]=0;for(z=0;z<v;z++)L.bl_tree[2*z]=0;L.dyn_ltree[2*b]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function It(L){8<L.bi_valid?it(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function me(L,z,Z,Q){var W=2*z,et=2*Z;return L[W]<L[et]||L[W]===L[et]&&Q[z]<=Q[Z]}function ce(L,z,Z){for(var Q=L.heap[Z],W=Z<<1;W<=L.heap_len&&(W<L.heap_len&&me(z,L.heap[W+1],L.heap[W],L.depth)&&W++,!me(z,Q,L.heap[W],L.depth));)L.heap[Z]=L.heap[W],Z=W,W<<=1;L.heap[Z]=Q}function $s(L,z,Z){var Q,W,et,ot,st=0;if(L.last_lit!==0)for(;Q=L.pending_buf[L.d_buf+2*st]<<8|L.pending_buf[L.d_buf+2*st+1],W=L.pending_buf[L.l_buf+st],st++,Q===0?J(L,W,z):(J(L,(et=k[W])+d+1,z),(ot=P[et])!==0&&nt(L,W-=G[et],ot),J(L,et=j(--Q),Z),(ot=I[et])!==0&&nt(L,Q-=U[et],ot)),st<L.last_lit;);J(L,b,z)}function vs(L,z){var Z,Q,W,et=z.dyn_tree,ot=z.stat_desc.static_tree,st=z.stat_desc.has_stree,pt=z.stat_desc.elems,$t=-1;for(L.heap_len=0,L.heap_max=p,Z=0;Z<pt;Z++)et[2*Z]!==0?(L.heap[++L.heap_len]=$t=Z,L.depth[Z]=0):et[2*Z+1]=0;for(;L.heap_len<2;)et[2*(W=L.heap[++L.heap_len]=$t<2?++$t:0)]=1,L.depth[W]=0,L.opt_len--,st&&(L.static_len-=ot[2*W+1]);for(z.max_code=$t,Z=L.heap_len>>1;1<=Z;Z--)ce(L,et,Z);for(W=pt;Z=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ce(L,et,1),Q=L.heap[1],L.heap[--L.heap_max]=Z,L.heap[--L.heap_max]=Q,et[2*W]=et[2*Z]+et[2*Q],L.depth[W]=(L.depth[Z]>=L.depth[Q]?L.depth[Z]:L.depth[Q])+1,et[2*Z+1]=et[2*Q+1]=W,L.heap[1]=W++,ce(L,et,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Nt,Jn){var Hc,Ws,Uc,ue,zd,_g,vi=Jn.dyn_tree,My=Jn.max_code,zA=Jn.stat_desc.static_tree,BA=Jn.stat_desc.has_stree,HA=Jn.stat_desc.extra_bits,Fy=Jn.stat_desc.extra_base,$c=Jn.stat_desc.max_length,Bd=0;for(ue=0;ue<=w;ue++)Nt.bl_count[ue]=0;for(vi[2*Nt.heap[Nt.heap_max]+1]=0,Hc=Nt.heap_max+1;Hc<p;Hc++)$c<(ue=vi[2*vi[2*(Ws=Nt.heap[Hc])+1]+1]+1)&&(ue=$c,Bd++),vi[2*Ws+1]=ue,My<Ws||(Nt.bl_count[ue]++,zd=0,Fy<=Ws&&(zd=HA[Ws-Fy]),_g=vi[2*Ws],Nt.opt_len+=_g*(ue+zd),BA&&(Nt.static_len+=_g*(zA[2*Ws+1]+zd)));if(Bd!==0){do{for(ue=$c-1;Nt.bl_count[ue]===0;)ue--;Nt.bl_count[ue]--,Nt.bl_count[ue+1]+=2,Nt.bl_count[$c]--,Bd-=2}while(0<Bd);for(ue=$c;ue!==0;ue--)for(Ws=Nt.bl_count[ue];Ws!==0;)My<(Uc=Nt.heap[--Hc])||(vi[2*Uc+1]!==ue&&(Nt.opt_len+=(ue-vi[2*Uc+1])*vi[2*Uc],vi[2*Uc+1]=ue),Ws--)}}(L,z),yt(et,$t,L.bl_count)}function A(L,z,Z){var Q,W,et=-1,ot=z[1],st=0,pt=7,$t=4;for(ot===0&&(pt=138,$t=3),z[2*(Z+1)+1]=65535,Q=0;Q<=Z;Q++)W=ot,ot=z[2*(Q+1)+1],++st<pt&&W===ot||(st<$t?L.bl_tree[2*W]+=st:W!==0?(W!==et&&L.bl_tree[2*W]++,L.bl_tree[2*_]++):st<=10?L.bl_tree[2*S]++:L.bl_tree[2*R]++,et=W,$t=(st=0)===ot?(pt=138,3):W===ot?(pt=6,3):(pt=7,4))}function q(L,z,Z){var Q,W,et=-1,ot=z[1],st=0,pt=7,$t=4;for(ot===0&&(pt=138,$t=3),Q=0;Q<=Z;Q++)if(W=ot,ot=z[2*(Q+1)+1],!(++st<pt&&W===ot)){if(st<$t)for(;J(L,W,L.bl_tree),--st!=0;);else W!==0?(W!==et&&(J(L,W,L.bl_tree),st--),J(L,_,L.bl_tree),nt(L,st-3,2)):st<=10?(J(L,S,L.bl_tree),nt(L,st-3,3)):(J(L,R,L.bl_tree),nt(L,st-11,7));et=W,$t=(st=0)===ot?(pt=138,3):W===ot?(pt=6,3):(pt=7,4)}}c(U);var V=!1;function F(L,z,Z,Q){nt(L,(u<<1)+(Q?1:0),3),function(W,et,ot,st){It(W),it(W,ot),it(W,~ot),r.arraySet(W.pending_buf,W.window,et,ot,W.pending),W.pending+=ot}(L,z,Z)}i._tr_init=function(L){V||(function(){var z,Z,Q,W,et,ot=new Array(w+1);for(W=Q=0;W<h-1;W++)for(G[W]=Q,z=0;z<1<<P[W];z++)k[Q++]=W;for(k[Q-1]=W,W=et=0;W<16;W++)for(U[W]=et,z=0;z<1<<I[W];z++)B[et++]=W;for(et>>=7;W<g;W++)for(U[W]=et<<7,z=0;z<1<<I[W]-7;z++)B[256+et++]=W;for(Z=0;Z<=w;Z++)ot[Z]=0;for(z=0;z<=143;)$[2*z+1]=8,z++,ot[8]++;for(;z<=255;)$[2*z+1]=9,z++,ot[9]++;for(;z<=279;)$[2*z+1]=7,z++,ot[7]++;for(;z<=287;)$[2*z+1]=8,z++,ot[8]++;for(yt($,f+1,ot),z=0;z<g;z++)N[2*z+1]=5,N[2*z]=vt(z,5);Y=new K($,P,d+1,f,w),H=new K(N,I,0,g,w),X=new K(new Array(0),M,0,v,y)}(),V=!0),L.l_desc=new O(L.dyn_ltree,Y),L.d_desc=new O(L.dyn_dtree,H),L.bl_desc=new O(L.bl_tree,X),L.bi_buf=0,L.bi_valid=0,bt(L)},i._tr_stored_block=F,i._tr_flush_block=function(L,z,Z,Q){var W,et,ot=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(st){var pt,$t=4093624447;for(pt=0;pt<=31;pt++,$t>>>=1)if(1&$t&&st.dyn_ltree[2*pt]!==0)return a;if(st.dyn_ltree[18]!==0||st.dyn_ltree[20]!==0||st.dyn_ltree[26]!==0)return o;for(pt=32;pt<d;pt++)if(st.dyn_ltree[2*pt]!==0)return o;return a}(L)),vs(L,L.l_desc),vs(L,L.d_desc),ot=function(st){var pt;for(A(st,st.dyn_ltree,st.l_desc.max_code),A(st,st.dyn_dtree,st.d_desc.max_code),vs(st,st.bl_desc),pt=v-1;3<=pt&&st.bl_tree[2*D[pt]+1]===0;pt--);return st.opt_len+=3*(pt+1)+5+5+4,pt}(L),W=L.opt_len+3+7>>>3,(et=L.static_len+3+7>>>3)<=W&&(W=et)):W=et=Z+5,Z+4<=W&&z!==-1?F(L,z,Z,Q):L.strategy===4||et===W?(nt(L,2+(Q?1:0),3),$s(L,$,N)):(nt(L,4+(Q?1:0),3),function(st,pt,$t,Nt){var Jn;for(nt(st,pt-257,5),nt(st,$t-1,5),nt(st,Nt-4,4),Jn=0;Jn<Nt;Jn++)nt(st,st.bl_tree[2*D[Jn]+1],3);q(st,st.dyn_ltree,pt-1),q(st,st.dyn_dtree,$t-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,ot+1),$s(L,L.dyn_ltree,L.dyn_dtree)),bt(L),Q&&It(L)},i._tr_tally=function(L,z,Z){return L.pending_buf[L.d_buf+2*L.last_lit]=z>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&z,L.pending_buf[L.l_buf+L.last_lit]=255&Z,L.last_lit++,z===0?L.dyn_ltree[2*Z]++:(L.matches++,z--,L.dyn_ltree[2*(k[Z]+d+1)]++,L.dyn_dtree[2*j(z)]++),L.last_lit===L.lit_bufsize-1},i._tr_align=function(L){nt(L,2,3),J(L,b,$),function(z){z.bi_valid===16?(it(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(e,s,i){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,i){(function(r){(function(a,o){if(!a.setImmediate){var c,u,h,d,f=1,g={},v=!1,p=a.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(a);w=w&&w.setTimeout?w:a,c={}.toString.call(a.process)==="[object process]"?function(_){process.nextTick(function(){y(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,S=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=S,_}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",b,!1):a.attachEvent("onmessage",b),function(_){a.postMessage(d+_,"*")}):a.MessageChannel?((h=new MessageChannel).port1.onmessage=function(_){y(_.data)},function(_){h.port2.postMessage(_)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(_){var S=p.createElement("script");S.onreadystatechange=function(){y(_),S.onreadystatechange=null,u.removeChild(S),S=null},u.appendChild(S)}):function(_){setTimeout(y,0,_)},w.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var S=new Array(arguments.length-1),R=0;R<S.length;R++)S[R]=arguments[R+1];var P={callback:_,args:S};return g[f]=P,c(f),f++},w.clearImmediate=m}function m(_){delete g[_]}function y(_){if(v)setTimeout(y,0,_);else{var S=g[_];if(S){v=!0;try{(function(R){var P=R.callback,I=R.args;switch(I.length){case 0:P();break;case 1:P(I[0]);break;case 2:P(I[0],I[1]);break;case 3:P(I[0],I[1],I[2]);break;default:P.apply(o,I)}})(S)}finally{m(_),v=!1}}}}function b(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(d)===0&&y(+_.data.slice(d.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(zx);var uE=zx.exports;const hE=v1(uE),Lu=n=>n.replace(/\s+/g,"_").replace(/[\\\/:*?"<>|]/g,""),Fd=(n,t)=>{const e=URL.createObjectURL(n),s=document.createElement("a");s.href=e,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)},Bc=async(n,t)=>{const e=new hE;n.forEach(i=>{e.file(i.name,i.blob)});const s=await e.generateAsync({type:"blob"});Fd(s,t)},dE=()=>{const[n,t]=ht.useState([]),[e,s]=ht.useState(28),[i,r]=ht.useState(!1),[a,o]=ht.useState("#000000"),[c,u]=ht.useState(0),[h,d]=ht.useState(300),[f,g]=ht.useState(400),v=ht.useRef({}),p=S=>{const R=[];S.forEach(P=>{if(P.type.startsWith("image/")){const I=new Image;I.src=URL.createObjectURL(P),I.onload=()=>{t(M=>[...M])},R.push({id:Math.random().toString(36).substr(2,9),file:P,text:"",filename:Lu(P.name.split(".")[0]),fontSize:"",textY:90,imgY:c,img:I})}}),t(P=>[...P,...R])},w=S=>{const R=v.current[S.id];if(!R||!S.img.complete)return;const P=R.getContext("2d");if(!P)return;R.width=h,R.height=f,P.fillStyle="#ffffff",P.fillRect(0,0,h,f);const I=20,M=h-I*2,D=f-I*2,$=Math.min(M/S.img.naturalWidth,D/S.img.naturalHeight),N=S.img.naturalWidth*$,B=S.img.naturalHeight*$,k=S.imgY/100*f,G=(h-N)/2,Y=(f-B)/2+k;if(P.drawImage(S.img,G,Y,N,B),S.text){P.fillStyle=a,P.textAlign="center",P.textBaseline="middle";const H=S.fontSize!==""?Number(S.fontSize):e;P.font=`${i?"700":"400"} ${H}px Inter`;const X=S.text.split(`
`),U=H*1.25,K=f*(S.textY/100)-U*X.length/2+U/2;X.forEach((O,j)=>{P.fillText(O,h/2,K+j*U)})}};ht.useEffect(()=>{n.forEach(w)},[n,h,f,e,i,a,c]);const m=(S,R)=>{t(P=>P.map(I=>{if(I.id!==S)return I;const M={...I,...R};return R.text!==void 0&&(M.filename=Lu(M.text)||M.filename),M}))},y=S=>{t(R=>R.filter(P=>P.id!==S)),delete v.current[S]},b=async S=>{const R=v.current[S.id];R&&R.toBlob(P=>{P&&Fd(P,`${S.filename}.png`)},"image/png")},_=async()=>{const S=[],R=new Set,P=n.map(I=>new Promise(M=>{const D=v.current[I.id];D?D.toBlob($=>{if($){let N=I.filename,B=1;for(;R.has(N);)N=`${I.filename}_${B}`,B++;R.add(N),S.push({name:`${N}.png`,blob:$})}M()},"image/png"):M()}));await Promise.all(P),Bc(S,"logos.zip")};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 h-full min-h-0",children:[E.jsxs("div",{className:"flex flex-col gap-4 overflow-y-auto pr-3 pb-20 lg:pb-4 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:[E.jsx(zc,{onFiles:p,accept:"image/*",icon:E.jsx(Oc,{size:24}),label:"Add Images"}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs(zs,{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4 text-[#A8C7FA]",children:[E.jsx(Ck,{size:16}),E.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Settings"})]}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"space-y-3",children:[E.jsx(tn,{type:"number",placeholder:"Font Size (px)",value:e,onChange:S=>s(Number(S.target.value))}),E.jsx("div",{className:"flex items-center justify-between gap-4 bg-[#1A1A1A] p-3 rounded-xl border border-[#333]",children:E.jsx(Ju,{checked:i,onChange:r,label:"Bold Text"})}),E.jsx("div",{className:"bg-[#1A1A1A] p-2 rounded-xl border border-[#333]",children:E.jsx(cE,{value:a,onChange:o})})]}),E.jsx("div",{className:"h-px bg-[#333]"}),E.jsx("div",{className:"space-y-3",children:E.jsx(Qg,{label:"Vertical Position",valueDisplay:`${c}%`,min:-50,max:50,value:c,onChange:S=>{const R=Number(S.target.value);u(R),t(P=>P.map(I=>({...I,imgY:R})))}})}),E.jsx("div",{className:"h-px bg-[#333]"}),E.jsxs("div",{className:"space-y-3",children:[E.jsx("span",{className:"text-[10px] font-bold text-[#888] uppercase tracking-wide block",children:"Dimensions"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(tn,{type:"number",placeholder:"W",value:h,onChange:S=>d(Number(S.target.value))}),E.jsx(tn,{type:"number",placeholder:"H",value:f,onChange:S=>g(Number(S.target.value))})]})]})]})]}),E.jsx(zs,{children:E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx(pe,{variant:"blue",onClick:_,disabled:n.length===0,icon:E.jsx(Ld,{size:16}),children:"Export All"}),E.jsx(pe,{variant:"tonal",onClick:()=>t([]),disabled:n.length===0,icon:E.jsx(e0,{size:16}),children:"Clear All"})]})})]})]}),E.jsx("div",{className:"overflow-y-auto pb-20 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:n.length===0?E.jsx(Md,{icon:E.jsx(fy,{size:48}),message:"Drop images here to start"}):E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:n.map((S,R)=>E.jsxs("div",{className:"bg-[#111] rounded-[16px] overflow-hidden flex flex-col shadow-sm border border-[#222] hover:border-[#444] transition-all duration-300 animate-in fade-in slide-in-from-bottom-4 fill-mode-forwards",style:{animationDelay:`${R*50}ms`},children:[E.jsxs("div",{className:"px-2 py-2 flex justify-between items-center bg-[#181818] border-b border-[#222] gap-2",children:[E.jsx("div",{className:"flex-1 min-w-0 bg-[#000] border border-[#333] rounded overflow-hidden focus-within:border-[#A8C7FA] transition-colors",children:E.jsx("input",{className:"bg-transparent text-[10px] font-mono text-[#e3e3e3] placeholder-[#666] focus:outline-none w-full px-1.5 py-1",value:S.filename,onChange:P=>m(S.id,{filename:Lu(P.target.value)}),placeholder:"Filename"})}),E.jsxs("div",{className:"flex gap-0.5 shrink-0",children:[E.jsx("button",{className:"p-1 rounded-full hover:bg-[#222] text-[#888] hover:text-[#A8C7FA] transition-colors",onClick:()=>b(S),title:"Save",children:E.jsx(Ek,{size:12})}),E.jsx("button",{className:"p-1 rounded-full hover:bg-[#222] text-[#888] hover:text-[#F2B8B5] transition-colors",onClick:()=>y(S.id),title:"Remove",children:E.jsx(Sp,{size:12})})]})]}),E.jsx("div",{className:"bg-black p-2 flex items-center justify-center relative aspect-square pattern-checkers overflow-hidden group",children:E.jsx("canvas",{ref:P=>{v.current[S.id]=P},className:"max-w-full max-h-full shadow-lg object-contain transition-transform duration-300 group-hover:scale-[1.02]"})}),E.jsxs("div",{className:"p-2 flex flex-col gap-2 bg-[#111]",children:[E.jsx("textarea",{className:"w-full bg-[#181818] border border-[#333] rounded p-1.5 text-[11px] text-[#e3e3e3] resize-none h-9 focus:outline-none focus:border-[#A8C7FA] focus:bg-[#222] transition-colors placeholder-[#666]",placeholder:"Label...",value:S.text,onChange:P=>m(S.id,{text:P.target.value})}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-[9px] font-bold text-[#666] uppercase w-6",children:"Size"}),E.jsx("input",{className:"flex-1 bg-[#181818] border border-[#333] rounded px-2 py-1 text-[10px] text-white focus:outline-none focus:border-[#A8C7FA] transition-colors text-center",type:"number",placeholder:`Global (${e})`,value:S.fontSize===""?"":S.fontSize,onChange:P=>m(S.id,{fontSize:P.target.value?Number(P.target.value):""})})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(Qg,{label:"Text Y",min:0,max:100,value:S.textY,onChange:P=>m(S.id,{textY:Number(P.target.value)})}),E.jsx(Qg,{label:"Img Y",min:-50,max:50,value:S.imgY,onChange:P=>m(S.id,{imgY:Number(P.target.value)})})]})]})]})]},S.id))})})]})};var Mu={};Mu.d=(n,t)=>{for(var e in t)Mu.o(t,e)&&!Mu.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Mu.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var wt=globalThis.pdfjsLib={};Mu.d(wt,{AbortException:()=>ca,AnnotationEditorLayer:()=>dv,AnnotationEditorParamsType:()=>Rt,AnnotationEditorType:()=>At,AnnotationEditorUIManager:()=>zo,AnnotationLayer:()=>oT,AnnotationMode:()=>yr,ColorPicker:()=>Rp,DOMSVGFactory:()=>Ey,DrawLayer:()=>gv,FeatureTest:()=>pn,GlobalWorkerOptions:()=>Zi,ImageKind:()=>Af,InvalidPDFException:()=>r0,MissingPDFException:()=>th,OPS:()=>xs,OutputScale:()=>o0,PDFDataRangeTransport:()=>H_,PDFDateString:()=>_y,PDFWorker:()=>xl,PasswordResponses:()=>mE,PermissionFlag:()=>gE,PixelsPerInch:()=>ua,RenderingCancelledException:()=>by,TextLayer:()=>eh,TouchManager:()=>Tp,UnexpectedResponseException:()=>kp,Util:()=>ft,VerbosityLevel:()=>pg,XfaLayer:()=>$_,build:()=>HC,createValidAbsoluteUrl:()=>bE,fetchData:()=>yg,getDocument:()=>IC,getFilenameFromUrl:()=>PE,getPdfFilenameFromUrl:()=>RE,getXfaPageViewport:()=>NE,isDataScheme:()=>wg,isPdfFile:()=>xy,noContextMenu:()=>Hs,normalizeUnicode:()=>EE,setLayerDimensions:()=>jo,shadow:()=>Ct,stopEvent:()=>Vn,version:()=>BC});const sn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Bx=[1,0,0,1,0,0],i0=[.001,0,0,.001,0,0],fE=1e7,em=1.35,$n={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pE="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},gE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Af={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},tu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pg={ERRORS:0,WARNINGS:1,INFOS:5},xs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},mE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gg=pg.WARNINGS;function vE(n){Number.isInteger(n)&&(gg=n)}function yE(){return gg}function mg(n){gg>=pg.INFOS&&console.log(`Info: ${n}`)}function St(n){gg>=pg.WARNINGS&&console.log(`Warning: ${n}`)}function Ut(n){throw new Error(n)}function we(n,t){n||Ut(t)}function wE(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bE(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=kE(n)}catch{}}const s=t?new URL(n,t):new URL(n);if(wE(s))return s}catch{}return null}function Ct(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const ga=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Kw extends ga{constructor(t,e){super(t,"PasswordException"),this.code=e}}class nm extends ga{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class r0 extends ga{constructor(t){super(t,"InvalidPDFException")}}class th extends ga{constructor(t){super(t,"MissingPDFException")}}class kp extends ga{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class xE extends ga{constructor(t){super(t,"FormatError")}}class ca extends ga{constructor(t){super(t,"AbortException")}}function Hx(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ut("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function vg(n){typeof n!="string"&&Ut("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function _E(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function yy(n){const t=Object.create(null);for(const[e,s]of n)t[e]=s;return t}function AE(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function SE(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return Ct(this,"isLittleEndian",AE())}static get isEvalSupported(){return Ct(this,"isEvalSupported",SE())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ct(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ct(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Ct(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const sm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var er,Sf,a0;class ft{static makeHexColor(t,e,s){return`#${sm[t]}${sm[e]}${sm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[s,i]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[i,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],i[0],r[0],a[0]),Math.min(s[1],i[1],r[1],a[1]),Math.max(s[0],i[0],r[0],a[0]),Math.max(s[1],i[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(s+a)/2,c=Math.sqrt((s+a)**2-4*(s*a-r*i))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[s,r,i,a]}static bezierBoundingBox(t,e,s,i,r,a,o,c,u){return u?(u[0]=Math.min(u[0],t,o),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,o),u[3]=Math.max(u[3],e,c)):u=[Math.min(t,o),Math.min(e,c),Math.max(t,o),Math.max(e,c)],T(this,er,a0).call(this,t,s,r,o,e,i,a,c,3*(-t+3*(s-r)+o),6*(t-2*s+r),3*(s-t),u),T(this,er,a0).call(this,t,s,r,o,e,i,a,c,3*(-e+3*(i-a)+c),6*(e-2*i+a),3*(i-e),u),u}}er=new WeakSet,Sf=function(t,e,s,i,r,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,v=d*(d*(d*t+3*u*e)+3*f*s)+g*i,p=d*(d*(d*r+3*u*a)+3*f*o)+g*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],p),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],p)},a0=function(t,e,s,i,r,a,o,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&T(this,er,Sf).call(this,t,e,s,i,r,a,o,c,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const v=Math.sqrt(g),p=2*u;T(this,er,Sf).call(this,t,e,s,i,r,a,o,c,(-h+v)/p,f),T(this,er,Sf).call(this,t,e,s,i,r,a,o,c,(-h-v)/p,f)},C(ft,er);function kE(n){return decodeURIComponent(escape(n))}let im=null,Zw=null;function EE(n){return im||(im=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Zw=new Map([["","t"]])),n.replaceAll(im,(t,e,s)=>e?e.normalize("NFKC"):Zw.get(s))}function CE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Hx(n)}const wy="pdfjs_internal_id_";function TE(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Hx(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});const wi="http://www.w3.org/2000/svg",xa=class xa{};gt(xa,"CSS",96),gt(xa,"PDF",72),gt(xa,"PDF_TO_CSS_UNITS",xa.CSS/xa.PDF);let ua=xa;async function yg(n,t="text"){if(lu(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Dd{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,g;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,g=1;break;case 90:h=0,d=1,f=1,g=0;break;case 270:h=0,d=-1,f=-1,g=0;break;case 0:h=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,g=-g);let v,p,w,m;h===0?(v=Math.abs(u-t[1])*s+r,p=Math.abs(c-t[0])*s+a,w=(t[3]-t[1])*s,m=(t[2]-t[0])*s):(v=Math.abs(c-t[0])*s+r,p=Math.abs(u-t[1])*s+a,w=(t[2]-t[0])*s,m=(t[3]-t[1])*s),this.transform=[h*s,d*s,f*s,g*s,v-h*s*c-f*s*u,p-d*s*c-g*s*u],this.width=w,this.height=m}get rawDims(){const{userUnit:t,viewBox:e}=this,s=e.map(i=>i*t);return Ct(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Dd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return ft.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=ft.applyTransform([t[0],t[1]],this.transform),s=ft.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return ft.applyInverseTransform([t,e],this.transform)}}class by extends ga{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function wg(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function xy(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function PE(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function RE(n,t="document.pdf"){if(typeof n!="string")return t;if(wg(n))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Qw{constructor(){gt(this,"started",Object.create(null));gt(this,"times",[])}time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function lu(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function Hs(n){n.preventDefault()}function Vn(n){n.preventDefault(),n.stopPropagation()}var sh;class _y{static toDateObject(t){if(!t||typeof t!="string")return null;l(this,sh)||x(this,sh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,sh).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(s,i,r,a,o,c))}}sh=new WeakMap,C(_y,sh);function NE(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Dd({viewBox:r,userUnit:1,scale:t,rotation:e})}function Ay(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${n}"`),[0,0,0])}function IE(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,Ay(s))}t.remove()}function Zt(n){const{a:t,b:e,c:s,d:i,e:r,f:a}=n.getTransform();return[t,e,s,i,r,a]}function Vs(n){const{a:t,b:e,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[t,e,s,i,r,a]}function jo(n,t,e=!1,s=!0){if(t instanceof Dd){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:a}=n,o=pn.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}s&&n.setAttribute("data-main-rotation",t.rotation)}class o0{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var wr,Ea,_s,Ca,ih,rh,Lp,Ux,gn,$x,Wx,kf,Gx,c0;const Ai=class Ai{constructor(t){C(this,gn);C(this,wr,null);C(this,Ea,null);C(this,_s);C(this,Ca,null);C(this,ih,null);x(this,_s,t),l(Ai,rh)||x(Ai,rh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,wr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,_s)._uiManager._signal;t.addEventListener("contextmenu",Hs,{signal:e}),t.addEventListener("pointerdown",T(Ai,Lp,Ux),{signal:e});const s=x(this,Ca,document.createElement("div"));s.className="buttons",t.append(s);const i=l(this,_s).toolbarPosition;if(i){const{style:r}=t,a=l(this,_s)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return T(this,gn,Gx).call(this),t}get div(){return l(this,wr)}hide(){var t;l(this,wr).classList.add("hidden"),(t=l(this,Ea))==null||t.hideDropdown()}show(){var t;l(this,wr).classList.remove("hidden"),(t=l(this,ih))==null||t.shown()}async addAltText(t){const e=await t.render();T(this,gn,kf).call(this,e),l(this,Ca).prepend(e,l(this,gn,c0)),x(this,ih,t)}addColorPicker(t){x(this,Ea,t);const e=t.renderButton();T(this,gn,kf).call(this,e),l(this,Ca).prepend(e,l(this,gn,c0))}remove(){var t;l(this,wr).remove(),(t=l(this,Ea))==null||t.destroy(),x(this,Ea,null)}};wr=new WeakMap,Ea=new WeakMap,_s=new WeakMap,Ca=new WeakMap,ih=new WeakMap,rh=new WeakMap,Lp=new WeakSet,Ux=function(t){t.stopPropagation()},gn=new WeakSet,$x=function(t){l(this,_s)._focusEventsAllowed=!1,Vn(t)},Wx=function(t){l(this,_s)._focusEventsAllowed=!0,Vn(t)},kf=function(t){const e=l(this,_s)._uiManager._signal;t.addEventListener("focusin",T(this,gn,$x).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",T(this,gn,Wx).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Hs,{signal:e})},Gx=function(){const{editorType:t,_uiManager:e}=l(this,_s),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Ai,rh)[t]),T(this,gn,kf).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,Ca).append(s)},c0=function(){const t=document.createElement("div");return t.className="divider",t},C(Ai,Lp),C(Ai,rh,null);let l0=Ai;var ah,Ta,Pa,ha,Vx,Xx,Yx;class LE{constructor(t){C(this,ha);C(this,ah,null);C(this,Ta,null);C(this,Pa);x(this,Pa,t)}show(t,e,s){const[i,r]=T(this,ha,Xx).call(this,e,s),{style:a}=l(this,Ta)||x(this,Ta,T(this,ha,Vx).call(this));t.append(l(this,Ta)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Ta).remove()}}ah=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,ha=new WeakSet,Vx=function(){const t=x(this,Ta,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Hs,{signal:l(this,Pa)._signal});const e=x(this,ah,document.createElement("div"));return e.className="buttons",t.append(e),T(this,ha,Yx).call(this),t},Xx=function(t,e){let s=0,i=0;for(const r of t){const a=r.y+r.height;if(a<s)continue;const o=r.x+(e?r.width:0);if(a>s){i=o,s=a;continue}e?o>i&&(i=o):o<i&&(i=o)}return[e?1-i:i,s]},Yx=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,Pa)._signal;t.addEventListener("contextmenu",Hs,{signal:s}),t.addEventListener("click",()=>{l(this,Pa).highlightSelection("floating_button")},{signal:s}),l(this,ah).append(t)};function Ep(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}var Mp;class ME{constructor(){C(this,Mp,0)}get id(){return`${pE}${an(this,Mp)._++}`}}Mp=new WeakMap;var _l,oh,Ke,Al,Ef;const Ty=class Ty{constructor(){C(this,Al);C(this,_l,CE());C(this,oh,0);C(this,Ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return T(this,Al,Ef).call(this,`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return T(this,Al,Ef).call(this,t,t)}async getFromBlob(t,e){const s=await e;return T(this,Al,Ef).call(this,t,s)}async getFromId(t){l(this,Ke)||x(this,Ke,new Map);const e=l(this,Ke).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Ke)||x(this,Ke,new Map);let s=l(this,Ke).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${l(this,_l)}_${an(this,oh)._++}`,refCounter:1,isSvg:!1},l(this,Ke).set(t,s),l(this,Ke).set(s.id,s),s}getSvgUrl(t){const e=l(this,Ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;l(this,Ke)||x(this,Ke,new Map);const e=l(this,Ke).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,_l)}_`)}};_l=new WeakMap,oh=new WeakMap,Ke=new WeakMap,Al=new WeakSet,Ef=async function(t,e){l(this,Ke)||x(this,Ke,new Map);let s=l(this,Ke).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,_l)}_${an(this,oh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=await yg(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=Ty._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,u()},a.onload=async()=>{const d=s.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){St(i),s=null}return l(this,Ke).set(t,s),s&&l(this,Ke).set(s.id,s),s};let u0=Ty;var he,br,lh,te;class FE{constructor(t=128){C(this,he,[]);C(this,br,!1);C(this,lh);C(this,te,-1);x(this,lh,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&t(),l(this,br))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,te)===-1){l(this,he).length>0&&(l(this,he).length=0),x(this,te,0),l(this,he).push(c);return}if(a&&l(this,he)[l(this,te)].type===r){o&&(c.undo=l(this,he)[l(this,te)].undo),l(this,he)[l(this,te)]=c;return}const u=l(this,te)+1;u===l(this,lh)?l(this,he).splice(0,1):(x(this,te,u),u<l(this,he).length&&l(this,he).splice(u)),l(this,he).push(c)}undo(){if(l(this,te)===-1)return;x(this,br,!0);const{undo:t,post:e}=l(this,he)[l(this,te)];t(),e==null||e(),x(this,br,!1),x(this,te,l(this,te)-1)}redo(){if(l(this,te)<l(this,he).length-1){x(this,te,l(this,te)+1),x(this,br,!0);const{cmd:t,post:e}=l(this,he)[l(this,te)];t(),e==null||e(),x(this,br,!1)}}hasSomethingToUndo(){return l(this,te)!==-1}hasSomethingToRedo(){return l(this,te)<l(this,he).length-1}cleanType(t){if(l(this,te)!==-1){for(let e=l(this,te);e>=0;e--)if(l(this,he)[e].type!==t){l(this,he).splice(e+1,l(this,te)-e),x(this,te,e);return}l(this,he).length=0,x(this,te,-1)}}destroy(){x(this,he,null)}}he=new WeakMap,br=new WeakMap,lh=new WeakMap,te=new WeakMap;var Fp,qx;class Od{constructor(t){C(this,Fp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=pn.platform;for(const[s,i,r={}]of t)for(const a of s){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(T(this,Fp,qx).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(t,e)||(i.bind(t,...a,e)(),r||Vn(e))}}Fp=new WeakSet,qx=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Dp=class Dp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return IE(t),Ct(this,"_colors",t)}convert(t){const e=Ay(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,a)=>r===e[a]))return Dp._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?ft.makeHexColor(...e):t}};gt(Dp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let h0=Dp;var Sl,Nn,Ae,De,kl,Ei,El,es,xr,Ra,Cl,Na,Ks,As,Ia,ch,uh,Tl,hh,Zs,_r,Pl,Ar,Qs,Op,Sr,dh,kr,La,fh,ph,Te,Ot,Ci,Ma,gh,mh,Er,Js,Ti,vh,ns,rt,Cf,d0,Kx,Zx,Tf,Qx,Jx,t_,f0,e_,p0,g0,n_,on,bi,s_,i_,m0,r_,cu,v0;const hl=class hl{constructor(t,e,s,i,r,a,o,c,u,h,d,f,g){C(this,rt);C(this,Sl,new AbortController);C(this,Nn,null);C(this,Ae,new Map);C(this,De,new Map);C(this,kl,null);C(this,Ei,null);C(this,El,null);C(this,es,new FE);C(this,xr,null);C(this,Ra,null);C(this,Cl,0);C(this,Na,new Set);C(this,Ks,null);C(this,As,null);C(this,Ia,new Set);gt(this,"_editorUndoBar",null);C(this,ch,!1);C(this,uh,!1);C(this,Tl,!1);C(this,hh,null);C(this,Zs,null);C(this,_r,null);C(this,Pl,null);C(this,Ar,!1);C(this,Qs,null);C(this,Op,new ME);C(this,Sr,!1);C(this,dh,!1);C(this,kr,null);C(this,La,null);C(this,fh,null);C(this,ph,null);C(this,Te,At.NONE);C(this,Ot,new Set);C(this,Ci,null);C(this,Ma,null);C(this,gh,null);C(this,mh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,Er,[0,0]);C(this,Js,null);C(this,Ti,null);C(this,vh,null);C(this,ns,null);const v=this._signal=l(this,Sl).signal;x(this,Ti,t),x(this,vh,e),x(this,kl,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:v}),T(this,rt,Qx).call(this),T(this,rt,n_).call(this),T(this,rt,f0).call(this),x(this,Ei,r.annotationStorage),x(this,hh,r.filterFactory),x(this,Ma,a),x(this,Pl,o||null),x(this,ch,c),x(this,uh,u),x(this,Tl,h),x(this,ph,d||null),this.viewParameters={realScale:ua.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const t=hl.prototype,e=a=>l(a,Ti).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Od([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Ti).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Ti).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r;(t=l(this,ns))==null||t.resolve(),x(this,ns,null),(e=l(this,Sl))==null||e.abort(),x(this,Sl,null),this._signal=null;for(const a of l(this,De).values())a.destroy();l(this,De).clear(),l(this,Ae).clear(),l(this,Ia).clear(),x(this,Nn,null),l(this,Ot).clear(),l(this,es).destroy(),(s=l(this,kl))==null||s.destroy(),(i=l(this,Qs))==null||i.hide(),x(this,Qs,null),l(this,Zs)&&(clearTimeout(l(this,Zs)),x(this,Zs,null)),l(this,Js)&&(clearTimeout(l(this,Js)),x(this,Js,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,ph)}get useNewAltTextFlow(){return l(this,uh)}get useNewAltTextWhenAddingImage(){return l(this,Tl)}get hcmFilter(){return Ct(this,"hcmFilter",l(this,Ma)?l(this,hh).addHCMFilter(l(this,Ma).foreground,l(this,Ma).background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(l(this,Ti)).direction)}get highlightColors(){return Ct(this,"highlightColors",l(this,Pl)?new Map(l(this,Pl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Ra,t)}setMainHighlightColorPicker(t){x(this,fh,t)}editAltText(t,e=!1){var s;(s=l(this,kl))==null||s.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Tl,e);break}}onPageChanging({pageNumber:t}){x(this,Cl,t-1)}focusMainContainer(){l(this,Ti).focus()}findParent(t,e){for(const s of l(this,De).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(t>=i&&t<=i+a&&e>=r&&e<=r+o)return s}return null}disableUserSelect(t=!1){l(this,vh).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Ia).add(t)}removeShouldRescale(t){l(this,Ia).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ua.PDF_TO_CSS_UNITS;for(const s of l(this,Ia))s.onScaleChanging();(e=l(this,Ra))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a}=e,o=e.toString(),u=T(this,rt,Cf).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=T(this,rt,d0).call(this,u),f=l(this,Te)===At.NONE,g=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(At.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,Ei)&&!l(this,Ei).has(t.id)&&l(this,Ei).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,Ar)&&(x(this,Ar,!1),T(this,rt,Tf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,Ot))if(e.div.contains(t)){x(this,La,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,La))return;const[t,e]=l(this,La);x(this,La,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){T(this,rt,f0).call(this),T(this,rt,p0).call(this)}removeEditListeners(){T(this,rt,e_).call(this),T(this,rt,g0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,As))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,As))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,Nn))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of l(this,Ot)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of l(this,As))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){St(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)T(this,rt,m0).call(this,c);T(this,rt,v0).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){St(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Te)!==At.NONE&&!this.isEditorHandlingKeyboard&&hl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ar)&&(x(this,Ar,!1),T(this,rt,Tf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(T(this,rt,Jx).call(this),T(this,rt,p0).call(this),T(this,rt,on).call(this,{isEditing:l(this,Te)!==At.NONE,isEmpty:T(this,rt,cu).call(this),hasSomethingToUndo:l(this,es).hasSomethingToUndo(),hasSomethingToRedo:l(this,es).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,rt,t_).call(this),T(this,rt,g0).call(this),T(this,rt,on).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,As)){x(this,As,t);for(const e of l(this,As))T(this,rt,bi).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Op).id}get currentLayer(){return l(this,De).get(l(this,Cl))}getLayer(t){return l(this,De).get(t)}get currentPageIndex(){return l(this,Cl)}addLayer(t){l(this,De).set(t.pageIndex,t),l(this,Sr)?t.enable():t.disable()}removeLayer(t){l(this,De).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var i;if(l(this,Te)!==t&&!(l(this,ns)&&(await l(this,ns).promise,!l(this,ns)))){if(x(this,ns,Promise.withResolvers()),x(this,Te,t),t===At.NONE){this.setEditingState(!1),T(this,rt,i_).call(this),(i=this._editorUndoBar)==null||i.hide(),l(this,ns).resolve();return}this.setEditingState(!0),await T(this,rt,s_).call(this),this.unselectAll();for(const r of l(this,De).values())r.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),l(this,ns).resolve();return}for(const r of l(this,Ae).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,ns).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,Te)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,As)){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor();return;case Rt.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,fh))==null||s.updateColor(e);break;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,gh)||x(this,gh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of l(this,Ot))i.updateParams(t,e);for(const i of l(this,As))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const a of l(this,Ae).values())a.editorType===t&&a.show(e);(((r=l(this,gh))==null?void 0:r.get(Rt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&T(this,rt,bi).call(this,[[Rt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,dh)!==t){x(this,dh,t);for(const e of l(this,De).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,Ae).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,Ae).get(t)}addEditor(t){l(this,Ae).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(l(this,Zs)&&clearTimeout(l(this,Zs)),x(this,Zs,setTimeout(()=>{this.focusMainContainer(),x(this,Zs,null)},0))),l(this,Ae).delete(t.id),this.unselect(t),(!t.annotationElementId||!l(this,Na).has(t.annotationElementId))&&((e=l(this,Ei))==null||e.remove(t.id))}addDeletedAnnotationElement(t){l(this,Na).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Na).has(t)}removeDeletedAnnotationElement(t){l(this,Na).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Nn)!==t&&(x(this,Nn,t),t&&T(this,rt,bi).call(this,t.propertiesToUpdate))}updateUI(t){l(this,rt,r_)===t&&T(this,rt,bi).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){T(this,rt,bi).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,Ot).has(t)){l(this,Ot).delete(t),t.unselect(),T(this,rt,on).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Ot).add(t),t.select(),T(this,rt,bi).call(this,t.propertiesToUpdate),T(this,rt,on).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=l(this,Ra))==null||e.commitOrRemove();for(const s of l(this,Ot))s!==t&&s.unselect();l(this,Ot).clear(),l(this,Ot).add(t),t.select(),T(this,rt,bi).call(this,t.propertiesToUpdate),T(this,rt,on).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,Ot).has(t)}get firstSelectedEditor(){return l(this,Ot).values().next().value}unselect(t){t.unselect(),l(this,Ot).delete(t),T(this,rt,on).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Ot).size!==0}get isEnterHandled(){return l(this,Ot).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,es).undo(),T(this,rt,on).call(this,{hasSomethingToUndo:l(this,es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,rt,cu).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,es).redo(),T(this,rt,on).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,es).hasSomethingToRedo(),isEmpty:T(this,rt,cu).call(this)})}addCommands(t){l(this,es).add(t),T(this,rt,on).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,rt,cu).call(this)})}cleanUndoStack(t){l(this,es).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,Ot)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},i=()=>{for(const a of e)T(this,rt,m0).call(this,a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=l(this,Nn))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,Nn)||this.hasSelection}selectAll(){for(const t of l(this,Ot))t.commit();T(this,rt,v0).call(this,l(this,Ae).values())}unselectAll(){var t;if(!(l(this,Nn)&&(l(this,Nn).commitOrRemove(),l(this,Te)!==At.NONE))&&!((t=l(this,Ra))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,Ot))e.unselect();l(this,Ot).clear(),T(this,rt,on).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,Er)[0]+=t,l(this,Er)[1]+=e;const[i,r]=l(this,Er),a=[...l(this,Ot)],o=1e3;l(this,Js)&&clearTimeout(l(this,Js)),x(this,Js,setTimeout(()=>{x(this,Js,null),l(this,Er)[0]=l(this,Er)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Ae).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of a)l(this,Ae).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Ks,new Map);for(const t of l(this,Ot))l(this,Ks).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ks))return!1;this.disableUserSelect(!1);const t=l(this,Ks);x(this,Ks,null);let e=!1;for(const[{x:i,y:r,pageIndex:a},o]of t)o.newX=i,o.newY=r,o.newPageIndex=a,e||(e=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!e)return!1;const s=(i,r,a,o)=>{if(l(this,Ae).has(i.id)){const c=l(this,De).get(o);c?i._setParentAndPosition(c,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of t)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of t)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Ks))for(const s of l(this,Ks).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,Ot).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Nn)===t}getActive(){return l(this,Nn)}getMode(){return l(this,Te)}get imageManager(){return Ct(this,"imageManager",new u0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-i)/a,y:1-(u+d-s)/r,width:f/a,height:d/r});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/a,width:d/r,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-i)/a,y:(u-s)/r,width:f/a,height:d/r});break;default:o=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/a,width:d/r,height:f/a});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:v,height:p}of d.getClientRects())v===0||p===0||c.push(o(f,g,v,p))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,El)||x(this,El,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,El))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=l(this,El))==null?void 0:i.get(t.data.id);if(!e)return;const s=l(this,Ei).getRawValue(e);s&&(l(this,Te)===At.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};Sl=new WeakMap,Nn=new WeakMap,Ae=new WeakMap,De=new WeakMap,kl=new WeakMap,Ei=new WeakMap,El=new WeakMap,es=new WeakMap,xr=new WeakMap,Ra=new WeakMap,Cl=new WeakMap,Na=new WeakMap,Ks=new WeakMap,As=new WeakMap,Ia=new WeakMap,ch=new WeakMap,uh=new WeakMap,Tl=new WeakMap,hh=new WeakMap,Zs=new WeakMap,_r=new WeakMap,Pl=new WeakMap,Ar=new WeakMap,Qs=new WeakMap,Op=new WeakMap,Sr=new WeakMap,dh=new WeakMap,kr=new WeakMap,La=new WeakMap,fh=new WeakMap,ph=new WeakMap,Te=new WeakMap,Ot=new WeakMap,Ci=new WeakMap,Ma=new WeakMap,gh=new WeakMap,mh=new WeakMap,Er=new WeakMap,Js=new WeakMap,Ti=new WeakMap,vh=new WeakMap,ns=new WeakMap,rt=new WeakSet,Cf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},d0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,De).values())if(s.hasTextLayer(t))return s;return null},Kx=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=T(this,rt,Cf).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(l(this,Qs)||x(this,Qs,new LE(this)),l(this,Qs).show(s,i,this.direction==="ltr"))},Zx=function(){var r,a,o;const t=document.getSelection();if(!t||t.isCollapsed){l(this,Ci)&&((r=l(this,Qs))==null||r.hide(),x(this,Ci,null),T(this,rt,on).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,Ci))return;const i=T(this,rt,Cf).call(this,t).closest(".textLayer");if(!i){l(this,Ci)&&((a=l(this,Qs))==null||a.hide(),x(this,Ci,null),T(this,rt,on).call(this,{hasSelectedText:!1}));return}if((o=l(this,Qs))==null||o.hide(),x(this,Ci,e),T(this,rt,on).call(this,{hasSelectedText:!0}),!(l(this,Te)!==At.HIGHLIGHT&&l(this,Te)!==At.NONE)&&(l(this,Te)===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Ar,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Te)===At.HIGHLIGHT?T(this,rt,d0).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&T(this,rt,Tf).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Tf=function(t=""){l(this,Te)===At.HIGHLIGHT?this.highlightSelection(t):l(this,ch)&&T(this,rt,Kx).call(this)},Qx=function(){document.addEventListener("selectionchange",T(this,rt,Zx).bind(this),{signal:this._signal})},Jx=function(){if(l(this,_r))return;x(this,_r,new AbortController);const t=this.combinedSignal(l(this,_r));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},t_=function(){var t;(t=l(this,_r))==null||t.abort(),x(this,_r,null)},f0=function(){if(l(this,kr))return;x(this,kr,new AbortController);const t=this.combinedSignal(l(this,kr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},e_=function(){var t;(t=l(this,kr))==null||t.abort(),x(this,kr,null)},p0=function(){if(l(this,xr))return;x(this,xr,new AbortController);const t=this.combinedSignal(l(this,xr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},g0=function(){var t;(t=l(this,xr))==null||t.abort(),x(this,xr,null)},n_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},on=function(t){Object.entries(t).some(([s,i])=>l(this,mh)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,mh),t)}),l(this,Te)===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&T(this,rt,bi).call(this,[[Rt.HIGHLIGHT_FREE,!0]]))},bi=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},s_=async function(){if(!l(this,Sr)){x(this,Sr,!0);const t=[];for(const e of l(this,De).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Ae).values())e.enable()}},i_=function(){if(this.unselectAll(),l(this,Sr)){x(this,Sr,!1);for(const t of l(this,De).values())t.disable();for(const t of l(this,Ae).values())t.disable()}},m0=function(t){const e=l(this,De).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},r_=function(){let t=null;for(t of l(this,Ot));return t},cu=function(){if(l(this,Ae).size===0)return!0;if(l(this,Ae).size===1)for(const t of l(this,Ae).values())return t.isEmpty();return!1},v0=function(t){for(const e of l(this,Ot))e.unselect();l(this,Ot).clear();for(const e of t)e.isEmpty()||(l(this,Ot).add(e),e.select());T(this,rt,on).call(this,{hasSelectedEditor:this.hasSelection})},gt(hl,"TRANSLATE_SMALL",1),gt(hl,"TRANSLATE_BIG",10);let zo=hl;var Pe,ti,Ss,Rl,ei,In,Nl,ni,_n,Pi,Fa,si,Cr,Ds,uu,Pf;const ln=class ln{constructor(t){C(this,Ds);C(this,Pe,null);C(this,ti,!1);C(this,Ss,null);C(this,Rl,null);C(this,ei,null);C(this,In,null);C(this,Nl,!1);C(this,ni,null);C(this,_n,null);C(this,Pi,null);C(this,Fa,null);C(this,si,!1);x(this,_n,t),x(this,si,t._uiManager.useNewAltTextFlow),l(ln,Cr)||x(ln,Cr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ln._l10n??(ln._l10n=t)}async render(){const t=x(this,Ss,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,Rl,document.createElement("span"));t.append(e),l(this,si)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(ln,Cr).missing),e.setAttribute("data-l10n-id",l(ln,Cr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,_n)._uiManager._signal;t.addEventListener("contextmenu",Hs,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),l(this,_n)._uiManager.editAltText(l(this,_n)),l(this,si)&&l(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Ds,uu)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(x(this,Nl,!0),i(r))},{signal:s}),await T(this,Ds,Pf).call(this),t}finish(){l(this,Ss)&&(l(this,Ss).focus({focusVisible:l(this,Nl)}),x(this,Nl,!1))}isEmpty(){return l(this,si)?l(this,Pe)===null:!l(this,Pe)&&!l(this,ti)}hasData(){return l(this,si)?l(this,Pe)!==null||!!l(this,Pi):this.isEmpty()}get guessedText(){return l(this,Pi)}async setGuessedText(t){l(this,Pe)===null&&(x(this,Pi,t),x(this,Fa,await ln._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),T(this,Ds,Pf).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,si)||l(this,Pe)){(e=l(this,ni))==null||e.remove(),x(this,ni,null);return}if(!l(this,ni)){const s=x(this,ni,document.createElement("div"));s.className="noAltTextBadge",l(this,_n).div.append(s)}l(this,ni).classList.toggle("hidden",!t)}serialize(t){let e=l(this,Pe);return!t&&l(this,Pi)===e&&(e=l(this,Fa)),{altText:e,decorative:l(this,ti),guessedText:l(this,Pi),textWithDisclaimer:l(this,Fa)}}get data(){return{altText:l(this,Pe),decorative:l(this,ti)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(x(this,Pi,s),x(this,Fa,i)),!(l(this,Pe)===t&&l(this,ti)===e)&&(r||(x(this,Pe,t),x(this,ti,e)),T(this,Ds,Pf).call(this))}toggle(t=!1){l(this,Ss)&&(!t&&l(this,In)&&(clearTimeout(l(this,In)),x(this,In,null)),l(this,Ss).disabled=!t)}shown(){l(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Ds,uu)}})}destroy(){var t,e;(t=l(this,Ss))==null||t.remove(),x(this,Ss,null),x(this,Rl,null),x(this,ei,null),(e=l(this,ni))==null||e.remove(),x(this,ni,null)}};Pe=new WeakMap,ti=new WeakMap,Ss=new WeakMap,Rl=new WeakMap,ei=new WeakMap,In=new WeakMap,Nl=new WeakMap,ni=new WeakMap,_n=new WeakMap,Pi=new WeakMap,Fa=new WeakMap,si=new WeakMap,Cr=new WeakMap,Ds=new WeakSet,uu=function(){return l(this,Pe)&&"added"||l(this,Pe)===null&&this.guessedText&&"review"||"missing"},Pf=async function(){var i,r,a;const t=l(this,Ss);if(!t)return;if(l(this,si)){if(t.classList.toggle("done",!!l(this,Pe)),t.setAttribute("data-l10n-id",l(ln,Cr)[l(this,Ds,uu)]),(i=l(this,Rl))==null||i.setAttribute("data-l10n-id",l(ln,Cr)[`${l(this,Ds,uu)}-label`]),!l(this,Pe)){(r=l(this,ei))==null||r.remove();return}}else{if(!l(this,Pe)&&!l(this,ti)){t.classList.remove("done"),(a=l(this,ei))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,ei);if(!e){x(this,ei,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,_n).id}`;const o=100,c=l(this,_n)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,In)),x(this,In,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,In,setTimeout(()=>{x(this,In,null),l(this,ei).classList.add("show"),l(this,_n)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;l(this,In)&&(clearTimeout(l(this,In)),x(this,In,null)),(u=l(this,ei))==null||u.classList.remove("show")},{signal:c})}l(this,ti)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,Pe)),e.parentNode||t.append(e);const s=l(this,_n).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},C(ln,Cr,null),gt(ln,"_l10n",null);let Cp=ln;var yh,Da,wh,bh,xh,_h,Ah,Il,Ri,Oa,Tr,or,a_,o_,y0;const Py=class Py{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){C(this,or);C(this,yh);C(this,Da,!1);C(this,wh,null);C(this,bh);C(this,xh);C(this,_h);C(this,Ah);C(this,Il);C(this,Ri,null);C(this,Oa);C(this,Tr,null);x(this,yh,t),x(this,wh,s),x(this,bh,e),x(this,xh,i),x(this,_h,r),x(this,Ah,a),x(this,Oa,new AbortController),x(this,Il,AbortSignal.any([o,l(this,Oa).signal])),t.addEventListener("touchstart",T(this,or,a_).bind(this),{passive:!1,signal:l(this,Il)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ct(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=l(this,Oa))==null||t.abort(),x(this,Oa,null)}};yh=new WeakMap,Da=new WeakMap,wh=new WeakMap,bh=new WeakMap,xh=new WeakMap,_h=new WeakMap,Ah=new WeakMap,Il=new WeakMap,Ri=new WeakMap,Oa=new WeakMap,Tr=new WeakMap,or=new WeakSet,a_=function(t){var i,r,a;if((i=l(this,bh))!=null&&i.call(this)||t.touches.length<2)return;if(!l(this,Tr)){x(this,Tr,new AbortController);const o=AbortSignal.any([l(this,Il),l(this,Tr).signal]),c=l(this,yh),u={signal:o,passive:!1};c.addEventListener("touchmove",T(this,or,o_).bind(this),u),c.addEventListener("touchend",T(this,or,y0).bind(this),u),c.addEventListener("touchcancel",T(this,or,y0).bind(this),u),(r=l(this,xh))==null||r.call(this)}if(Vn(t),t.touches.length!==2||(a=l(this,wh))!=null&&a.call(this)){x(this,Ri,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),x(this,Ri,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},o_=function(t){var _;if(!l(this,Ri)||t.touches.length!==2)return;let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:a,screenY:o}=s,c=l(this,Ri),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,g=d-u,v=f-h,p=a-i,w=o-r,m=Math.hypot(p,w)||1,y=Math.hypot(g,v)||1;if(!l(this,Da)&&Math.abs(y-m)<=Py.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=a,c.touch1Y=o,t.preventDefault(),!l(this,Da)){x(this,Da,!0);return}const b=[(i+a)/2,(r+o)/2];(_=l(this,_h))==null||_.call(this,b,y,m)},y0=function(t){var e;l(this,Tr).abort(),x(this,Tr,null),(e=l(this,Ah))==null||e.call(this),l(this,Ri)&&(t.preventDefault(),x(this,Ri,null),x(this,Da,!1))};let Tp=Py;var ja,ks,Yt,Ll,Pr,Sh,za,Oe,Ba,Ni,Rr,kh,Ha,Ln,Eh,Ua,Ii,ii,Ml,Fl,ss,$a,Ch,jp,mt,w0,Th,b0,Rf,l_,c_,x0,Nf,_0,u_,h_,d_,A0,f_,S0,p_,g_,m_,k0,hu;const kt=class kt{constructor(t){C(this,mt);C(this,ja,null);C(this,ks,null);C(this,Yt,null);C(this,Ll,!1);C(this,Pr,null);C(this,Sh,"");C(this,za,!1);C(this,Oe,null);C(this,Ba,null);C(this,Ni,null);C(this,Rr,null);C(this,kh,"");C(this,Ha,!1);C(this,Ln,null);C(this,Eh,!1);C(this,Ua,!1);C(this,Ii,!1);C(this,ii,null);C(this,Ml,0);C(this,Fl,0);C(this,ss,null);C(this,$a,null);gt(this,"_editToolbar",null);gt(this,"_initialOptions",Object.create(null));gt(this,"_initialData",null);gt(this,"_isVisible",!0);gt(this,"_uiManager",null);gt(this,"_focusEventsAllowed",!0);C(this,Ch,!1);C(this,jp,kt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=t.x/o,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=kt.prototype._resizeWithKeyboard,e=zo.TRANSLATE_SMALL,s=zo.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new Od([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],kt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new DE({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(kt._l10n??(kt._l10n=t),kt._l10nResizer||(kt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),kt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);kt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ut("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Ch)}set _isDraggable(t){var e;x(this,Ch,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,jp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):T(this,mt,hu).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Ha)?x(this,Ha,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/a,this.fixAndSetPosition()}translate(t,e){T(this,mt,w0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Ln)||x(this,Ln,[this.x,this.y,this.width,this.height]),T(this,mt,w0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){l(this,Ln)||x(this,Ln,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,u]=this.getBaseTranslation();a+=c,o+=u;const{style:h}=s;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,Ln)&&(l(this,Ln)[0]!==this.x||l(this,Ln)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Ln)&&(l(this,Ln)[2]!==this.width||l(this,Ln)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=kt,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:a,width:o,height:c}=this;if(o*=s,c*=i,r*=s,a*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(s-o,r)),a=Math.max(0,Math.min(i-c,a));break;case 90:r=Math.max(0,Math.min(s-c,r)),a=Math.min(i,Math.max(o,a));break;case 180:r=Math.min(s,Math.max(o,r)),a=Math.min(i,Math.max(c,a));break;case 270:r=Math.min(s,Math.max(c,r)),a=Math.max(0,Math.min(i-o,a));break}this.x=r/=s,this.y=a/=i;const[u,h]=this.getBaseTranslation();r+=u,a+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return T(s=kt,Th,b0).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return T(s=kt,Th,b0).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,l(this,za)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!l(this,za)&&e.endsWith("%");if(i&&r)return;const[a,o]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!l(this,za)&&!r&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Yt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||l(this,Ua)?this._editToolbar:(this._editToolbar=new l0(this),this.div.append(this._editToolbar.render()),l(this,Yt)&&await this._editToolbar.addAltText(l(this,Yt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=l(this,Yt))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Yt)||(Cp.initialize(kt._l10n),x(this,Yt,new Cp(this)),l(this,ja)&&(l(this,Yt).data=l(this,ja),x(this,ja,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Yt))==null?void 0:t.data}set altTextData(t){l(this,Yt)&&(l(this,Yt).data=t)}get guessedAltText(){var t;return(t=l(this,Yt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Yt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Yt))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Yt)&&!l(this,Yt).isEmpty()}hasAltTextData(){var t;return((t=l(this,Yt))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Ll)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),T(this,mt,S0).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Ep(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,$a)||x(this,$a,new Tp({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,mt,u_).bind(this),onPinching:T(this,mt,h_).bind(this),onPinchEnd:T(this,mt,d_).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=pn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,Ha,!0),this._isDraggable){T(this,mt,f_).call(this,t);return}T(this,mt,A0).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,ii)&&clearTimeout(l(this,ii)),x(this,ii,setTimeout(()=>{var t;x(this,ii,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=t/i,h=e/i,d=this.x*r,f=this.y*a,g=this.width*r,v=this.height*a;switch(s){case 0:return[d+u+o,a-f-h-v+c,d+u+g+o,a-f-h+c];case 90:return[d+h+o,a-f+u+c,d+h+v+o,a-f+u+g+c];case 180:return[d-u-g+o,a-f+h+c,d-u+o,a-f+h+v+c];case 270:return[d-h-v+o,a-f-u-g+c,d-h+o,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,a]=t,o=r-s,c=a-i;switch(this.rotation){case 0:return[s,e-a,o,c];case 90:return[s,e-i,c,o];case 180:return[r,e-i,o,c];case 270:return[r,e-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,Ua,!0)}disableEditMode(){x(this,Ua,!1)}isInEditMode(){return l(this,Ua)}shouldGetKeyboardEvents(){return l(this,Ii)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return e<a&&i>0&&t<r&&s>0}rebuild(){T(this,mt,S0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Ut("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,x(i,ja,t.accessibilityData);const[r,a]=i.pageDimensions,[o,c,u,h]=i.getRectInCurrentCoords(t.rect,a);return i.x=o/r,i.y=c/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,Rr))==null||t.abort(),x(this,Rr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,ii)&&(clearTimeout(l(this,ii)),x(this,ii,null)),T(this,mt,hu).call(this),this.removeEditToolbar(),l(this,ss)){for(const s of l(this,ss).values())clearTimeout(s);x(this,ss,null)}this.parent=null,(e=l(this,$a))==null||e.destroy(),x(this,$a,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,mt,l_).call(this),l(this,Oe).classList.remove("hidden"),Ep(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Oe).children;if(!l(this,ks)){x(this,ks,Array.from(e));const a=T(this,mt,p_).bind(this),o=T(this,mt,g_).bind(this),c=this._uiManager._signal;for(const u of l(this,ks)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",T(this,mt,m_).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",kt._l10nResizer[h])}}const s=l(this,ks)[0];let i=0;for(const a of e){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,ks).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)l(this,Oe).append(l(this,Oe).firstChild);else if(r>i)for(let o=0;o<r-i;o++)l(this,Oe).firstChild.before(l(this,Oe).lastChild);let a=0;for(const o of e){const u=l(this,ks)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",kt._l10nResizer[u])}}T(this,mt,k0).call(this,0),x(this,Ii,!0),l(this,Oe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Ii)&&T(this,mt,_0).call(this,l(this,kh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,mt,hu).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=l(this,Yt))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=l(this,Oe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,Yt))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Eh)}set isEditing(t){x(this,Eh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,za,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,ss)||x(this,ss,new Map);const{action:s}=t;let i=l(this,ss).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,ss).delete(s),l(this,ss).size===0&&x(this,ss,null)},kt._telemetryTimeout),l(this,ss).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,Ll,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Ll,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ja=new WeakMap,ks=new WeakMap,Yt=new WeakMap,Ll=new WeakMap,Pr=new WeakMap,Sh=new WeakMap,za=new WeakMap,Oe=new WeakMap,Ba=new WeakMap,Ni=new WeakMap,Rr=new WeakMap,kh=new WeakMap,Ha=new WeakMap,Ln=new WeakMap,Eh=new WeakMap,Ua=new WeakMap,Ii=new WeakMap,ii=new WeakMap,Ml=new WeakMap,Fl=new WeakMap,ss=new WeakMap,$a=new WeakMap,Ch=new WeakMap,jp=new WeakMap,mt=new WeakSet,w0=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Th=new WeakSet,b0=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Rf=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},l_=function(){if(l(this,Oe))return;x(this,Oe,document.createElement("div")),l(this,Oe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");l(this,Oe).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",T(this,mt,c_).bind(this,s),{signal:e}),i.addEventListener("contextmenu",Hs,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,Oe))},c_=function(t,e){var h;e.preventDefault();const{isMac:s}=pn.platform;if(e.button!==0||e.ctrlKey&&s)return;(h=l(this,Yt))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,x(this,Ba,[e.screenX,e.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,mt,_0).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Vn,{passive:!1,signal:a}),window.addEventListener("contextmenu",Hs,{signal:a}),x(this,Ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=l(this,Yt))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,T(this,mt,Nf).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},x0=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,a]=this.parentDimensions;this.setDims(r*s,a*i),this.fixAndSetPosition(),this._onResized()},Nf=function(){if(!l(this,Ni))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=l(this,Ni);x(this,Ni,null);const r=this.x,a=this.y,o=this.width,c=this.height;r===t&&a===e&&o===s&&c===i||this.addCommands({cmd:T(this,mt,x0).bind(this,r,a,o,c),undo:T(this,mt,x0).bind(this,t,e,s,i),mustExec:!0})},_0=function(t,e){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,u=kt.MIN_SIZE/s,h=kt.MIN_SIZE/i,d=T(this,mt,Rf).call(this,this.rotation),f=(Y,H)=>[d[0]*Y+d[2]*H,d[1]*Y+d[3]*H],g=T(this,mt,Rf).call(this,360-this.rotation),v=(Y,H)=>[g[0]*Y+g[2]*H,g[1]*Y+g[3]*H];let p,w,m=!1,y=!1;switch(t){case"topLeft":m=!0,p=(Y,H)=>[0,0],w=(Y,H)=>[Y,H];break;case"topMiddle":p=(Y,H)=>[Y/2,0],w=(Y,H)=>[Y/2,H];break;case"topRight":m=!0,p=(Y,H)=>[Y,0],w=(Y,H)=>[0,H];break;case"middleRight":y=!0,p=(Y,H)=>[Y,H/2],w=(Y,H)=>[0,H/2];break;case"bottomRight":m=!0,p=(Y,H)=>[Y,H],w=(Y,H)=>[0,0];break;case"bottomMiddle":p=(Y,H)=>[Y/2,H],w=(Y,H)=>[Y/2,0];break;case"bottomLeft":m=!0,p=(Y,H)=>[0,H],w=(Y,H)=>[Y,0];break;case"middleLeft":y=!0,p=(Y,H)=>[0,H/2],w=(Y,H)=>[Y,H/2];break}const b=p(o,c),_=w(o,c);let S=f(..._);const R=kt._round(r+S[0]),P=kt._round(a+S[1]);let I=1,M=1,D,$;if(e.fromKeyboard)({deltaX:D,deltaY:$}=e);else{const{screenX:Y,screenY:H}=e,[X,U]=l(this,Ba);[D,$]=this.screenToPageTranslation(Y-X,H-U),l(this,Ba)[0]=Y,l(this,Ba)[1]=H}if([D,$]=v(D/s,$/i),m){const Y=Math.hypot(o,c);I=M=Math.max(Math.min(Math.hypot(_[0]-b[0]-D,_[1]-b[1]-$)/Y,1/o,1/c),u/o,h/c)}else y?I=Math.max(u,Math.min(1,Math.abs(_[0]-b[0]-D)))/o:M=Math.max(h,Math.min(1,Math.abs(_[1]-b[1]-$)))/c;const N=kt._round(o*I),B=kt._round(c*M);S=f(...w(N,B));const k=R-S[0],G=P-S[1];l(this,Ln)||x(this,Ln,[this.x,this.y,this.width,this.height]),this.width=N,this.height=B,this.x=k,this.y=G,this.setDims(s*N,i*B),this.fixAndSetPosition(),this._onResizing()},u_=function(){var t;x(this,Ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Yt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},h_=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const a=T(this,mt,Rf).call(this,this.rotation),o=(R,P)=>[a[0]*R+a[2]*P,a[1]*R+a[3]*P],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,g=this.height,v=kt.MIN_SIZE/c,p=kt.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/g),v/f,p/g);const w=kt._round(f*r),m=kt._round(g*r);if(w===f&&m===g)return;l(this,Ln)||x(this,Ln,[h,d,f,g]);const y=o(f/2,g/2),b=kt._round(h+y[0]),_=kt._round(d+y[1]),S=o(w/2,m/2);this.x=b-S[0],this.y=_-S[1],this.width=w,this.height=m,this.setDims(c*w,u*m),this.fixAndSetPosition(),this._onResizing()},d_=function(){var t;(t=l(this,Yt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),T(this,mt,Nf).call(this)},A0=function(t){const{isMac:e}=pn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},f_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},o=u=>{i.abort(),x(this,Pr,null),x(this,Ha,!1),this._uiManager.endDragSession()||T(this,mt,A0).call(this,u),s&&this._onStopDragging()};e&&(x(this,Ml,t.clientX),x(this,Fl,t.clientY),x(this,Pr,t.pointerId),x(this,Sh,t.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==l(this,Pr)){Vn(u);return}const[g,v]=this.screenToPageTranslation(h-l(this,Ml),d-l(this,Fl));x(this,Ml,h),x(this,Fl,d),this._uiManager.dragSelectedEditors(g,v)},a),window.addEventListener("touchmove",Vn,a),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,Sh)&&(l(this,$a)||u.isPrimary)&&o(u),Vn(u)},a));const c=u=>{if(!l(this,Pr)||l(this,Pr)===u.pointerId){o(u);return}Vn(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},S0=function(){if(l(this,Rr)||!this.div)return;x(this,Rr,new AbortController);const t=this._uiManager.combinedSignal(l(this,Rr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},p_=function(t){kt._resizerKeyboardManager.exec(this,t)},g_=function(t){var e;l(this,Ii)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,Oe)&&T(this,mt,hu).call(this)},m_=function(t){x(this,kh,l(this,Ii)?t:"")},k0=function(t){if(l(this,ks))for(const e of l(this,ks))e.tabIndex=t},hu=function(){x(this,Ii,!1),T(this,mt,k0).call(this,-1),T(this,mt,Nf).call(this)},C(kt,Th),gt(kt,"_l10n",null),gt(kt,"_l10nResizer",null),gt(kt,"_borderLineWidth",-1),gt(kt,"_colorManager",new h0),gt(kt,"_zIndex",1),gt(kt,"_telemetryTimeout",1e3);let se=kt;class DE extends se{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Jw=3285377520,ts=4294901760,Xs=65535;class v_{constructor(t){this.h1=t?t&4294967295:Jw,this.h2=t?t&4294967295:Jw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let p=0,w=t.length;p<w;p++){const m=t.charCodeAt(p);m<=255?e[s++]=m:(e[s++]=m>>>8,e[s++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(e.buffer,0,i);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&Xs,v=f&Xs;for(let p=0;p<i;p++)p&1?(o=a[p],o=o*d&ts|o*g&Xs,o=o<<15|o>>>17,o=o*f&ts|o*v&Xs,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[p],c=c*d&ts|c*g&Xs,c=c<<15|c>>>17,c=c*f&ts|c*v&Xs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=e[i*4+2]<<16;case 2:o^=e[i*4+1]<<8;case 1:o^=e[i*4],o=o*d&ts|o*g&Xs,o=o<<15|o>>>17,o=o*f&ts|o*v&Xs,i&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ts|t*36045&Xs,e=e*4283543511&ts|((e<<16|t>>>16)*2950163797&ts)>>>16,t^=e>>>1,t=t*444984403&ts|t*60499&Xs,e=e*3301882366&ts|((e<<16|t>>>16)*3120437893&ts)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const E0=Object.freeze({map:null,hash:"",transfer:void 0});var Wa,Ga,Re,zp,y_;class Sy{constructor(){C(this,zp);C(this,Wa,!1);C(this,Ga,null);C(this,Re,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,Re).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,Re).get(t)}remove(t){if(l(this,Re).delete(t),l(this,Re).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,Re).values())if(e instanceof se)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,Re).get(t);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(e))s[r]!==a&&(i=!0,s[r]=a);else i=!0,l(this,Re).set(t,e);i&&T(this,zp,y_).call(this),e instanceof se&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,Re).has(t)}getAll(){return l(this,Re).size>0?yy(l(this,Re)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return l(this,Re).size}resetModified(){l(this,Wa)&&(x(this,Wa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w_(this)}get serializable(){if(l(this,Re).size===0)return E0;const t=new Map,e=new v_,s=[],i=Object.create(null);let r=!1;for(const[a,o]of l(this,Re)){const c=o instanceof se?o.serialize(!1,i):o;c&&(t.set(a,c),e.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of t.values())a.bitmap&&s.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:E0}get editorStats(){let t=null;const e=new Map;for(const s of l(this,Re).values()){if(!(s instanceof se))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[o,c]of Object.entries(i)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){x(this,Ga,null)}get modifiedIds(){if(l(this,Ga))return l(this,Ga);const t=[];for(const e of l(this,Re).values())!(e instanceof se)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,Ga,{ids:new Set(t),hash:t.join(",")})}}Wa=new WeakMap,Ga=new WeakMap,Re=new WeakMap,zp=new WeakSet,y_=function(){l(this,Wa)||(x(this,Wa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ph;class w_ extends Sy{constructor(e){super();C(this,Ph);const{map:s,hash:i,transfer:r}=e.serializable,a=structuredClone(s,r?{transfer:r}:null);x(this,Ph,{map:a,hash:i,transfer:r})}get print(){Ut("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Ph)}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}Ph=new WeakMap;var Dl;class OE{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){C(this,Dl,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Dl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||l(this,Dl).has(t.loadedName))){if(we(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=t,a=new FontFace(s,i,r);this.addNativeFontFace(a);try{await a.load(),l(this,Dl).add(s),e==null||e(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ut("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw St(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(sn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ct(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(we(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(_,S){return _.charCodeAt(S)<<24|_.charCodeAt(S+1)<<16|_.charCodeAt(S+2)<<8|_.charCodeAt(S+3)&255}function i(_,S,R,P){const I=_.substring(0,S),M=_.substring(S+R);return I+P+M}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(_,S){if(++u>30){St("Load test font never loaded."),S();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(h.bind(null,_,S))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const v=16,p=1482184792;let w=s(f,v);for(r=0,a=d.length-3;r<a;r+=4)w=w-p+s(d,r)|0;r<d.length&&(w=w-p+s(d+"XXX",r)|0),f=i(f,v,4,_E(w));const m=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(y);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const _ of[t.loadedName,d]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=_,b.append(S)}this._document.body.append(b),h(d,()=>{b.remove(),e.complete()})}}Dl=new WeakMap;class jE{constructor(t,{disableFontFace:e=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${TE(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(a){St(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const of={DATA:1,ERROR:2},ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function t1(){}function bn(n){if(n instanceof ca||n instanceof r0||n instanceof th||n instanceof Kw||n instanceof kp||n instanceof nm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ut('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ca(n.message);case"InvalidPDFException":return new r0(n.message);case"MissingPDFException":return new th(n.message);case"PasswordException":return new Kw(n.message,n.code);case"UnexpectedResponseException":return new kp(n.message,n.status);case"UnknownErrorException":return new nm(n.message,n.details)}return new nm(n.message,n.toString())}var Ol,ps,b_,x_,__,If;class du{constructor(t,e,s){C(this,ps);C(this,Ol,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",T(this,ps,b_).bind(this),{signal:l(this,Ol).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:ve.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{we(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:ve.CANCEL,streamId:r,reason:bn(u)}),h.promise}},s)}destroy(){var t;(t=l(this,Ol))==null||t.abort(),x(this,Ol,null)}}Ol=new WeakMap,ps=new WeakSet,b_=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){T(this,ps,__).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===of.DATA)i.resolve(t.data);else if(t.callback===of.ERROR)i.reject(bn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(a){r.postMessage({sourceName:s,targetName:i,callback:of.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:i,callback:of.ERROR,callbackId:t.callbackId,reason:bn(a)})});return}if(t.streamId){T(this,ps,x_).call(this,t);return}e(t.data)},x_=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:ve.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ve.CLOSE,streamId:e}),delete a.streamSinks[e])},error(u){we(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ve.ERROR,streamId:e,reason:bn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(o,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ve.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:ve.START_COMPLETE,streamId:e,reason:bn(u)})})},__=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case ve.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(bn(t.reason));break;case ve.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(bn(t.reason));break;case ve.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:ve.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||t1).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ve.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:ve.PULL_COMPLETE,streamId:e,reason:bn(u)})});break;case ve.ENQUEUE:if(we(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case ve.CLOSE:if(we(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),T(this,ps,If).call(this,a,e);break;case ve.ERROR:we(a,"error should have stream controller"),a.controller.error(bn(t.reason)),T(this,ps,If).call(this,a,e);break;case ve.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(bn(t.reason)),T(this,ps,If).call(this,a,e);break;case ve.CANCEL:if(!o)break;const c=bn(t.reason);Promise.try(o.onCancel||t1,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ve.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:ve.CANCEL_COMPLETE,streamId:e,reason:bn(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},If=async function(t,e){var s,i,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Rh;class A_{constructor({enableHWA:t=!1}){C(this,Rh,!1);x(this,Rh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,Rh)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ut("Abstract method `_createCanvas` called.")}}Rh=new WeakMap;class zE extends A_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class S_{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ut("Abstract method `_fetch` called.")}}class k_ extends S_{async _fetch(t){const e=await yg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):vg(e)}}class E_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}var Va,jl,Li,Mi,Ze,Xa,Ya,at,Ye,fu,Vo,Lf,Xo,C_,C0,Yo,pu,gu,T0,mu;class BE extends E_{constructor({docId:e,ownerDocument:s=globalThis.document}){super();C(this,at);C(this,Va);C(this,jl);C(this,Li);C(this,Mi);C(this,Ze);C(this,Xa);C(this,Ya,0);x(this,Mi,e),x(this,Ze,s)}addFilter(e){if(!e)return"none";let s=l(this,at,Ye).get(e);if(s)return s;const[i,r,a]=T(this,at,Lf).call(this,e),o=e.length===1?i:`${i}${r}${a}`;if(s=l(this,at,Ye).get(o),s)return l(this,at,Ye).set(e,s),s;const c=`g_${l(this,Mi)}_transfer_map_${an(this,Ya)._++}`,u=T(this,at,Xo).call(this,c);l(this,at,Ye).set(e,u),l(this,at,Ye).set(o,u);const h=T(this,at,Yo).call(this,c);return T(this,at,gu).call(this,i,r,a,h),u}addHCMFilter(e,s){var v;const i=`${e}-${s}`,r="base";let a=l(this,at,fu).get(r);if((a==null?void 0:a.key)===i||(a?((v=a.filter)==null||v.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},l(this,at,fu).set(r,a)),!e||!s))return a.url;const o=T(this,at,mu).call(this,e);e=ft.makeHexColor(...o);const c=T(this,at,mu).call(this,s);if(s=ft.makeHexColor(...c),l(this,at,Vo).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return a.url;const u=new Array(256);for(let p=0;p<=255;p++){const w=p/255;u[p]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Mi)}_hcm_filter`,f=a.filter=T(this,at,Yo).call(this,d);T(this,at,gu).call(this,h,h,h,f),T(this,at,C0).call(this,f);const g=(p,w)=>{const m=o[p]/255,y=c[p]/255,b=new Array(w+1);for(let _=0;_<=w;_++)b[_]=m+_/w*(y-m);return b.join(",")};return T(this,at,gu).call(this,g(0,5),g(1,5),g(2,5),f),a.url=T(this,at,Xo).call(this,d),a.url}addAlphaFilter(e){let s=l(this,at,Ye).get(e);if(s)return s;const[i]=T(this,at,Lf).call(this,[e]),r=`alpha_${i}`;if(s=l(this,at,Ye).get(r),s)return l(this,at,Ye).set(e,s),s;const a=`g_${l(this,Mi)}_alpha_map_${an(this,Ya)._++}`,o=T(this,at,Xo).call(this,a);l(this,at,Ye).set(e,o),l(this,at,Ye).set(r,o);const c=T(this,at,Yo).call(this,a);return T(this,at,T0).call(this,i,c),o}addLuminosityFilter(e){let s=l(this,at,Ye).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=T(this,at,Lf).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=l(this,at,Ye).get(r),s)return l(this,at,Ye).set(e,s),s;const a=`g_${l(this,Mi)}_luminosity_map_${an(this,Ya)._++}`,o=T(this,at,Xo).call(this,a);l(this,at,Ye).set(e,o),l(this,at,Ye).set(r,o);const c=T(this,at,Yo).call(this,a);return T(this,at,C_).call(this,c),e&&T(this,at,T0).call(this,i,c),o}addHighlightHCMFilter(e,s,i,r,a){var y;const o=`${s}-${i}-${r}-${a}`;let c=l(this,at,fu).get(e);if((c==null?void 0:c.key)===o||(c?((y=c.filter)==null||y.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,at,fu).set(e,c)),!s||!i))return c.url;const[u,h]=[s,i].map(T(this,at,mu).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,v]=[r,a].map(T(this,at,mu).bind(this));f<d&&([d,f,g,v]=[f,d,v,g]),l(this,at,Vo).style.color="";const p=(b,_,S)=>{const R=new Array(256),P=(f-d)/S,I=b/255,M=(_-b)/(255*S);let D=0;for(let $=0;$<=S;$++){const N=Math.round(d+$*P),B=I+$*M;for(let k=D;k<=N;k++)R[k]=B;D=N+1}for(let $=D;$<256;$++)R[$]=R[D-1];return R.join(",")},w=`g_${l(this,Mi)}_hcm_${e}_filter`,m=c.filter=T(this,at,Yo).call(this,w);return T(this,at,C0).call(this,m),T(this,at,gu).call(this,p(g[0],v[0],5),p(g[1],v[1],5),p(g[2],v[2],5),m),c.url=T(this,at,Xo).call(this,w),c.url}destroy(e=!1){var s,i,r,a;e&&((s=l(this,Xa))!=null&&s.size)||((i=l(this,Li))==null||i.parentNode.parentNode.remove(),x(this,Li,null),(r=l(this,jl))==null||r.clear(),x(this,jl,null),(a=l(this,Xa))==null||a.clear(),x(this,Xa,null),x(this,Ya,0))}}Va=new WeakMap,jl=new WeakMap,Li=new WeakMap,Mi=new WeakMap,Ze=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,at=new WeakSet,Ye=function(){return l(this,jl)||x(this,jl,new Map)},fu=function(){return l(this,Xa)||x(this,Xa,new Map)},Vo=function(){if(!l(this,Li)){const e=l(this,Ze).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=l(this,Ze).createElementNS(wi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),x(this,Li,l(this,Ze).createElementNS(wi,"defs")),e.append(i),i.append(l(this,Li)),l(this,Ze).body.append(e)}return l(this,Li)},Lf=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=e,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,o[u]=i[u]/255,c[u]=r[u]/255;return[a.join(","),o.join(","),c.join(",")]},Xo=function(e){if(l(this,Va)===void 0){x(this,Va,"");const s=l(this,Ze).URL;s!==l(this,Ze).baseURI&&(wg(s)?St('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Va,s.split("#",1)[0]))}return`url(${l(this,Va)}#${e})`},C_=function(e){const s=l(this,Ze).createElementNS(wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},C0=function(e){const s=l(this,Ze).createElementNS(wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Yo=function(e){const s=l(this,Ze).createElementNS(wi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,at,Vo).append(s),s},pu=function(e,s,i){const r=l(this,Ze).createElementNS(wi,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},gu=function(e,s,i,r){const a=l(this,Ze).createElementNS(wi,"feComponentTransfer");r.append(a),T(this,at,pu).call(this,a,"feFuncR",e),T(this,at,pu).call(this,a,"feFuncG",s),T(this,at,pu).call(this,a,"feFuncB",i)},T0=function(e,s){const i=l(this,Ze).createElementNS(wi,"feComponentTransfer");s.append(i),T(this,at,pu).call(this,i,"feFuncA",e)},mu=function(e){return l(this,at,Vo).style.color=e,Ay(getComputedStyle(l(this,at,Vo)).getPropertyValue("color"))};class T_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ut("Abstract method `_fetch` called.")}}class P_ extends T_{async _fetch(t){const e=await yg(t,"arraybuffer");return new Uint8Array(e)}}sn&&St("Please use the `legacy` build in Node.js environments.");async function R_(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class HE extends E_{}class UE extends A_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class $E extends S_{async _fetch(t){return R_(t)}}class WE extends T_{async _fetch(t){return R_(t)}}const en={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function P0(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class ky{getPattern(){Ut("Abstract method `getPattern` called.")}}class GE extends ky{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===en.STROKE||i===en.FILL){const a=e.current.getClippedPathBoundingBox(i,Zt(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=ft.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),P0(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else P0(t,this._bbox),r=this._createGradient(t);return r}}function rm(n,t,e,s,i,r,a,o){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=a,a=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=a,a=o,o=f),c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=a,a=f);const g=(c[e]+t.offsetX)*t.scaleX,v=(c[e+1]+t.offsetY)*t.scaleY,p=(c[s]+t.offsetX)*t.scaleX,w=(c[s+1]+t.offsetY)*t.scaleY,m=(c[i]+t.offsetX)*t.scaleX,y=(c[i+1]+t.offsetY)*t.scaleY;if(v>=y)return;const b=u[r],_=u[r+1],S=u[r+2],R=u[a],P=u[a+1],I=u[a+2],M=u[o],D=u[o+1],$=u[o+2],N=Math.round(v),B=Math.round(y);let k,G,Y,H,X,U,K,O;for(let j=N;j<=B;j++){if(j<w){const yt=j<v?0:(v-j)/(v-w);k=g-(g-p)*yt,G=b-(b-R)*yt,Y=_-(_-P)*yt,H=S-(S-I)*yt}else{let yt;j>y?yt=1:w===y?yt=0:yt=(w-j)/(w-y),k=p-(p-m)*yt,G=R-(R-M)*yt,Y=P-(P-D)*yt,H=I-(I-$)*yt}let it;j<v?it=0:j>y?it=1:it=(v-j)/(v-y),X=g-(g-m)*it,U=b-(b-M)*it,K=_-(_-D)*it,O=S-(S-$)*it;const nt=Math.round(Math.min(k,X)),J=Math.round(Math.max(k,X));let vt=d*j+nt*4;for(let yt=nt;yt<=J;yt++)it=(k-yt)/(k-X),it<0?it=0:it>1&&(it=1),h[vt++]=G-(G-U)*it|0,h[vt++]=Y-(Y-K)*it|0,h[vt++]=H-(H-O)*it|0,h[vt++]=255}}function VE(n,t,e){const s=t.coords,i=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,c=Math.floor(s.length/o)-1,u=o-1;for(r=0;r<c;r++){let h=r*o;for(let d=0;d<u;d++,h++)rm(n,e,s[h],s[h+1],s[h+o],i[h],i[h+1],i[h+o]),rm(n,e,s[h+o+1],s[h+1],s[h+o],i[h+o+1],i[h+1],i[h+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)rm(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class XE extends ky{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),g=u/d,v=h/f,p={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/g,scaleY:1/v},w=d+2*2,m=f+2*2,y=s.getCanvas("mesh",w,m),b=y.context,_=b.createImageData(d,f);if(e){const R=_.data;for(let P=0,I=R.length;P<I;P+=4)R[P]=e[0],R[P+1]=e[1],R[P+2]=e[2],R[P+3]=255}for(const R of this._figures)VE(_,R,p);return b.putImageData(_,2,2),{canvas:y.canvas,offsetX:o-2*g,offsetY:c-2*v,scaleX:g,scaleY:v}}getPattern(t,e,s,i){P0(t,this._bbox);let r;if(i===en.SHADING)r=ft.singularValueDecompose2dScale(Zt(t));else if(r=ft.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=ft.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,i===en.SHADING?null:this._background,e.cachedCanvases);return i!==en.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class YE extends ky{getPattern(){return"hotpink"}}function qE(n){switch(n[0]){case"RadialAxial":return new GE(n);case"Mesh":return new XE(n);case"Dummy":return new YE}throw new Error(`Unknown IR type: ${n[0]}`)}const e1={COLORED:1,UNCOLORED:2},Bp=class Bp{constructor(t,e,s,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),mg("TilingType: "+r);const h=e[0],d=e[1],f=e[2],g=e[3],v=f-h,p=g-d,w=ft.singularValueDecompose2dScale(this.matrix),m=ft.singularValueDecompose2dScale(this.baseTransform),y=w[0]*m[0],b=w[1]*m[1];let _=v,S=p,R=!1,P=!1;const I=Math.ceil(c*y),M=Math.ceil(u*b),D=Math.ceil(v*y),$=Math.ceil(p*b);I>=D?_=c:R=!0,M>=$?S=u:P=!0;const N=this.getSizeAndScale(_,this.ctx.canvas.width,y),B=this.getSizeAndScale(S,this.ctx.canvas.height,b),k=t.cachedCanvases.getCanvas("pattern",N.size,B.size),G=k.context,Y=o.createCanvasGraphics(G);if(Y.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Y,i,a),G.translate(-N.scale*h,-B.scale*d),Y.transform(N.scale,0,0,B.scale,0,0),G.save(),this.clipBbox(Y,h,d,f,g),Y.baseTransform=Zt(Y.ctx),Y.executeOperatorList(s),Y.endDrawing(),G.restore(),R||P){const H=k.canvas;R&&(_=c),P&&(S=u);const X=this.getSizeAndScale(_,this.ctx.canvas.width,y),U=this.getSizeAndScale(S,this.ctx.canvas.height,b),K=X.size,O=U.size,j=t.cachedCanvases.getCanvas("pattern-workaround",K,O),it=j.context,nt=R?Math.floor(v/c):0,J=P?Math.floor(p/u):0;for(let vt=0;vt<=nt;vt++)for(let yt=0;yt<=J;yt++)it.drawImage(H,K*vt,O*yt,K,O,0,0,K,O);return{canvas:j.canvas,scaleX:X.scale,scaleY:U.scale,offsetX:h,offsetY:d}}return{canvas:k.canvas,scaleX:N.scale,scaleY:B.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,s){const i=Math.max(Bp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const a=i-e,o=r-s;t.ctx.rect(e,s,a,o),t.current.updateRectMinMax(Zt(t.ctx),[e,s,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case e1.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case e1.UNCOLORED:const o=ft.makeHexColor(s[0],s[1],s[2]);i.fillStyle=o,i.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new xE(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,i){let r=s;i!==en.SHADING&&(r=ft.transform(r,e.baseTransform),this.matrix&&(r=ft.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};gt(Bp,"MAX_PATTERN_SIZE",3e3);let R0=Bp;function KE({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=pn.isLittleEndian?4278190080:255,[c,u]=a?[r,o]:[o,r],h=s>>3,d=s&7,f=n.length;e=new Uint32Array(e.buffer);let g=0;for(let v=0;v<i;v++){for(const w=t+h;t<w;t++){const m=t<f?n[t]:255;e[g++]=m&128?u:c,e[g++]=m&64?u:c,e[g++]=m&32?u:c,e[g++]=m&16?u:c,e[g++]=m&8?u:c,e[g++]=m&4?u:c,e[g++]=m&2?u:c,e[g++]=m&1?u:c}if(d===0)continue;const p=t<f?n[t++]:255;for(let w=0;w<d;w++)e[g++]=p&1<<7-w?u:c}return{srcPos:t,destPos:g}}const n1=16,s1=100,ZE=15,i1=10,r1=1e3,kn=16;function QE(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(s,i){t.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){t.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,a,o,c){t.transform(s,i,r,a,o,c),this.__originalTransform(s,i,r,a,o,c)},n.setTransform=function(s,i,r,a,o,c){t.setTransform(s,i,r,a,o,c),this.__originalSetTransform(s,i,r,a,o,c)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){t.rotate(s),this.__originalRotate(s)},n.clip=function(s){t.clip(s),this.__originalClip(s)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,a,o){t.bezierCurveTo(e,s,i,r,a,o),this.__originalBezierCurveTo(e,s,i,r,a,o)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class JE{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function lf(n,t,e,s,i,r,a,o,c,u){const[h,d,f,g,v,p]=Zt(n);if(d===0&&f===0){const y=a*h+v,b=Math.round(y),_=o*g+p,S=Math.round(_),R=(a+c)*h+v,P=Math.abs(Math.round(R)-b)||1,I=(o+u)*g+p,M=Math.abs(Math.round(I)-S)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),b,S),n.drawImage(t,e,s,i,r,0,0,P,M),n.setTransform(h,d,f,g,v,p),[P,M]}if(h===0&&g===0){const y=o*f+v,b=Math.round(y),_=a*d+p,S=Math.round(_),R=(o+u)*f+v,P=Math.abs(Math.round(R)-b)||1,I=(a+c)*d+p,M=Math.abs(Math.round(I)-S)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,b,S),n.drawImage(t,e,s,i,r,0,0,M,P),n.setTransform(h,d,f,g,v,p),[M,P]}n.drawImage(t,e,s,i,r,a,o,c,u);const w=Math.hypot(h,d),m=Math.hypot(f,g);return[w*c,m*u]}function tC(n){const{width:t,height:e}=n;if(t>r1||e>r1)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),o,c,u;const h=t+7&-8;let d=new Uint8Array(h*e),f=0;for(const m of n.data){let y=128;for(;y>0;)d[f++]=m&y?0:255,y>>=1}let g=0;for(f=0,d[f]!==0&&(a[0]=1,++g),c=1;c<t;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++g),f++;for(d[f]!==0&&(a[c]=2,++g),o=1;o<e;o++){f=o*h,u=o*r,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++g);let m=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<t;c++)m=(m>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[m]&&(a[u+c]=i[m],++g),f++;if(d[f-h]!==d[f]&&(a[u+c]=d[f]?2:4,++g),g>s)return null}for(f=h*(e-1),u=o*r,d[f]!==0&&(a[u]=8,++g),c=1;c<t;c++)d[f]!==d[f+1]&&(a[u+c]=d[f]?4:8,++g),f++;if(d[f]!==0&&(a[u+c]=4,++g),g>s)return null;const v=new Int32Array([0,r,-1,0,-r,0,0,0,1]),p=new Path2D;for(o=0;g&&o<=e;o++){let m=o*r;const y=m+t;for(;m<y&&!a[m];)m++;if(m===y)continue;p.moveTo(m%r,o);const b=m;let _=a[m];do{const S=v[_];do m+=S;while(!a[m]);const R=a[m];R!==5&&R!==10?(_=R,a[m]=0):(_=R&51*_>>4,a[m]&=_>>2|_<<2),p.lineTo(m%r,m/r|0),a[m]||--g}while(b!==m);--o}return d=null,a=null,function(m){m.save(),m.scale(1/t,-1/e),m.translate(0,-e),m.fill(p),m.beginPath(),m.restore()}}class a1{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Bx,this.textMatrixScale=1,this.fontMatrix=i0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Xe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=ft.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=ft.applyTransform(e,t),i=ft.applyTransform(e.slice(2),t),r=ft.applyTransform([e[0],e[3]],t),a=ft.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],a[1])}updateScalingPathMinMax(t,e){ft.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,i,r,a,o,c,u,h){const d=ft.bezierBoundingBox(e,s,i,r,a,o,c,u,h);h||this.updateRectMinMax(t,d)}getPathBoundingBox(t=en.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===en.STROKE){e||Ut("Stroke bounding box must include transform.");const i=ft.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=a,s[2]+=r,s[3]+=a}return s}updateClipFromPath(){const t=ft.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=en.FILL,e=null){return ft.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function o1(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%kn,r=(e-i)/kn,a=i===0?r:r+1,o=n.createImageData(s,kn);let c=0,u;const h=t.data,d=o.data;let f,g,v,p;if(t.kind===Af.GRAYSCALE_1BPP){const w=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,b=s+7>>3,_=4294967295,S=pn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(v=f<r?kn:i,u=0,g=0;g<v;g++){const R=w-c;let P=0;const I=R>b?s:R*8-7,M=I&-8;let D=0,$=0;for(;P<M;P+=8)$=h[c++],m[u++]=$&128?_:S,m[u++]=$&64?_:S,m[u++]=$&32?_:S,m[u++]=$&16?_:S,m[u++]=$&8?_:S,m[u++]=$&4?_:S,m[u++]=$&2?_:S,m[u++]=$&1?_:S;for(;P<I;P++)D===0&&($=h[c++],D=128),m[u++]=$&D?_:S,D>>=1}for(;u<y;)m[u++]=0;n.putImageData(o,0,f*kn)}}else if(t.kind===Af.RGBA_32BPP){for(g=0,p=s*kn*4,f=0;f<r;f++)d.set(h.subarray(c,c+p)),c+=p,n.putImageData(o,0,g),g+=kn;f<a&&(p=s*i*4,d.set(h.subarray(c,c+p)),n.putImageData(o,0,g))}else if(t.kind===Af.RGB_24BPP)for(v=kn,p=s*v,f=0;f<a;f++){for(f>=r&&(v=i,p=s*v),u=0,g=p;g--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,f*kn)}else throw new Error(`bad image kind: ${t.kind}`)}function l1(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%kn,r=(e-i)/kn,a=i===0?r:r+1,o=n.createImageData(s,kn);let c=0;const u=t.data,h=o.data;for(let d=0;d<a;d++){const f=d<r?kn:i;({srcPos:c}=KE({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(o,0,d*kn)}}function eu(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function cf(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!sn){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function c1(n,t){if(t)return!0;const e=ft.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*ua.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const eC=["butt","round","square"],nC=["miter","round","bevel"],sC={},u1={};var Us,N0,I0,L0;const Ry=class Ry{constructor(t,e,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},c,u){C(this,Us);this.ctx=t,this.current=new a1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new JE(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),cf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,a=t.fnArray;let o=e||0;const c=r.length;if(c===o)return o;const u=c-o>i1&&typeof s=="function",h=u?Date.now()+ZE:0;let d=0;const f=this.commonObjs,g=this.objs;let v;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,s),o;if(v=a[o],v!==xs.dependency)this[v].apply(this,r[o]);else for(const p of r[o]){const w=p.startsWith("g_")?f:g;if(!w.has(p))return w.get(p,s),o}if(o++,o===c)return o;if(u&&++d>i1){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){T(this,Us,N0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),T(this,Us,I0).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=s,c=i,u="prescale1",h,d;for(;r>2&&o>1||a>2&&c>1;){let f=o,g=c;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(t,0,0,o,c,0,0,f,g),t=h.canvas,o=f,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,a=this.current.patternFill,o=Zt(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const I=t.bitmap||t.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(I),c||(c=new Map,this._cachedBitmapsMap.set(I,c));const M=c.get(u);if(M&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),$=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:D,offsetY:$}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),l1(d.context,t));let f=ft.transform(o,[1/s,0,0,-1/i,0,0]);f=ft.transform(f,[1,0,0,1,0,-i]);const[g,v,p,w]=ft.getAxialAlignedBoundingBox([0,0,s,i],f),m=Math.round(p-g)||1,y=Math.round(w-v)||1,b=this.cachedCanvases.getCanvas("fillCanvas",m,y),_=b.context,S=g,R=v;_.translate(-S,-R),_.transform(...f),h||(h=this._scaleImage(d.canvas,Vs(_)),h=h.img,c&&a&&c.set(u,h)),_.imageSmoothingEnabled=c1(Zt(_),t.interpolate),lf(_,h,0,0,h.width,h.height,0,0,s,i),_.globalCompositeOperation="source-in";const P=ft.transform(Vs(_),[1,0,0,1,-S,-R]);return _.fillStyle=a?r.getPattern(e,this,P,en.FILL):r,_.fillRect(0,0,s,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,b.canvas)),{canvas:b.canvas,offsetX:Math.round(S),offsetY:Math.round(R)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=eC[t]}setLineJoin(t){this.ctx.lineJoin=nC[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Zt(this.suspendedCtx)),eu(this.suspendedCtx,r),QE(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),eu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],a=i[1],o=i[2]-r,c=i[3]-a;o===0||c===0||(this.genericComposeSMask(e.context,s,o,c,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,a,o,c,u,h,d){let f=t.canvas,g=c-h,v=u-d;if(a){const w=ft.makeHexColor(...a);if(g<0||v<0||g+s>f.width||v+i>f.height){const m=this.cachedCanvases.getCanvas("maskExtension",s,i),y=m.context;y.drawImage(f,-g,-v),y.globalCompositeOperation="destination-atop",y.fillStyle=w,y.fillRect(0,0,s,i),y.globalCompositeOperation="source-over",f=m.canvas,g=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(g,v,s,i),t.clip(m),t.globalCompositeOperation="destination-atop",t.fillStyle=w,t.fillRect(g,v,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const p=new Path2D;p.rect(c,u,s,i),e.clip(p),e.globalCompositeOperation="destination-in",e.drawImage(f,g,v,s,i,c,u,s,i),e.restore()}save(){this.inSMaskMode?(eu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),eu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,i,r,a){this.ctx.transform(t,e,s,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const i=this.ctx,r=this.current;let a=r.x,o=r.y,c,u;const h=Zt(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let g=0,v=0,p=t.length;g<p;g++)switch(t[g]|0){case xs.rectangle:a=e[v++],o=e[v++];const w=e[v++],m=e[v++],y=a+w,b=o+m;i.moveTo(a,o),w===0||m===0?i.lineTo(y,b):(i.lineTo(y,o),i.lineTo(y,b),i.lineTo(a,b)),d||r.updateRectMinMax(h,[a,o,y,b]),i.closePath();break;case xs.moveTo:a=e[v++],o=e[v++],i.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case xs.lineTo:a=e[v++],o=e[v++],i.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case xs.curveTo:c=a,u=o,a=e[v+4],o=e[v+5],i.bezierCurveTo(e[v],e[v+1],e[v+2],e[v+3],a,o),r.updateCurvePathMinMax(h,c,u,e[v],e[v+1],e[v+2],e[v+3],a,o,f),v+=6;break;case xs.curveTo2:c=a,u=o,i.bezierCurveTo(a,o,e[v],e[v+1],e[v+2],e[v+3]),r.updateCurvePathMinMax(h,c,u,a,o,e[v],e[v+1],e[v+2],e[v+3],f),a=e[v+2],o=e[v+3],v+=4;break;case xs.curveTo3:c=a,u=o,a=e[v+2],o=e[v+3],i.bezierCurveTo(e[v],e[v+1],a,o,a,o),r.updateCurvePathMinMax(h,c,u,e[v],e[v+1],a,o,a,o,f),v+=4;break;case xs.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,Vs(e),en.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=s.getPattern(e,this,Vs(e),en.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sC}eoClip(){this.pendingClip=u1}beginText(){this.current.textMatrix=Bx,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:a,y:o,fontSize:c,path:u}of t)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(a,o).scale(c,-c));e.clip(s),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||i0,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const c=s.italic?"italic":"normal";let u=e;e<n1?u=n1:e>s1&&(u=s1),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,i,r,a){this.current.textMatrix=[t,e,s,i,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const a=this.ctx,o=this.current,c=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=u&Xe.FILL_STROKE_MASK,f=!!(u&Xe.ADD_TO_PATH_FLAG),g=o.patternFill&&!c.missingFile,v=o.patternStroke&&!c.missingFile;let p;if((c.disableFontFace||f||g||v)&&(p=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||v){if(a.save(),a.translate(e,s),a.scale(h,-h),d===Xe.FILL||d===Xe.FILL_STROKE)if(i){const w=a.getTransform();a.setTransform(...i),a.fill(T(this,Us,L0).call(this,p,w,i))}else a.fill(p);if(d===Xe.STROKE||d===Xe.FILL_STROKE)if(r){const w=a.getTransform();a.setTransform(...r),a.stroke(T(this,Us,L0).call(this,p,w,r))}else a.lineWidth/=h,a.stroke(p);a.restore()}else(d===Xe.FILL||d===Xe.FILL_STROKE)&&a.fillText(t,e,s),(d===Xe.STROKE||d===Xe.FILL_STROKE)&&a.strokeText(t,e,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Zt(a),x:e,y:s,fontSize:h,path:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return Ct(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,a=e.fontSizeScale,o=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=s.vertical,g=f?1:-1,v=s.defaultVMetrics,p=i*e.fontMatrix[0],w=e.textRenderingMode===Xe.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let m,y;if(e.patternFill){r.save();const P=e.fillColor.getPattern(r,this,Vs(r),en.FILL);m=Zt(r),r.restore(),r.fillStyle=P}if(e.patternStroke){r.save();const P=e.strokeColor.getPattern(r,this,Vs(r),en.STROKE);y=Zt(r),r.restore(),r.strokeStyle=P}let b=e.lineWidth;const _=e.textMatrixScale;if(_===0||b===0){const P=e.textRenderingMode&Xe.FILL_STROKE_MASK;(P===Xe.STROKE||P===Xe.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=_;if(a!==1&&(r.scale(a,a),b/=a),r.lineWidth=b,s.isInvalidPDFjsFont){const P=[];let I=0;for(const M of t)P.push(M.unicode),I+=M.width;r.fillText(P.join(""),0,0),e.x+=I*p*h,r.restore(),this.compose();return}let S=0,R;for(R=0;R<d;++R){const P=t[R];if(typeof P=="number"){S+=g*P*i/1e3;continue}let I=!1;const M=(P.isSpace?c:0)+o,D=P.fontChar,$=P.accent;let N,B,k=P.width;if(f){const Y=P.vmetric||v,H=-(P.vmetric?Y[1]:k*.5)*p,X=Y[2]*p;k=Y?-Y[0]:k,N=H/a,B=(S+X)/a}else N=S/a,B=0;if(s.remeasure&&k>0){const Y=r.measureText(D).width*1e3/i*a;if(k<Y&&this.isFontSubpixelAAEnabled){const H=k/Y;I=!0,r.save(),r.scale(H,1),N/=H}else k!==Y&&(N+=(k-Y)/2e3*i/a)}if(this.contentVisible&&(P.isInFont||s.missingFile)){if(w&&!$)r.fillText(D,N,B);else if(this.paintChar(D,N,B,m,y),$){const Y=N+i*$.offset.x/a,H=B-i*$.offset.y/a;this.paintChar($.fontChar,Y,H,m,y)}}const G=f?k*p-M*u:k*p+M*u;S+=G,I&&r.restore()}f?e.y-=S:e.x+=S*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||i0,f=t.length,g=s.textRenderingMode===Xe.INVISIBLE;let v,p,w,m;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(h,a),v=0;v<f;++v){if(p=t[v],typeof p=="number"){m=o*p*r/1e3,this.ctx.translate(m,0),s.x+=m*h;continue}const y=(p.isSpace?u:0)+c,b=i.charProcOperatorList[p.operatorListId];if(!b){St(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(b),this.restore()),w=ft.applyTransform([p.width,0],d)[0]*r+y,e.translate(w,0),s.x+=w*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,a){this.ctx.rect(s,i,r-s,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],i=this.baseTransform||Zt(this.ctx),r={createCanvasGraphics:a=>new Ry(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new R0(t,s,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=ft.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=ft.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=qE(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,Vs(e),en.SHADING);const i=Vs(e);if(i){const{width:r,height:a}=e.canvas,[o,c,u,h]=ft.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ut("Should not call beginInlineImage")}beginImageData(){Ut("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Zt(this.ctx),e)){const s=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],s,i),this.current.updateRectMinMax(Zt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||mg("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const s=Zt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=ft.getAxialAlignedBoundingBox(t.bbox,Zt(e));const r=[0,0,e.canvas.width,e.canvas.height];i=ft.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-o),f.transform(...s),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),eu(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Zt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=ft.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(T(this,Us,N0).call(this),cf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[c,u]=ft.singularValueDecompose2dScale(Zt(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:g,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),cf(this.ctx)}else cf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new a1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),T(this,Us,I0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=tC(t)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(t),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const c=Zt(o);o.transform(e,s,i,r,0,0);const u=this._createMaskCanvas(t);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=ft.transform(c,[e,s,i,r,a[h],a[h+1]]),[g,v]=ft.applyTransform([0,0],f);o.drawImage(u.canvas,g,v)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:a,width:o,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const f=this.getObject(a,r);l1(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,Vs(e),en.FILL):s,d.fillRect(0,0,o,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),lf(e,h.canvas,0,0,o,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){St("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[e,0,0,s,i[u],i[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;if(this.save(),!sn){const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none")}i.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,s).context;o1(c,t),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,Vs(i));i.imageSmoothingEnabled=c1(Zt(i),t.interpolate),lf(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;o1(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),lf(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===u1?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)a=o=1/c;else{const h=c*t;a=o=h<1?1/h:1}else if(t===0)a=1/c,o=1/u;else{const h=c*t,d=u*t;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(e*r-s*i),u=Math.hypot(e,s),h=Math.hypot(i,r);if(t===0)a=h/c,o=u/c;else{const d=t*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=s||1,i===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(i,r),a.length>0){const o=Math.max(i,r);e.setLineDash(a.map(c=>c/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Us=new WeakSet,N0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},I0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},L0=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let bl=Ry;for(const n in xs)bl.prototype[n]!==void 0&&(bl.prototype[xs[n]]=bl.prototype[n]);var Nh,Ih;class Zi{static get workerPort(){return l(this,Nh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Nh,t)}static get workerSrc(){return l(this,Ih)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Ih,t)}}Nh=new WeakMap,Ih=new WeakMap,C(Zi,Nh,null),C(Zi,Ih,"");var qa,Lh;class iC{constructor({parsedData:t,rawData:e}){C(this,qa);C(this,Lh);x(this,qa,t),x(this,Lh,e)}getRaw(){return l(this,Lh)}get(t){return l(this,qa).get(t)??null}getAll(){return yy(l(this,qa))}has(t){return l(this,qa).has(t)}}qa=new WeakMap,Lh=new WeakMap;const qo=Symbol("INTERNAL");var Mh,Fh,Dh,zl;class rC{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){C(this,Mh,!1);C(this,Fh,!1);C(this,Dh,!1);C(this,zl,!0);x(this,Mh,!!(t&$n.DISPLAY)),x(this,Fh,!!(t&$n.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(l(this,Dh))return l(this,zl);if(!l(this,zl))return!1;const{print:t,view:e}=this.usage;return l(this,Mh)?(e==null?void 0:e.viewState)!=="OFF":l(this,Fh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==qo&&Ut("Internal method `_setVisible` called."),x(this,Dh,s),x(this,zl,e)}}Mh=new WeakMap,Fh=new WeakMap,Dh=new WeakMap,zl=new WeakMap;var Nr,jt,Bl,Hl,Oh,M0;class aC{constructor(t,e=$n.DISPLAY){C(this,Oh);C(this,Nr,null);C(this,jt,new Map);C(this,Bl,null);C(this,Hl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,Hl,t.order);for(const s of t.groups)l(this,jt).set(s.id,new rC(e,s));if(t.baseState==="OFF")for(const s of l(this,jt).values())s._setVisible(qo,!1);for(const s of t.on)l(this,jt).get(s)._setVisible(qo,!0);for(const s of t.off)l(this,jt).get(s)._setVisible(qo,!1);x(this,Bl,this.getHash())}}isVisible(t){if(l(this,jt).size===0)return!0;if(!t)return mg("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,jt).has(t.id)?l(this,jt).get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return T(this,Oh,M0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,jt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,jt).get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=l(this,jt).get(t);if(!i){St(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==t&&((r=l(this,jt).get(o))==null||r._setVisible(qo,!1,!0));i._setVisible(qo,!!e,!0),x(this,Nr,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=l(this,jt).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}x(this,Nr,null)}get hasInitialVisibility(){return l(this,Bl)===null||this.getHash()===l(this,Bl)}getOrder(){return l(this,jt).size?l(this,Hl)?l(this,Hl).slice():[...l(this,jt).keys()]:null}getGroups(){return l(this,jt).size>0?yy(l(this,jt)):null}getGroup(t){return l(this,jt).get(t)||null}getHash(){if(l(this,Nr)!==null)return l(this,Nr);const t=new v_;for(const[e,s]of l(this,jt))t.update(`${e}:${s.visible}`);return x(this,Nr,t.hexdigest())}}Nr=new WeakMap,jt=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,Oh=new WeakSet,M0=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let a;if(Array.isArray(r))a=T(this,Oh,M0).call(this,r);else if(l(this,jt).has(r))a=l(this,jt).get(r).visible;else return St(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class oC{constructor(t,{disableRange:e=!1,disableStream:s=!1}){we(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});we(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){we(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new lC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new cC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class lC{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=xy(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cC{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uC(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let h=o(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=a(n),e){const h=u(e);return r(h)}if(e=s("filename","i").exec(n),e){e=e[1];let h=o(e);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=vg(d);d=f.decode(g),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,p,w,m]=f;if(p=parseInt(p,10),p in d){if(p===0)break;continue}d[p]=[w,m]}const v=[];for(let p=0;p<d.length&&p in d;++p){let[w,m]=d[p];m=o(m),w&&(m=unescape(m),p===0&&(m=c(m))),v.push(m)}return v.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),v=h.slice(d+1).replace(/^[^']*'/,"");return i(f,v)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,v){if(g==="q"||g==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,w){return String.fromCharCode(parseInt(w,16))}),i(f,v);try{v=atob(v)}catch{}return i(f,v)})}return""}function N_(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function bg(n){try{return new URL(n).origin}catch{}return null}function I_({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function L_(n){const t=n.get("Content-Disposition");if(t){let e=uC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(xy(e))return e}return null}function xg(n,t){return n===404||n===0&&t.startsWith("file:")?new th('Missing PDF "'+t+'".'):new kp(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function M_(n){return n===200||n===206}function F_(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function D_(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(St(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class h1{constructor(t){gt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=N_(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return we(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new dC(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class hC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,F_(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=bg(r.url),!M_(r.status))throw xg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=I_({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=L_(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ca("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:D_(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class dC{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const a=i.url;fetch(a,F_(r,this._withCredentials,this._abortController)).then(o=>{const c=bg(o.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!M_(o.status))throw xg(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:D_(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const am=200,om=206;function fC(n){const t=n.response;return typeof t!="string"?t:vg(t).buffer}class pC{constructor({url:t,httpHeaders:e,withCredentials:s}){gt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=N_(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=om):i.expectedStatus=am,e.responseType="arraybuffer",we(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||am;if(!(r===am&&s.expectedStatus===om)&&r!==s.expectedStatus){s.onError(i.status);return}const o=fC(i);if(r===om){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:o}):(St('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone({begin:0,chunk:o}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class gC{constructor(t){this._source=t,this._manager=new pC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return we(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new vC(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class mC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=bg(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=I_({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=L_(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=xg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vC{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=bg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=xg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yC=/^[a-z][a-z0-9\-+.]+:/i;function wC(n){if(yC.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class bC{constructor(t){this.source=t,this.url=wC(t.url),we(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return we(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new xC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new _C(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class xC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new th(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ca("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _C{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const AC=1e5,wn=30,SC=.8;var m1,Ir,An,jh,zh,Ka,Fi,Bh,Hh,Za,Ul,$l,Lr,Wl,Uh,Gl,Qa,$h,Wh,Ja,to,Gh,Mr,Vl,lr,O_,j_,F0,qn,Mf,D0,z_,B_;const _e=class _e{constructor({textContentSource:t,container:e,viewport:s}){C(this,lr);C(this,Ir,Promise.withResolvers());C(this,An,null);C(this,jh,!1);C(this,zh,!!((m1=globalThis.FontInspector)!=null&&m1.enabled));C(this,Ka,null);C(this,Fi,null);C(this,Bh,0);C(this,Hh,0);C(this,Za,null);C(this,Ul,null);C(this,$l,0);C(this,Lr,0);C(this,Wl,Object.create(null));C(this,Uh,[]);C(this,Gl,null);C(this,Qa,[]);C(this,$h,new WeakMap);C(this,Wh,null);var c;if(t instanceof ReadableStream)x(this,Gl,t);else if(typeof t=="object")x(this,Gl,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,An,x(this,Ul,e)),x(this,Lr,s.scale*(globalThis.devicePixelRatio||1)),x(this,$l,s.rotation),x(this,Fi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;x(this,Wh,[1,0,0,-1,-a,o+r]),x(this,Hh,i),x(this,Bh,r),T(c=_e,qn,z_).call(c),jo(e,s),l(this,Ir).promise.finally(()=>{l(_e,Vl).delete(this),x(this,Fi,null),x(this,Wl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=pn.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,Za).read().then(({value:e,done:s})=>{if(s){l(this,Ir).resolve();return}l(this,Ka)??x(this,Ka,e.lang),Object.assign(l(this,Wl),e.styles),T(this,lr,O_).call(this,e.items),t()},l(this,Ir).reject)};return x(this,Za,l(this,Gl).getReader()),l(_e,Vl).add(this),t(),l(this,Ir).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==l(this,$l)&&(e==null||e(),x(this,$l,i),jo(l(this,Ul),{rotation:i})),s!==l(this,Lr)){e==null||e(),x(this,Lr,s);const a={div:null,properties:null,ctx:T(r=_e,qn,Mf).call(r,l(this,Ka))};for(const o of l(this,Qa))a.properties=l(this,$h).get(o),a.div=o,T(this,lr,F0).call(this,a)}}cancel(){var e;const t=new ca("TextLayer task cancelled.");(e=l(this,Za))==null||e.cancel(t).catch(()=>{}),x(this,Za,null),l(this,Ir).reject(t)}get textDivs(){return l(this,Qa)}get textContentItemsStr(){return l(this,Uh)}static cleanup(){if(!(l(this,Vl).size>0)){l(this,Ja).clear();for(const{canvas:t}of l(this,to).values())t.remove();l(this,to).clear()}}};Ir=new WeakMap,An=new WeakMap,jh=new WeakMap,zh=new WeakMap,Ka=new WeakMap,Fi=new WeakMap,Bh=new WeakMap,Hh=new WeakMap,Za=new WeakMap,Ul=new WeakMap,$l=new WeakMap,Lr=new WeakMap,Wl=new WeakMap,Uh=new WeakMap,Gl=new WeakMap,Qa=new WeakMap,$h=new WeakMap,Wh=new WeakMap,Ja=new WeakMap,to=new WeakMap,Gh=new WeakMap,Mr=new WeakMap,Vl=new WeakMap,lr=new WeakSet,O_=function(t){var i,r;if(l(this,jh))return;(r=l(this,Fi)).ctx??(r.ctx=T(i=_e,qn,Mf).call(i,l(this,Ka)));const e=l(this,Qa),s=l(this,Uh);for(const a of t){if(e.length>AC){St("Ignoring additional textDivs for performance reasons."),x(this,jh,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,An);x(this,An,document.createElement("span")),l(this,An).classList.add("markedContent"),a.id!==null&&l(this,An).setAttribute("id",`${a.id}`),o.append(l(this,An))}else a.type==="endMarkedContent"&&x(this,An,l(this,An).parentNode);continue}s.push(a.str),T(this,lr,j_).call(this,a)}},j_=function(t){var p;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Qa).push(e);const i=ft.transform(l(this,Wh),t.transform);let r=Math.atan2(i[1],i[0]);const a=l(this,Wl)[t.fontName];a.vertical&&(r+=Math.PI/2);let o=l(this,zh)&&a.fontSubstitution||a.fontFamily;o=_e.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),u=c*T(p=_e,qn,B_).call(p,o,l(this,Ka));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",g=e.style;l(this,An)===l(this,Ul)?(g.left=`${(100*h/l(this,Hh)).toFixed(2)}%`,g.top=`${(100*d/l(this,Bh)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(l(_e,Mr)*c).toFixed(2)}px)`,g.fontFamily=o,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,zh)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);w!==m&&Math.max(w,m)/Math.min(w,m)>1.5&&(v=!0)}if(v&&(s.canvasWidth=a.vertical?t.height:t.width),l(this,$h).set(e,s),l(this,Fi).div=e,l(this,Fi).properties=s,T(this,lr,F0).call(this,l(this,Fi)),s.hasText&&l(this,An).append(e),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,An).append(w)}},F0=function(t){var o;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let a="";if(l(_e,Mr)>1&&(a=`scale(${1/l(_e,Mr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;T(o=_e,qn,D0).call(o,i,h*l(this,Lr),c);const{width:d}=i.measureText(e.textContent);d>0&&(a=`scaleX(${u*l(this,Lr)/d}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},qn=new WeakSet,Mf=function(t=null){let e=l(this,to).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,to).set(t,e),l(this,Gh).set(e,{size:0,family:""})}return e},D0=function(t,e,s){const i=l(this,Gh).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},z_=function(){if(l(this,Mr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,Mr,t.getBoundingClientRect().height),t.remove()},B_=function(t,e){const s=l(this,Ja).get(t);if(s)return s;const i=T(this,qn,Mf).call(this,e);i.canvas.width=i.canvas.height=wn,T(this,qn,D0).call(this,i,wn,t);const r=i.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,Ja).set(t,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,wn,wn),i.strokeText("g",0,0);let c=i.getImageData(0,0,wn,wn).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/wn);break}i.clearRect(0,0,wn,wn),i.strokeText("A",0,wn),c=i.getImageData(0,0,wn,wn).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=wn-Math.floor(h/4/wn);break}i.canvas.width=i.canvas.height=0;const u=a?a/(a+o):SC;return l(this,Ja).set(t,u),u},C(_e,qn),C(_e,Ja,new Map),C(_e,to,new Map),C(_e,Gh,new WeakMap),C(_e,Mr,null),C(_e,Vl,new Set);let eh=_e;class nh{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(nh.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const kC=65536,EC=100,CC=5e3,TC=sn?UE:zE,PC=sn?$E:k_,RC=sn?HE:BE,NC=sn?WE:P_;function IC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new O0,{docId:e}=t,s=n.url?LC(n.url):null,i=n.data?MC(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof H_?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:kC;let h=n.worker instanceof xl?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!wg(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,v=n.cMapPacked!==!1,p=n.CMapReaderFactory||PC,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,m=n.StandardFontDataFactory||NC,y=n.stopAtErrors!==!0,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,S=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!sn,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!sn&&(pn.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:sn,M=n.fontExtraProperties===!0,D=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,N=n.disableRange===!0,B=n.disableStream===!0,k=n.disableAutoFetch===!0,G=n.pdfBug===!0,Y=n.CanvasFactory||TC,H=n.FilterFactory||RC,X=n.enableHWA===!0,U=c?c.length:n.length??NaN,K=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!sn&&!I,O=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:p===k_&&m===P_&&g&&w&&lu(g,document.baseURI)&&lu(w,document.baseURI),j=null;vE(d);const it={canvasFactory:new Y({ownerDocument:$,enableHWA:X}),filterFactory:new H({docId:e,ownerDocument:$}),cMapReaderFactory:O?null:new p({baseUrl:g,isCompressed:v}),standardFontDataFactory:O?null:new m({baseUrl:w})};if(!h){const vt={verbosity:d,port:Zi.workerPort};h=vt.port?xl.fromPort(vt):new xl(vt),t._worker=h}const nt={docId:e,apiVersion:"4.10.38",data:i,password:o,disableAutoFetch:k,rangeChunkSize:u,length:U,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:b,disableFontFace:I,ignoreErrors:y,isEvalSupported:_,isOffscreenCanvasSupported:S,isImageDecoderSupported:R,canvasMaxAreaInBytes:P,fontExtraProperties:M,useSystemFonts:K,cMapUrl:O?g:null,standardFontDataUrl:O?w:null}},J={disableFontFace:I,fontExtraProperties:M,ownerDocument:$,pdfBug:G,styleElement:j,loadingParams:{disableAutoFetch:k,enableXfa:D}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const vt=h.messageHandler.sendWithPromise("GetDocRequest",nt,i?[i.buffer]:null);let yt;if(c)yt=new oC(c,{disableRange:N,disableStream:B});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let bt;if(sn)if(lu(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bt=h1}else bt=bC;else bt=lu(s)?h1:gC;yt=new bt({url:s,length:U,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:N,disableStream:B})}return vt.then(bt=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const It=new du(e,bt,h.port),me=new jC(It,t,yt,J,it);t._transport=me,It.send("Ready",null)})}).catch(t._capability.reject),t}function LC(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(sn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function MC(n){if(sn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function d1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Hp;const Up=class Up{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${an(Up,Hp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Hp=new WeakMap,C(Up,Hp,0);let O0=Up;class H_{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ut("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class FC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fr,Di,us,Ko,Ff;class DC{constructor(t,e,s,i=!1){C(this,us);C(this,Fr,null);C(this,Di,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new Qw:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new U_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Dd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=yr.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var _,S;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:g,cacheKey:v}=f;x(this,Di,!1),T(this,us,Ff).call(this),o||(o=this._transport.getOptionalContentConfig(g));let p=this._intentStates.get(v);p||(p=Object.create(null),this._intentStates.set(v,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const w=!!(g&$n.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(S=this._stats)==null||S.time("Page Request"),this._pumpOperatorList(f));const m=R=>{var P;p.renderTasks.delete(y),(this._maybeCleanupAfterRender||w)&&x(this,Di,!0),T(this,us,Ko).call(this,!w),R?(y.capability.reject(R),this._abortOperatorList({intentState:p,reason:R instanceof Error?R:new Error(R)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new z0({callback:m,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u});(p.renderTasks||(p.renderTasks=new Set)).add(y);const b=y.task;return Promise.all([p.displayReadyCapability.promise,o]).then(([R,P])=>{var I;if(this.destroyed){m();return}if((I=this._stats)==null||I.time("Rendering"),!(P.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:R,optionalContentConfig:P}),y.operatorListChanged()}).catch(m),b}getOperatorList({intent:t="display",annotationMode:e=yr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(t,e,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>nh.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){a.read().then(function({value:c,done:u}){if(u){s(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},i)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),x(this,Di,!1),T(this,us,Ff).call(this),Promise.all(t)}cleanup(t=!1){x(this,Di,!0);const e=T(this,us,Ko).call(this,!1);return t&&e&&this._stats&&(this._stats=new Qw),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&T(this,us,Ko).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();T(this,us,Ko).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof by){let i=EC;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new ca(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Fr=new WeakMap,Di=new WeakMap,us=new WeakSet,Ko=function(t=!1){if(T(this,us,Ff).call(this),!l(this,Di)||this.destroyed)return!1;if(t)return x(this,Fr,setTimeout(()=>{x(this,Fr,null),T(this,us,Ko).call(this,!1)},CC)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Di,!1),!0},Ff=function(){l(this,Fr)&&(clearTimeout(l(this,Fr)),x(this,Fr,null))};var Oi,$p;class OC{constructor(){C(this,Oi,new Map);C(this,$p,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,$p).then(()=>{for(const[i]of l(this,Oi))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}l(this,Oi).set(e,i)}removeEventListener(t,e){const s=l(this,Oi).get(e);s==null||s(),l(this,Oi).delete(e)}terminate(){for(const[,t]of l(this,Oi))t==null||t();l(this,Oi).clear()}}Oi=new WeakMap,$p=new WeakMap;var Wp,eo,no,Xl,Df,Yl,Of;const Kt=class Kt{constructor({name:t=null,port:e=null,verbosity:s=yE()}={}){C(this,Xl);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=l(Kt,no))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(Kt,no)||x(Kt,no,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new du("main","worker",t),this._messageHandler.on("ready",function(){}),T(this,Xl,Df).call(this)}_initialize(){if(l(Kt,eo)||l(Kt,Yl,Of)){this._setupFakeWorker();return}let{workerSrc:t}=Kt;try{Kt._isSameOrigin(window.location.href,t)||(t=Kt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new du("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,T(this,Xl,Df).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{mg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Kt,eo)||(St("Setting up fake worker."),x(Kt,eo,!0)),Kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new OC;this._port=e;const s=`fake${an(Kt,Wp)._++}`,i=new du(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new du(s,s+"_worker",e),T(this,Xl,Df).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=l(Kt,no))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,no))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Kt(t)}static get workerSrc(){if(Zi.workerSrc)return Zi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>l(this,Yl,Of)?l(this,Yl,Of):(await import(this.workerSrc)).WorkerMessageHandler)())}};Wp=new WeakMap,eo=new WeakMap,no=new WeakMap,Xl=new WeakSet,Df=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Yl=new WeakSet,Of=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},C(Kt,Yl),C(Kt,Wp,0),C(Kt,eo,!1),C(Kt,no),sn&&(x(Kt,eo,!0),Zi.workerSrc||(Zi.workerSrc="./pdf.worker.mjs")),Kt._isSameOrigin=(t,e)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(e,s);return s.origin===i.origin},Kt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let xl=Kt;var ji,ri,ql,Kl,zi,so,vu;class jC{constructor(t,e,s,i,r){C(this,so);C(this,ji,new Map);C(this,ri,new Map);C(this,ql,new Map);C(this,Kl,new Map);C(this,zi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new U_,this.fontLoader=new OE({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ct(this,"annotationStorage",new Sy)}getRenderingIntent(t,e=yr.ENABLE,s=null,i=!1,r=!1){let a=$n.DISPLAY,o=E0;switch(t){case"any":a=$n.ANY;break;case"display":break;case"print":a=$n.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const c=a&$n.PRINT&&s instanceof w_?s:this.annotationStorage;switch(e){case yr.DISABLE:a+=$n.ANNOTATIONS_DISABLE;break;case yr.ENABLE:break;case yr.ENABLE_FORMS:a+=$n.ANNOTATIONS_FORMS;break;case yr.ENABLE_STORAGE:a+=$n.ANNOTATIONS_STORAGE,o=c.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(a+=$n.IS_EDITING),r&&(a+=$n.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,zi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of l(this,ri).values())t.push(i._destroy());l(this,ri).clear(),l(this,ql).clear(),l(this,Kl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,ji).clear(),this.filterFactory.destroy(),eh.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new ca("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{we(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}we(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async s=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(s,i)=>{we(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}we(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new FC(s,this))}),t.on("DocException",s=>{e._capability.reject(bn(s))}),t.on("PasswordRequest",s=>{x(this,zi,Promise.withResolvers());try{if(!e.onPassword)throw bn(s);const i=r=>{r instanceof Error?l(this,zi).reject(r):l(this,zi).resolve({password:r})};e.onPassword(i,s.code)}catch(i){l(this,zi).reject(i)}return l(this,zi).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,ri).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const g=r.error;St(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,d=new jE(r,{disableFontFace:o,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;we(f,"The imageRef must be defined.");for(const g of l(this,ri).values())for(const[,v]of g.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(s,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,a])=>{var c;if(this.destroyed)return;const o=l(this,ri).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(s,a),(a==null?void 0:a.dataLen)>fE&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,ql).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Kl).set(r.refStr,t);const a=new DC(e,r,this,this._params.pdfBug);return l(this,ri).set(e,a),a});return l(this,ql).set(e,i),i}getPageIndex(t){return d1(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return T(this,so,vu).call(this,"GetFieldObjects")}hasJSActions(){return T(this,so,vu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return T(this,so,vu).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return T(this,so,vu).call(this,"GetOptionalContentConfig").then(e=>new aC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,ji).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new iC(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,ji).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,ri).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,ji).clear(),this.filterFactory.destroy(!0),eh.cleanup()}}cachedPageNumber(t){if(!d1(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Kl).get(e)??null}}ji=new WeakMap,ri=new WeakMap,ql=new WeakMap,Kl=new WeakMap,zi=new WeakMap,so=new WeakSet,vu=function(t,e=null){const s=l(this,ji).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return l(this,ji).set(t,i),i};const nu=Symbol("INITIAL_DATA");var Mn,Vh,j0;class U_{constructor(){C(this,Vh);C(this,Mn,Object.create(null))}get(t,e=null){if(e){const i=T(this,Vh,j0).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=l(this,Mn)[t];if(!s||s.data===nu)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,Mn)[t];return!!e&&e.data!==nu}delete(t){const e=l(this,Mn)[t];return!e||e.data===nu?!1:(delete l(this,Mn)[t],!0)}resolve(t,e=null){const s=T(this,Vh,j0).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,Mn)){const{data:s}=l(this,Mn)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}x(this,Mn,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Mn)){const{data:e}=l(this,Mn)[t];e!==nu&&(yield[t,e])}}}Mn=new WeakMap,Vh=new WeakSet,j0=function(t){var e;return(e=l(this,Mn))[t]||(e[t]={...Promise.withResolvers(),data:nu})};var Dr;class zC{constructor(t){C(this,Dr,null);x(this,Dr,t),this.onContinue=null}get promise(){return l(this,Dr).capability.promise}cancel(t=0){l(this,Dr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Dr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Dr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Dr=new WeakMap;var Or,io;const _a=class _a{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){C(this,Or,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(_a,io).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(_a,io).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:a}=this.params;this.gfx=new bl(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,Or)&&(window.cancelAnimationFrame(l(this,Or)),x(this,Or,null)),l(_a,io).delete(this._canvas),this.callback(t||new by(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Or,window.requestAnimationFrame(()=>{x(this,Or,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(_a,io).delete(this._canvas),this.callback())))}};Or=new WeakMap,io=new WeakMap,C(_a,io,new WeakSet);let z0=_a;const BC="4.10.38",HC="f9bea397f";function f1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function su(n){return Math.max(0,Math.min(255,255*n))}class p1{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=su(t),[t,t,t]}static G_HTML([t]){const e=f1(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(su)}static RGB_HTML(t){return`#${t.map(f1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[su(1-Math.min(1,t+i)),su(1-Math.min(1,s+i)),su(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class UC{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ut("Abstract method `_createSVG` called.")}}class Ey extends UC{_createSVG(t){return document.createElementNS(wi,t)}}class $_{static setupStorage(t,e,s,i,r){const a=i.getValue(e,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?t.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",o=>{i.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}o&&r.addLinkAttributes(t,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(t,a.dataId,e,s)}static render(t){var d,f;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",c=t.div;if(c.append(a),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);a.append(g),o&&nh.shouldBuildText(i.name)&&u.push(g)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[g,v,p]=h.at(-1);if(v+1===g.children.length){h.pop();continue}const w=g.children[++h.at(-1)[1]];if(w===null)continue;const{name:m}=w;if(m==="#text"){const b=document.createTextNode(w.value);u.push(b),p.append(b);continue}const y=(d=w==null?void 0:w.attributes)!=null&&d.xmlns?document.createElementNS(w.attributes.xmlns,m):document.createElement(m);if(p.append(y),w.attributes&&this.setAttributes({html:y,element:w,storage:e,intent:r,linkService:s}),((f=w.children)==null?void 0:f.length)>0)h.push([w,-1,y]);else if(w.value){const b=document.createTextNode(w.value);o&&nh.shouldBuildText(m)&&u.push(b),y.append(b)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const jd=1e3,$C=9,Bo=new WeakSet;function ra(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class WC{static create(t){switch(t.data.annotationType){case xe.LINK:return new W_(t);case xe.TEXT:return new GC(t);case xe.WIDGET:switch(t.data.fieldType){case"Tx":return new VC(t);case"Btn":return t.data.radioButton?new X_(t):t.data.checkBox?new YC(t):new qC(t);case"Ch":return new KC(t);case"Sig":return new XC(t)}return new Wo(t);case xe.POPUP:return new H0(t);case xe.FREETEXT:return new Q_(t);case xe.LINE:return new QC(t);case xe.SQUARE:return new JC(t);case xe.CIRCLE:return new tT(t);case xe.POLYLINE:return new J_(t);case xe.CARET:return new nT(t);case xe.INK:return new Cy(t);case xe.POLYGON:return new eT(t);case xe.HIGHLIGHT:return new tA(t);case xe.UNDERLINE:return new sT(t);case xe.SQUIGGLY:return new iT(t);case xe.STRIKEOUT:return new rT(t);case xe.STAMP:return new eA(t);case xe.FILEATTACHMENT:return new aT(t);default:return new ge(t)}}}var ro,Zl,Ql,Xh,B0;const Ny=class Ny{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){C(this,Xh);C(this,ro,null);C(this,Zl,!1);C(this,Ql,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ny._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,ro)||x(this,ro,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&T(this,Xh,B0).call(this,e),(s=l(this,Ql))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,ro)&&(T(this,Xh,B0).call(this,l(this,ro).rect),(t=l(this,Ql))==null||t.popup.resetEdited(),x(this,ro,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Wo||(r.tabIndex=jd);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof H0){const{rotation:p}=e;return!e.hasOwnCanvas&&p!==0&&this.setRotation(p,r),r}const{width:o,height:c}=ra(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const p=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(p>0||w>0){const y=`calc(${p}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;a.borderRadius=y}else if(this instanceof X_){const y=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=y}switch(e.borderStyle.style){case tu.SOLID:a.borderStyle="solid";break;case tu.DASHED:a.borderStyle="dashed";break;case tu.BEVELED:St("Unimplemented border style: beveled");break;case tu.INSET:St("Unimplemented border style: inset");break;case tu.UNDERLINE:a.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(x(this,Zl,!0),a.borderColor=ft.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):a.borderWidth=0}const u=ft.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=i.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-g)/d}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(v,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=ra(this.data.rect);let o,c;t%180===0?(o=100*r/s,c=100*a/i):(o=100*a/s,c=100*r/i),e.style.width=`${o}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],a=r[0],o=r.slice(1);i.target.style[s]=p1[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:p1[`${a}_rgb`](o)})};return Ct(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const a=s[i];if(a){const o={detail:{[i]:r},target:t};a(o),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(p=>Math.fround(p));if(t.length===8){const[p,w,m,y]=t.subarray(2,6);if(i===p&&r===w&&e===m&&s===y)return}const{style:a}=this.container;let o;if(l(this,Zl)){const{borderColor:p,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${p}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),v=`clippath_${this.data.id}`;g.setAttribute("id",v),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let p=2,w=t.length;p<w;p+=8){const m=t[p],y=t[p+1],b=t[p+2],_=t[p+3],S=h.createElement("rect"),R=(b-e)/c,P=(r-y)/u,I=(m-b)/c,M=(y-_)/u;S.setAttribute("x",R),S.setAttribute("y",P),S.setAttribute("width",I),S.setAttribute("height",M),g.append(S),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${P}" width="${I}" height="${M}"/>`)}l(this,Zl)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:t}=this,e=x(this,Ql,new H0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Ut("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===e)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Bo.has(u)){St(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==e&&Bo.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ro=new WeakMap,Zl=new WeakMap,Ql=new WeakMap,Xh=new WeakSet,B0=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;s==null||s.splice(0,4,...t);const{width:u,height:h}=ra(t);e.left=`${100*(t[0]-o)/r}%`,e.top=`${100*(a-t[3]+c)/a}%`,i===0?(e.width=`${100*u/r}%`,e.height=`${100*h/a}%`):this.setRotation(i)};let ge=Ny;var Gn,ya,G_,V_;class W_ extends ge{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});C(this,Gn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(T(this,Gn,G_).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(T(this,Gn,V_).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&T(this,Gn,ya).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),T(this,Gn,ya).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(e[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),T(this,Gn,ya).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),T(this,Gn,ya).call(this),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:a,include:o}=s,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:p}of v)f.add(p)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===o&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const p=f.defaultValue||"";u.setValue(g,{value:p});break}case"checkbox":case"radiobutton":{const p=f.defaultValue===f.exportValues;u.setValue(g,{value:p});break}case"combobox":case"listbox":{const p=f.defaultValue||"";u.setValue(g,{value:p});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Bo.has(v)){St(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Gn=new WeakSet,ya=function(){this.container.setAttribute("data-internal-link","")},G_=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},T(this,Gn,ya).call(this)},V_=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),T(this,Gn,ya).call(this)};class GC extends ge{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Wo extends ge{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(s,a=>{var o;if(s==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(t,e,s,i){var r,a,o;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ft.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||$C,r=t.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(em*i))||1,d=u/h;a=Math.min(i,c(d/em))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,c(u/em))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=ft.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class VC extends Wo{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Bo.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=jd,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";s.value=h.userValue=g,h.formattedValue=null});let d=f=>{const{formattedValue:g}=h;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var p;if(h.focused)return;const{target:v}=g;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,(p=this.data.actions)!=null&&p.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(p){h.userValue=p.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),p.target.value=h.userValue},formattedValue(p){const{formattedValue:w}=p.detail;h.formattedValue=w,w!=null&&p.target!==document.activeElement&&(p.target.value=w),t.setValue(e,{formattedValue:w})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{var b;const{charLimit:w}=p.detail,{target:m}=p;if(w===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",w);let y=h.userValue;!y||y.length<=w||(y=y.slice(0,w),m.value=h.userValue=y,t.setValue(e,{value:y}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),s.addEventListener("keydown",g=>{var w;h.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:p}=g.target;h.lastCommittedValue!==p&&(h.lastCommittedValue=p,h.userValue=p,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",g=>{var p,w;if(!h.focused||!g.relatedTarget)return;(p=this.data.actions)!=null&&p.Blur||(h.focused=!1);const{value:v}=g.target;h.userValue=v,h.lastCommittedValue!==v&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var S;h.lastCommittedValue=null;const{data:v,target:p}=g,{value:w,selectionStart:m,selectionEnd:y}=p;let b=m,_=y;switch(g.inputType){case"deleteWordBackward":{const R=w.substring(0,m).match(/\w*[^\w]*$/);R&&(b-=R[0].length);break}case"deleteWordForward":{const R=w.substring(m).match(/^[^\w]*\w*/);R&&(_+=R[0].length);break}case"deleteContentBackward":m===y&&(b-=1);break;case"deleteContentForward":m===y&&(_+=1);break}g.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,change:v||"",willCommit:!1,selStart:b,selEnd:_}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class XC extends Wo{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class YC extends Wo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Bo.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=jd,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class X_ extends Wo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const a of this._getElementsByName(e.fieldName,s))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Bo.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=jd,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s))t.setValue(u.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class qC extends W_{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class KC extends Wo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Bo.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=jd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=i;return g?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const g=f.detail.value,v=new Set(Array.isArray(g)?g:[g]);for(const p of i.options)p.selected=v.has(p.value);t.setValue(e,{value:o(!0)}),c=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const g=i.options,v=f.detail.remove;g[v].selected=!1,i.remove(v),g.length>0&&Array.prototype.findIndex.call(g,w=>w.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=o(!1)},insert(f){const{index:g,displayValue:v,exportValue:p}=f.detail.insert,w=i.children[g],m=document.createElement("option");m.textContent=v,m.value=p,w?w.before(m):i.append(m),t.setValue(e,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:g}=f.detail;for(;i.length!==0;)i.remove(0);for(const v of g){const{displayValue:p,exportValue:w}=v,m=document.createElement("option");m.textContent=p,m.value=w,i.append(m)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const g=new Set(f.detail.indices);for(const v of f.target.options)v.selected=g.has(v.index);t.setValue(e,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var g;const d=o(!0),f=o(!1);t.setValue(e,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class H0 extends ge{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:ge._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new ZC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${wy}${s}`).join(",")),this.container}}var Jl,Gp,Vp,tc,ao,ae,Bi,ec,Yh,qh,nc,Hi,Es,Ui,Kh,$i,Zh,oo,lo,Ht,jf,U0,Y_,q_,K_,Z_,zf,Bf,$0;class ZC{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){C(this,Ht);C(this,Jl,T(this,Ht,K_).bind(this));C(this,Gp,T(this,Ht,$0).bind(this));C(this,Vp,T(this,Ht,Bf).bind(this));C(this,tc,T(this,Ht,zf).bind(this));C(this,ao,null);C(this,ae,null);C(this,Bi,null);C(this,ec,null);C(this,Yh,null);C(this,qh,null);C(this,nc,null);C(this,Hi,!1);C(this,Es,null);C(this,Ui,null);C(this,Kh,null);C(this,$i,null);C(this,Zh,null);C(this,oo,null);C(this,lo,!1);var f;x(this,ae,t),x(this,Zh,i),x(this,Bi,a),x(this,$i,o),x(this,qh,c),x(this,ao,e),x(this,Kh,u),x(this,nc,h),x(this,Yh,s),x(this,ec,_y.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,tc)),g.addEventListener("mouseenter",l(this,Vp)),g.addEventListener("mouseleave",l(this,Gp)),g.classList.add("popupTriggerArea");for(const g of s)(f=g.container)==null||f.addEventListener("keydown",l(this,Jl));l(this,ae).hidden=!0,d&&T(this,Ht,zf).call(this)}render(){if(l(this,Es))return;const t=x(this,Es,document.createElement("div"));if(t.className="popup",l(this,ao)){const r=t.style.outlineColor=ft.makeHexColor(...l(this,ao));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=ft.makeHexColor(...l(this,ao).map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,Zh),t.append(e),l(this,ec)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,ec).valueOf()})),e.append(r)}const i=l(this,Ht,jf);if(i)$_.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Bi));t.append(r)}l(this,ae).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const o=i[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,oo)||x(this,oo,{contentsObj:l(this,Bi),richText:l(this,$i)}),t&&x(this,Ui,null),e&&(x(this,$i,T(this,Ht,q_).call(this,e)),x(this,Bi,null)),(s=l(this,Es))==null||s.remove(),x(this,Es,null)}resetEdited(){var t;l(this,oo)&&({contentsObj:an(this,Bi)._,richText:an(this,$i)._}=l(this,oo),x(this,oo,null),(t=l(this,Es))==null||t.remove(),x(this,Es,null),x(this,Ui,null))}forceHide(){x(this,lo,this.isVisible),l(this,lo)&&(l(this,ae).hidden=!0)}maybeShow(){l(this,lo)&&(l(this,Es)||T(this,Ht,Bf).call(this),x(this,lo,!1),l(this,ae).hidden=!1)}get isVisible(){return l(this,ae).hidden===!1}}Jl=new WeakMap,Gp=new WeakMap,Vp=new WeakMap,tc=new WeakMap,ao=new WeakMap,ae=new WeakMap,Bi=new WeakMap,ec=new WeakMap,Yh=new WeakMap,qh=new WeakMap,nc=new WeakMap,Hi=new WeakMap,Es=new WeakMap,Ui=new WeakMap,Kh=new WeakMap,$i=new WeakMap,Zh=new WeakMap,oo=new WeakMap,lo=new WeakMap,Ht=new WeakSet,jf=function(){const t=l(this,$i),e=l(this,Bi);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,$i).html||null},U0=function(){var t,e,s;return((s=(e=(t=l(this,Ht,jf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},Y_=function(){var t,e,s;return((s=(e=(t=l(this,Ht,jf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},q_=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,Ht,Y_),fontSize:l(this,Ht,U0)?`calc(${l(this,Ht,U0)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},K_=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,Hi))&&T(this,Ht,zf).call(this)},Z_=function(){if(l(this,Ui)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=l(this,qh);let a=!!l(this,nc),o=a?l(this,nc):l(this,Kh);for(const v of l(this,Yh))if(!o||ft.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const c=ft.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];x(this,Ui,[100*(d-i)/e,100*(f-r)/s]);const{style:g}=l(this,ae);g.left=`${l(this,Ui)[0]}%`,g.top=`${l(this,Ui)[1]}%`},zf=function(){x(this,Hi,!l(this,Hi)),l(this,Hi)?(T(this,Ht,Bf).call(this),l(this,ae).addEventListener("click",l(this,tc)),l(this,ae).addEventListener("keydown",l(this,Jl))):(T(this,Ht,$0).call(this),l(this,ae).removeEventListener("click",l(this,tc)),l(this,ae).removeEventListener("keydown",l(this,Jl)))},Bf=function(){l(this,Es)||this.render(),this.isVisible?l(this,Hi)&&l(this,ae).classList.add("focused"):(T(this,Ht,Z_).call(this),l(this,ae).hidden=!1,l(this,ae).style.zIndex=parseInt(l(this,ae).style.zIndex)+1e3)},$0=function(){l(this,ae).classList.remove("focused"),!(l(this,Hi)||!this.isVisible)&&(l(this,ae).hidden=!0,l(this,ae).style.zIndex=parseInt(l(this,ae).style.zIndex)-1e3)};class Q_ extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qh;class QC extends ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});C(this,Qh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:i}=ra(e.rect),r=this.svgFactory.create(s,i,!0),a=x(this,Qh,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Qh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qh=new WeakMap;var Jh;class JC extends ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});C(this,Jh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:i}=ra(e.rect),r=this.svgFactory.create(s,i,!0),a=e.borderStyle.width,o=x(this,Jh,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jh=new WeakMap;var td;class tT extends ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});C(this,td,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:i}=ra(e.rect),r=this.svgFactory.create(s,i,!0),a=e.borderStyle.width,o=x(this,td,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,td)}addHighlightArea(){this.container.classList.add("highlightArea")}}td=new WeakMap;var ed;class J_ extends ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});C(this,ed,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:a,height:o}=ra(e),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const g=s[d]-e[0],v=e[3]-s[d+1];u.push(`${g},${v}`)}u=u.join(" ");const h=x(this,ed,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}ed=new WeakMap;class eT extends J_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nT extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nd,co,sd,W0;class Cy extends ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});C(this,sd);C(this,nd,null);C(this,co,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:c,height:u}=T(this,sd,W0).call(this,s,e),h=this.svgFactory.create(c,u,!0),d=x(this,nd,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,g=i.length;f<g;f++){const v=this.svgFactory.createElement(this.svgElementName);l(this,co).push(v),v.setAttribute("points",i[f].join(",")),d.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,a=l(this,nd);if(s>=0&&a.setAttribute("stroke-width",s||1),i)for(let o=0,c=l(this,co).length;o<c;o++)l(this,co)[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:c,height:u}=T(this,sd,W0).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return l(this,co)}addHighlightArea(){this.container.classList.add("highlightArea")}}nd=new WeakMap,co=new WeakMap,sd=new WeakSet,W0=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class tA extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class sT extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class iT extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rT extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class eA extends ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var id,rd,G0;class aT extends ge{constructor(e){var i;super(e,{isRenderable:!0});C(this,rd);C(this,id,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",T(this,rd,G0).bind(this)),x(this,id,i);const{isMac:r}=pn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&T(this,rd,G0).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,id)}addHighlightArea(){this.container.classList.add("highlightArea")}}id=new WeakMap,rd=new WeakSet,G0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ad,uo,ho,od,Ho,nA,V0;class oT{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}){C(this,Ho);C(this,ad,null);C(this,uo,null);C(this,ho,new Map);C(this,od,null);this.div=t,x(this,ad,e),x(this,uo,s),x(this,od,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,ho).size>0}async render(t){var a;const{annotations:e}=t,s=this.div;jo(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ey,annotationStorage:t.annotationStorage||new Sy,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===xe.POPUP;if(c){const d=i.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=ra(o.rect);if(d<=0||f<=0)continue}r.data=o;const u=WC.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=i.get(o.popupRef);d?d.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await T(this,Ho,nA).call(this,h,o.id),u._isEditable&&(l(this,ho).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}T(this,Ho,V0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,jo(e,{rotation:t.rotation}),T(this,Ho,V0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ho).values())}getEditableAnnotation(t){return l(this,ho).get(t)}}ad=new WeakMap,uo=new WeakMap,ho=new WeakMap,od=new WeakMap,Ho=new WeakSet,nA=async function(t,e){var a,o;const s=t.firstChild||t,i=s.id=`${wy}${e}`,r=await((a=l(this,od))==null?void 0:a.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(t),(o=l(this,ad))==null||o.moveElementInDOM(this.div,t,s,!1)},V0=function(){if(!l(this,uo))return;const t=this.div;for(const[e,s]of l(this,uo)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}l(this,uo).clear()};const uf=/\r\n?|\n/g;var Cs,Fn,ld,fo,Dn,be,sA,iA,rA,Hf,nr,Uf,$f,aA,Y0,oA;const Wt=class Wt extends se{constructor(e){super({...e,name:"freeTextEditor"});C(this,be);C(this,Cs);C(this,Fn,"");C(this,ld,`${this.id}-editor`);C(this,fo,null);C(this,Dn);x(this,Cs,e.color||Wt._defaultColor||se._defaultLineColor),x(this,Dn,e.fontSize||Wt._defaultFontSize)}static get _keyboardManager(){const e=Wt.prototype,s=a=>a.isEmpty(),i=zo.TRANSLATE_SMALL,r=zo.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Od([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){se.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Rt.FREETEXT_SIZE:Wt._defaultFontSize=s;break;case Rt.FREETEXT_COLOR:Wt._defaultColor=s;break}}updateParams(e,s){switch(e){case Rt.FREETEXT_SIZE:T(this,be,sA).call(this,s);break;case Rt.FREETEXT_COLOR:T(this,be,iA).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,Wt._defaultFontSize],[Rt.FREETEXT_COLOR,Wt._defaultColor||se._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,l(this,Dn)],[Rt.FREETEXT_COLOR,l(this,Cs)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Wt._internalPadding*e,-(Wt._internalPadding+l(this,Dn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(At.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,fo,new AbortController);const e=this._uiManager.combinedSignal(l(this,fo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,ld)),this._isDraggable=!0,(e=l(this,fo))==null||e.abort(),x(this,fo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Fn),s=x(this,Fn,T(this,be,rA).call(this).trimEnd());if(e===s)return;const i=r=>{if(x(this,Fn,r),!r){this.remove();return}T(this,be,$f).call(this),this._uiManager.rebuild(this),T(this,be,Hf).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),T(this,be,Hf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Wt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,ld)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Dn)}px * var(--scale-factor))`,i.color=l(this,Cs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ep(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let v,p;switch(this.rotation){case 0:v=e+(o[0]-f)/h,p=s+this.height-(o[1]-g)/d;break;case 90:v=e+(o[0]-f)/h,p=s-(o[1]-g)/d,[c,u]=[u,-c];break;case 180:v=e-this.width+(o[0]-f)/h,p=s-(o[1]-g)/d,[c,u]=[-c,-u];break;case 270:v=e+(o[0]-f-this.height*d)/h,p=s+(o[1]-g-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(v*r,p*a,c,u)}else this.setAt(e*r,s*a,this.width*r,this.height*a);T(this,be,$f).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,p,w;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=T(v=Wt,nr,Y0).call(v,s.getData("text")||"").replaceAll(uf,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(uf,"")),m!==this.editorDiv){let y=h;for(const b of this.editorDiv.childNodes){if(b===m){y=d;continue}y.push(T(p=Wt,nr,Uf).call(p,b))}}h.push(c.nodeValue.slice(0,u).replaceAll(uf,""))}else if(c===this.editorDiv){let m=h,y=0;for(const b of this.editorDiv.childNodes)y++===u&&(m=d),m.push(T(w=Wt,nr,Uf).call(w,b))}x(this,Fn,`${h.join(`
`)}${r}${d.join(`
`)}`),T(this,be,$f).call(this);const f=new Range;let g=h.reduce((m,y)=>m+y.length,0);for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const y=m.nodeValue.length;if(g<=y){f.setStart(m,g),f.setEnd(m,g);break}g-=y}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,i){var o;let r=null;if(e instanceof Q_){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:g},textContent:v,textPosition:p,parent:{page:{pageNumber:w}}}=e;if(!v||v.length===0)return null;r=e={annotationType:At.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:p,pageIndex:w-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:g}}const a=await super.deserialize(e,s,i);return x(a,Dn,e.fontSize),x(a,Cs,ft.makeHexColor(...e.color)),x(a,Fn,T(o=Wt,nr,Y0).call(o,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Wt._internalPadding*this.parentScale,i=this.getRect(s,s),r=se._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Cs)),a={annotationType:At.FREETEXT,color:r,fontSize:l(this,Dn),value:T(this,be,aA).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!T(this,be,oA).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${l(this,Dn)}px * var(--scale-factor))`,i.color=l(this,Cs),s.replaceChildren();for(const a of l(this,Fn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=Wt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Fn)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Cs=new WeakMap,Fn=new WeakMap,ld=new WeakMap,fo=new WeakMap,Dn=new WeakMap,be=new WeakSet,sA=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,Dn))*this.parentScale),x(this,Dn,r),T(this,be,Hf).call(this)},i=l(this,Dn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iA=function(e){const s=r=>{x(this,Cs,this.editorDiv.style.color=r)},i=l(this,Cs);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rA=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(T(i=Wt,nr,Uf).call(i,r)),s=r);return e.join(`
`)},Hf=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},nr=new WeakSet,Uf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(uf,"")},$f=function(){if(this.editorDiv.replaceChildren(),!!l(this,Fn))for(const e of l(this,Fn).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},aA=function(){return l(this,Fn).replaceAll(""," ")},Y0=function(e){return e.replaceAll(" ","")},oA=function(e){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((o,c)=>o!==r[c])||e.pageIndex!==a},C(Wt,nr),gt(Wt,"_freeTextDefaultContent",""),gt(Wt,"_internalPadding",0),gt(Wt,"_defaultColor",null),gt(Wt,"_defaultFontSize",10),gt(Wt,"_type","freetext"),gt(Wt,"_editorType",At.FREETEXT);let X0=Wt;class lt{toSVGPath(){Ut("Abstract method `toSVGPath` must be implemented.")}get box(){Ut("Abstract getter `box` must be implemented.")}serialize(t,e){Ut("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,a){a||(a=new Float32Array(t.length));for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o]*i,a[o+1]=s+t[o+1]*r;return a}static _rescaleAndSwap(t,e,s,i,r,a){a||(a=new Float32Array(t.length));for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o+1]*i,a[o+1]=s+t[o]*r;return a}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,a=t.length;r<a;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,a){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+a)/6,(s+r)/2,(i+a)/2]}}gt(lt,"PRECISION",1e-4);var On,Ts,sc,ic,ai,Et,po,go,cd,ud,rc,ac,jr,hd,Xp,Yp,Ce,yu,lA,cA,uA,hA,dA,fA;const Si=class Si{constructor({x:t,y:e},s,i,r,a,o=0){C(this,Ce);C(this,On);C(this,Ts,[]);C(this,sc);C(this,ic);C(this,ai,[]);C(this,Et,new Float32Array(18));C(this,po);C(this,go);C(this,cd);C(this,ud);C(this,rc);C(this,ac);C(this,jr,[]);x(this,On,s),x(this,ac,r*i),x(this,ic,a),l(this,Et).set([NaN,NaN,NaN,NaN,t,e],6),x(this,sc,o),x(this,ud,l(Si,hd)*i),x(this,cd,l(Si,Yp)*i),x(this,rc,i),l(this,jr).push(t,e)}isEmpty(){return isNaN(l(this,Et)[8])}add({x:t,y:e}){var M;x(this,po,t),x(this,go,e);const[s,i,r,a]=l(this,On);let[o,c,u,h]=l(this,Et).subarray(8,12);const d=t-u,f=e-h,g=Math.hypot(d,f);if(g<l(this,cd))return!1;const v=g-l(this,ud),p=v/g,w=p*d,m=p*f;let y=o,b=c;o=u,c=h,u+=w,h+=m,(M=l(this,jr))==null||M.push(t,e);const _=-m/v,S=w/v,R=_*l(this,ac),P=S*l(this,ac);return l(this,Et).set(l(this,Et).subarray(2,8),0),l(this,Et).set([u+R,h+P],4),l(this,Et).set(l(this,Et).subarray(14,18),12),l(this,Et).set([u-R,h-P],16),isNaN(l(this,Et)[6])?(l(this,ai).length===0&&(l(this,Et).set([o+R,c+P],2),l(this,ai).push(NaN,NaN,NaN,NaN,(o+R-s)/r,(c+P-i)/a),l(this,Et).set([o-R,c-P],14),l(this,Ts).push(NaN,NaN,NaN,NaN,(o-R-s)/r,(c-P-i)/a)),l(this,Et).set([y,b,o,c,u,h],6),!this.isEmpty()):(l(this,Et).set([y,b,o,c,u,h],6),Math.abs(Math.atan2(b-c,y-o)-Math.atan2(m,w))<Math.PI/2?([o,c,u,h]=l(this,Et).subarray(2,6),l(this,ai).push(NaN,NaN,NaN,NaN,((o+u)/2-s)/r,((c+h)/2-i)/a),[o,c,y,b]=l(this,Et).subarray(14,18),l(this,Ts).push(NaN,NaN,NaN,NaN,((y+o)/2-s)/r,((b+c)/2-i)/a),!0):([y,b,o,c,u,h]=l(this,Et).subarray(0,6),l(this,ai).push(((y+5*o)/6-s)/r,((b+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),[u,h,o,c,y,b]=l(this,Et).subarray(12,18),l(this,Ts).push(((y+5*o)/6-s)/r,((b+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,ai),e=l(this,Ts);if(isNaN(l(this,Et)[6])&&!this.isEmpty())return T(this,Ce,lA).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);T(this,Ce,uA).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return T(this,Ce,cA).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,a){return new pA(t,e,s,i,r,a)}getOutlines(){var d;const t=l(this,ai),e=l(this,Ts),s=l(this,Et),[i,r,a,o]=l(this,On),c=new Float32Array((((d=l(this,jr))==null?void 0:d.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(l(this,jr)[f]-i)/a,c[f+1]=(l(this,jr)[f+1]-r)/o;if(c[c.length-2]=(l(this,po)-i)/a,c[c.length-1]=(l(this,go)-r)/o,isNaN(s[6])&&!this.isEmpty())return T(this,Ce,hA).call(this,c);const u=new Float32Array(l(this,ai).length+24+l(this,Ts).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=T(this,Ce,fA).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+g],u[h+1]=e[f+g+1],h+=2}return T(this,Ce,dA).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,On),l(this,rc),l(this,sc),l(this,ic))}};On=new WeakMap,Ts=new WeakMap,sc=new WeakMap,ic=new WeakMap,ai=new WeakMap,Et=new WeakMap,po=new WeakMap,go=new WeakMap,cd=new WeakMap,ud=new WeakMap,rc=new WeakMap,ac=new WeakMap,jr=new WeakMap,hd=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,Ce=new WeakSet,yu=function(){const t=l(this,Et).subarray(4,6),e=l(this,Et).subarray(16,18),[s,i,r,a]=l(this,On);return[(l(this,po)+(t[0]-e[0])/2-s)/r,(l(this,go)+(t[1]-e[1])/2-i)/a,(l(this,po)+(e[0]-t[0])/2-s)/r,(l(this,go)+(e[1]-t[1])/2-i)/a]},lA=function(){const[t,e,s,i]=l(this,On),[r,a,o,c]=T(this,Ce,yu).call(this);return`M${(l(this,Et)[2]-t)/s} ${(l(this,Et)[3]-e)/i} L${(l(this,Et)[4]-t)/s} ${(l(this,Et)[5]-e)/i} L${r} ${a} L${o} ${c} L${(l(this,Et)[16]-t)/s} ${(l(this,Et)[17]-e)/i} L${(l(this,Et)[14]-t)/s} ${(l(this,Et)[15]-e)/i} Z`},cA=function(t){const e=l(this,Ts);t.push(`L${e[4]} ${e[5]} Z`)},uA=function(t){const[e,s,i,r]=l(this,On),a=l(this,Et).subarray(4,6),o=l(this,Et).subarray(16,18),[c,u,h,d]=T(this,Ce,yu).call(this);t.push(`L${(a[0]-e)/i} ${(a[1]-s)/r} L${c} ${u} L${h} ${d} L${(o[0]-e)/i} ${(o[1]-s)/r}`)},hA=function(t){const e=l(this,Et),[s,i,r,a]=l(this,On),[o,c,u,h]=T(this,Ce,yu).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/a,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/a,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/a],0),this.newFreeDrawOutline(d,t,l(this,On),l(this,rc),l(this,sc),l(this,ic))},dA=function(t,e){const s=l(this,Ts);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},fA=function(t,e){const s=l(this,Et).subarray(4,6),i=l(this,Et).subarray(16,18),[r,a,o,c]=l(this,On),[u,h,d,f]=T(this,Ce,yu).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c],e),e+=24},C(Si,hd,8),C(Si,Xp,2),C(Si,Yp,l(Si,hd)+l(Si,Xp));let Pp=Si;var oc,mo,Wi,dd,jn,fd,de,qp,gA;class pA extends lt{constructor(e,s,i,r,a,o){super();C(this,qp);C(this,oc);C(this,mo,new Float32Array(4));C(this,Wi);C(this,dd);C(this,jn);C(this,fd);C(this,de);x(this,de,e),x(this,jn,s),x(this,oc,i),x(this,fd,r),x(this,Wi,a),x(this,dd,o),this.lastPoint=[NaN,NaN],T(this,qp,gA).call(this,o);const[c,u,h,d]=l(this,mo);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,g=s.length;f<g;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const e=[`M${l(this,de)[4]} ${l(this,de)[5]}`];for(let s=6,i=l(this,de).length;s<i;s+=6){if(isNaN(l(this,de)[s])){e.push(`L${l(this,de)[s+4]} ${l(this,de)[s+5]}`);continue}e.push(`C${l(this,de)[s]} ${l(this,de)[s+1]} ${l(this,de)[s+2]} ${l(this,de)[s+3]} ${l(this,de)[s+4]} ${l(this,de)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],a){const o=i-e,c=r-s;let u,h;switch(a){case 0:u=lt._rescale(l(this,de),e,r,o,-c),h=lt._rescale(l(this,jn),e,r,o,-c);break;case 90:u=lt._rescaleAndSwap(l(this,de),e,s,o,c),h=lt._rescaleAndSwap(l(this,jn),e,s,o,c);break;case 180:u=lt._rescale(l(this,de),i,s,-o,c),h=lt._rescale(l(this,jn),i,s,-o,c);break;case 270:u=lt._rescaleAndSwap(l(this,de),i,r,-o,-c),h=lt._rescaleAndSwap(l(this,jn),i,r,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,mo)}newOutliner(e,s,i,r,a,o=0){return new Pp(e,s,i,r,a,o)}getNewOutline(e,s){const[i,r,a,o]=l(this,mo),[c,u,h,d]=l(this,oc),f=a*h,g=o*d,v=i*h+c,p=r*d+u,w=this.newOutliner({x:l(this,jn)[0]*f+v,y:l(this,jn)[1]*g+p},l(this,oc),l(this,fd),e,l(this,dd),s??l(this,Wi));for(let m=2;m<l(this,jn).length;m+=2)w.add({x:l(this,jn)[m]*f+v,y:l(this,jn)[m+1]*g+p});return w.getOutlines()}}oc=new WeakMap,mo=new WeakMap,Wi=new WeakMap,dd=new WeakMap,jn=new WeakMap,fd=new WeakMap,de=new WeakMap,qp=new WeakSet,gA=function(e){const s=l(this,de);let i=s[4],r=s[5],a=i,o=r,c=i,u=r,h=i,d=r;const f=e?Math.max:Math.min;for(let v=6,p=s.length;v<p;v+=6){if(isNaN(s[v]))a=Math.min(a,s[v+4]),o=Math.min(o,s[v+5]),c=Math.max(c,s[v+4]),u=Math.max(u,s[v+5]),d<s[v+5]?(h=s[v+4],d=s[v+5]):d===s[v+5]&&(h=f(h,s[v+4]));else{const w=ft.bezierBoundingBox(i,r,...s.slice(v,v+6));a=Math.min(a,w[0]),o=Math.min(o,w[1]),c=Math.max(c,w[2]),u=Math.max(u,w[3]),d<w[3]?(h=w[2],d=w[3]):d===w[3]&&(h=f(h,w[2]))}i=s[v+4],r=s[v+5]}const g=l(this,mo);g[0]=a-l(this,Wi),g[1]=o-l(this,Wi),g[2]=c-a+2*l(this,Wi),g[3]=u-o+2*l(this,Wi),this.lastPoint=[h,d]};var pd,gd,zr,Ps,mn,mA,Wf,vA,yA,K0;class q0{constructor(t,e=0,s=0,i=!0){C(this,mn);C(this,pd);C(this,gd);C(this,zr,[]);C(this,Ps,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x:w,y:m,width:y,height:b}of t){const _=Math.floor((w-e)/u)*u,S=Math.ceil((w+y+e)/u)*u,R=Math.floor((m-e)/u)*u,P=Math.ceil((m+b+e)/u)*u,I=[_,R,P,!0],M=[S,R,P,!1];l(this,zr).push(I,M),r=Math.min(r,_),a=Math.max(a,S),o=Math.min(o,R),c=Math.max(c,P)}const h=a-r+2*s,d=c-o+2*s,f=r-s,g=o-s,v=l(this,zr).at(i?-1:-2),p=[v[0],v[2]];for(const w of l(this,zr)){const[m,y,b]=w;w[0]=(m-f)/h,w[1]=(y-g)/d,w[2]=(b-g)/d}x(this,pd,new Float32Array([f,g,h,d])),x(this,gd,p)}getOutlines(){l(this,zr).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,zr))e[3]?(t.push(...T(this,mn,K0).call(this,e)),T(this,mn,vA).call(this,e)):(T(this,mn,yA).call(this,e),t.push(...T(this,mn,K0).call(this,e)));return T(this,mn,mA).call(this,t)}}pd=new WeakMap,gd=new WeakMap,zr=new WeakMap,Ps=new WeakMap,mn=new WeakSet,mA=function(t){const e=[],s=new Set;for(const a of t){const[o,c,u]=a;e.push([o,c,a],[o,u,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const c=e[a][2],u=e[a+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,c,u,h,d]=a;s.delete(a);let f=o,g=c;for(r=[o,u],i.push(r);;){let v;if(s.has(h))v=h;else if(s.has(d))v=d;else break;s.delete(v),[o,c,u,h,d]=v,f!==o&&(r.push(f,g,o,g===c?c:u),f=o),g=g===c?u:c}r.push(f,g)}return new lT(i,l(this,pd),l(this,gd))},Wf=function(t){const e=l(this,Ps);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,a=e[r][0];if(a===t)return r;a<t?s=r+1:i=r-1}return i+1},vA=function([,t,e]){const s=T(this,mn,Wf).call(this,t);l(this,Ps).splice(s,0,[t,e])},yA=function([,t,e]){const s=T(this,mn,Wf).call(this,t);for(let i=s;i<l(this,Ps).length;i++){const[r,a]=l(this,Ps)[i];if(r!==t)break;if(r===t&&a===e){l(this,Ps).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=l(this,Ps)[i];if(r!==t)break;if(r===t&&a===e){l(this,Ps).splice(i,1);return}}},K0=function(t){const[e,s,i]=t,r=[[e,s,i]],a=T(this,mn,Wf).call(this,i);for(let o=0;o<a;o++){const[c,u]=l(this,Ps)[o];for(let h=0,d=r.length;h<d;h++){const[,f,g]=r[h];if(!(u<=f||g<=c)){if(f>=c){if(g>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,g>u&&r.push([e,u,g])}}}return r};var md,lc;class lT extends lt{constructor(e,s,i){super();C(this,md);C(this,lc);x(this,lc,e),x(this,md,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of l(this,lc)){let[i,r]=s;e.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],c=s[a+1];o===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${o}`),i=o)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],a){const o=[],c=i-e,u=r-s;for(const h of l(this,lc)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;o.push(d)}return o}get box(){return l(this,md)}get classNamesForOutlining(){return["highlightOutline"]}}md=new WeakMap,lc=new WeakMap;class Z0 extends Pp{newFreeDrawOutline(t,e,s,i,r,a){return new cT(t,e,s,i,r,a)}}class cT extends pA{newOutliner(t,e,s,i,r,a=0){return new Z0(t,e,s,i,r,a)}}var Rs,vo,cc,Se,vd,uc,yd,wd,Br,Ns,hc,bd,Bt,Q0,J0,tv,wa,wA,fr;const xn=class xn{constructor({editor:t=null,uiManager:e=null}){C(this,Bt);C(this,Rs,null);C(this,vo,null);C(this,cc);C(this,Se,null);C(this,vd,!1);C(this,uc,!1);C(this,yd,null);C(this,wd);C(this,Br,null);C(this,Ns,null);C(this,hc);var s;t?(x(this,uc,!1),x(this,hc,Rt.HIGHLIGHT_COLOR),x(this,yd,t)):(x(this,uc,!0),x(this,hc,Rt.HIGHLIGHT_DEFAULT_COLOR)),x(this,Ns,(t==null?void 0:t._uiManager)||e),x(this,wd,l(this,Ns)._eventBus),x(this,cc,(t==null?void 0:t.color)||((s=l(this,Ns))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(xn,bd)||x(xn,bd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ct(this,"_keyboardManager",new Od([[["Escape","mac+Escape"],xn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],xn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],xn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],xn.prototype._moveToPrevious],[["Home","mac+Home"],xn.prototype._moveToBeginning],[["End","mac+End"],xn.prototype._moveToEnd]]))}renderButton(){const t=x(this,Rs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,Ns)._signal;t.addEventListener("click",T(this,Bt,wa).bind(this),{signal:e}),t.addEventListener("keydown",T(this,Bt,tv).bind(this),{signal:e});const s=x(this,vo,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,cc),t.append(s),t}renderMainDropdown(){const t=x(this,Se,T(this,Bt,Q0).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,Rs)){T(this,Bt,wa).call(this,t);return}const e=t.target.getAttribute("data-color");e&&T(this,Bt,J0).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,Bt,fr)){T(this,Bt,wa).call(this,t);return}if(t.target===l(this,Rs)){(e=l(this,Se).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,Se))==null?void 0:e.firstChild)||t.target===l(this,Rs)){l(this,Bt,fr)&&this._hideDropdownFromKeyboard();return}l(this,Bt,fr)||T(this,Bt,wa).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,Bt,fr)){T(this,Bt,wa).call(this,t);return}(e=l(this,Se).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,Bt,fr)){T(this,Bt,wa).call(this,t);return}(e=l(this,Se).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,Se))==null||t.classList.add("hidden"),(e=l(this,Br))==null||e.abort(),x(this,Br,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,uc)){if(!l(this,Bt,fr)){(t=l(this,yd))==null||t.unselect();return}this.hideDropdown(),l(this,Rs).focus({preventScroll:!0,focusVisible:l(this,vd)})}}updateColor(t){if(l(this,vo)&&(l(this,vo).style.backgroundColor=t),!l(this,Se))return;const e=l(this,Ns).highlightColors.values();for(const s of l(this,Se).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,Rs))==null||t.remove(),x(this,Rs,null),x(this,vo,null),(e=l(this,Se))==null||e.remove(),x(this,Se,null)}};Rs=new WeakMap,vo=new WeakMap,cc=new WeakMap,Se=new WeakMap,vd=new WeakMap,uc=new WeakMap,yd=new WeakMap,wd=new WeakMap,Br=new WeakMap,Ns=new WeakMap,hc=new WeakMap,bd=new WeakMap,Bt=new WeakSet,Q0=function(){const t=document.createElement("div"),e=l(this,Ns)._signal;t.addEventListener("contextmenu",Hs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of l(this,Ns).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",l(xn,bd)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,cc)),r.addEventListener("click",T(this,Bt,J0).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",T(this,Bt,tv).bind(this),{signal:e}),t},J0=function(t,e){e.stopPropagation(),l(this,wd).dispatch("switchannotationeditorparams",{source:this,type:l(this,hc),value:t})},tv=function(t){xn._keyboardManager.exec(this,t)},wa=function(t){if(l(this,Bt,fr)){this.hideDropdown();return}if(x(this,vd,t.detail===0),l(this,Br)||(x(this,Br,new AbortController),window.addEventListener("pointerdown",T(this,Bt,wA).bind(this),{signal:l(this,Ns).combinedSignal(l(this,Br))})),l(this,Se)){l(this,Se).classList.remove("hidden");return}const e=x(this,Se,T(this,Bt,Q0).call(this));l(this,Rs).append(e)},wA=function(t){var e;(e=l(this,Se))!=null&&e.contains(t.target)||this.hideDropdown()},fr=function(){return l(this,Se)&&!l(this,Se).classList.contains("hidden")},C(xn,bd,null);let Rp=xn;var dc,xd,Gi,yo,fc,Sn,_d,Ad,wo,is,zn,je,pc,Vi,Qe,gc,rs,Sd,xt,ev,Gf,bA,xA,_A,nv,ba,hs,Zo,AA,Vf,wu,SA,kA,EA,CA,TA;const Dt=class Dt extends se{constructor(e){super({...e,name:"highlightEditor"});C(this,xt);C(this,dc,null);C(this,xd,0);C(this,Gi);C(this,yo,null);C(this,fc,null);C(this,Sn,null);C(this,_d,null);C(this,Ad,0);C(this,wo,null);C(this,is,null);C(this,zn,null);C(this,je,!1);C(this,pc,null);C(this,Vi);C(this,Qe,null);C(this,gc,"");C(this,rs);C(this,Sd,"");this.color=e.color||Dt._defaultColor,x(this,rs,e.thickness||Dt._defaultThickness),x(this,Vi,e.opacity||Dt._defaultOpacity),x(this,Gi,e.boxes||null),x(this,Sd,e.methodOfCreation||""),x(this,gc,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,je,!0),T(this,xt,Gf).call(this,e),T(this,xt,ba).call(this)):l(this,Gi)&&(x(this,dc,e.anchorNode),x(this,xd,e.anchorOffset),x(this,_d,e.focusNode),x(this,Ad,e.focusOffset),T(this,xt,ev).call(this),T(this,xt,ba).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Dt.prototype;return Ct(this,"_keyboardManager",new Od([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,je)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,rs),methodOfCreation:l(this,Sd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;se.initialize(e,s),Dt._defaultColor||(Dt._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Rt.HIGHLIGHT_DEFAULT_COLOR:Dt._defaultColor=s;break;case Rt.HIGHLIGHT_THICKNESS:Dt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,pc)}updateParams(e,s){switch(e){case Rt.HIGHLIGHT_COLOR:T(this,xt,bA).call(this,s);break;case Rt.HIGHLIGHT_THICKNESS:T(this,xt,xA).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_DEFAULT_COLOR,Dt._defaultColor],[Rt.HIGHLIGHT_THICKNESS,Dt._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||Dt._defaultColor],[Rt.HIGHLIGHT_THICKNESS,l(this,rs)||Dt._defaultThickness],[Rt.HIGHLIGHT_FREE,l(this,je)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,fc,new Rp({editor:this})),e.addColorPicker(l(this,fc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,xt,wu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,T(this,xt,wu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){T(this,xt,nv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,xt,ba).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?T(this,xt,nv).call(this):e&&(T(this,xt,ba).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,a,o;const{drawLayer:s}=this.parent;let i;l(this,je)?(e=(e-this.rotation+360)%360,i=T(r=Dt,hs,Zo).call(r,l(this,is).box,e)):i=T(a=Dt,hs,Zo).call(a,[this.x,this.y,this.width,this.height],e),s.updateProperties(l(this,zn),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(l(this,Qe),{bbox:T(o=Dt,hs,Zo).call(o,l(this,Sn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,gc)&&(e.setAttribute("aria-label",l(this,gc)),e.setAttribute("role","mark")),l(this,je)?e.classList.add("free"):this.div.addEventListener("keydown",T(this,xt,AA).bind(this),{signal:this._uiManager._signal});const s=x(this,wo,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,yo);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Ep(this,l(this,wo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Qe),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Qe),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:T(this,xt,Vf).call(this,!0);break;case 1:case 3:T(this,xt,Vf).call(this,!1);break}}select(){var e;super.select(),l(this,Qe)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Qe),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Qe)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Qe),{rootClass:{selected:!1}}),l(this,je)||T(this,xt,Vf).call(this,!1))}get _mustFixPosition(){return!l(this,je)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,zn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Qe),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:a}){const{x:o,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),g=v=>{d.abort(),T(this,hs,CA).call(this,e,v)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",Vn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Hs,{signal:f}),i.addEventListener("pointermove",T(this,hs,EA).bind(this,e),{signal:f}),this._freeHighlight=new Z0({x:r,y:a},[o,c,u,h],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,i){var p,w,m,y;let r=null;if(e instanceof tA){const{data:{quadPoints:b,rect:_,rotation:S,id:R,color:P,opacity:I,popupRef:M},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:At.HIGHLIGHT,color:Array.from(P),opacity:I,quadPoints:b,boxes:null,pageIndex:D-1,rect:_.slice(0),rotation:S,id:R,deleted:!1,popupRef:M}}else if(e instanceof Cy){const{data:{inkLists:b,rect:_,rotation:S,id:R,color:P,borderStyle:{rawWidth:I},popupRef:M},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:At.HIGHLIGHT,color:Array.from(P),thickness:I,inkLists:b,boxes:null,pageIndex:D-1,rect:_.slice(0),rotation:S,id:R,deleted:!1,popupRef:M}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=e,h=await super.deserialize(e,s,i);h.color=ft.makeHexColor(...a),x(h,Vi,u||1),c&&x(h,rs,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[g,v]=h.pageTranslation;if(o){const b=x(h,Gi,[]);for(let _=0;_<o.length;_+=8)b.push({x:(o[_]-g)/d,y:1-(o[_+1]-v)/f,width:(o[_+2]-o[_])/d,height:(o[_+1]-o[_+5])/f});T(p=h,xt,ev).call(p),T(w=h,xt,ba).call(w),h.rotate(h.rotation)}else if(c){x(h,je,!0);const b=c[0],_={x:b[0]-g,y:f-(b[1]-v)},S=new Z0(_,[0,0,d,f],1,l(h,rs)/2,!0,.001);for(let I=0,M=b.length;I<M;I+=2)_.x=b[I]-g,_.y=f-(b[I+1]-v),S.add(_);const{id:R,clipPathId:P}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);T(m=h,xt,Gf).call(m,{highlightOutlines:S.getOutlines(),highlightId:R,clipPathId:P}),T(y=h,xt,ba).call(y)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=se._colorManager.convert(this.color),r={annotationType:At.HIGHLIGHT,color:i,opacity:l(this,Vi),thickness:l(this,rs),quadPoints:T(this,xt,SA).call(this),outlines:T(this,xt,kA).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:T(this,xt,wu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!T(this,xt,TA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};dc=new WeakMap,xd=new WeakMap,Gi=new WeakMap,yo=new WeakMap,fc=new WeakMap,Sn=new WeakMap,_d=new WeakMap,Ad=new WeakMap,wo=new WeakMap,is=new WeakMap,zn=new WeakMap,je=new WeakMap,pc=new WeakMap,Vi=new WeakMap,Qe=new WeakMap,gc=new WeakMap,rs=new WeakMap,Sd=new WeakMap,xt=new WeakSet,ev=function(){const e=new q0(l(this,Gi),.001);x(this,is,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,is).box;const s=new q0(l(this,Gi),.0025,.001,this._uiManager.direction==="ltr");x(this,Sn,s.getOutlines());const{lastPoint:i}=l(this,Sn);x(this,pc,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Gf=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var d,f;if(x(this,is,e),x(this,Sn,e.getNewOutline(l(this,rs)/2+1.5,.0025)),s>=0)x(this,zn,s),x(this,yo,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,Qe,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Sn).box,path:{d:l(this,Sn).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,zn),{bbox:T(d=Dt,hs,Zo).call(d,l(this,is).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Qe),{bbox:T(f=Dt,hs,Zo).call(f,l(this,Sn).box,g),path:{d:l(this,Sn).toSVGPath()}})}const[a,o,c,u]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[g,v]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*v/g,this.height=u*g/v;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*v/g,this.height=u*g/v;break}}const{lastPoint:h}=l(this,Sn);x(this,pc,[(h[0]-a)/c,(h[1]-o)/u])},bA=function(e){const s=(a,o)=>{var c,u;this.color=a,x(this,Vi,o),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,zn),{root:{fill:a,"fill-opacity":o}}),(u=l(this,fc))==null||u.updateColor(a)},i=this.color,r=l(this,Vi);this.addCommands({cmd:s.bind(this,e,Dt._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},xA=function(e){const s=l(this,rs),i=r=>{x(this,rs,r),T(this,xt,_A).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},_A=function(e){if(!l(this,je))return;T(this,xt,Gf).call(this,{highlightOutlines:l(this,is).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},nv=function(){l(this,zn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,zn)),x(this,zn,null),this.parent.drawLayer.remove(l(this,Qe)),x(this,Qe,null))},ba=function(e=this.parent){l(this,zn)===null&&({id:an(this,zn)._,clipPathId:an(this,yo)._}=e.drawLayer.draw({bbox:l(this,is).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Vi)},rootClass:{highlight:!0,free:l(this,je)},path:{d:l(this,is).toSVGPath()}},!1,!0),x(this,Qe,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,je)},bbox:l(this,Sn).box,path:{d:l(this,Sn).toSVGPath()}},l(this,je))),l(this,wo)&&(l(this,wo).style.clipPath=l(this,yo)))},hs=new WeakSet,Zo=function([e,s,i,r],a){switch(a){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},AA=function(e){Dt._keyboardManager.exec(this,e)},Vf=function(e){if(!l(this,dc))return;const s=window.getSelection();e?s.setPosition(l(this,dc),l(this,xd)):s.setPosition(l(this,_d),l(this,Ad))},wu=function(){return l(this,je)?this.rotation:0},SA=function(){if(l(this,je))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=l(this,Gi),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const g=u*e+i,v=(1-h)*s+r;o[c]=o[c+4]=g,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=g+d*e,o[c+5]=o[c+7]=v-f*s,c+=8}return o},kA=function(e){return l(this,is).serialize(e,T(this,xt,wu).call(this))},EA=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},CA=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},TA=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},C(Dt,hs),gt(Dt,"_defaultColor",null),gt(Dt,"_defaultOpacity",1),gt(Dt,"_defaultThickness",12),gt(Dt,"_type","highlight"),gt(Dt,"_editorType",At.HIGHLIGHT),gt(Dt,"_freeHighlightId",-1),gt(Dt,"_freeHighlight",null),gt(Dt,"_freeHighlightClipId","");let Np=Dt;var bo;class uT{constructor(){C(this,bo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))this.updateProperty(e,s)}updateSVGProperty(t,e){l(this,bo)[t]=e}toSVGProperties(){const t=l(this,bo);return x(this,bo,Object.create(null)),{root:t}}reset(){x(this,bo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Ut("Not implemented")}}bo=new WeakMap;var Bn,mc,Ne,xo,_o,Hr,Ur,$r,Ao,Mt,iv,rv,av,bu,PA,Xf,xu,Qo;const ut=class ut extends se{constructor(e){super(e);C(this,Mt);C(this,Bn,null);C(this,mc);gt(this,"_drawId",null);x(this,mc,e.mustBeCommitted||!1),e.drawOutlines&&(T(this,Mt,iv).call(this,e),T(this,Mt,bu).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,a]of Object.entries(s))i.has(r)?Object.assign(e[r],a):e[r]=a;return e}static getDefaultDrawingOptions(e){Ut("Not implemented")}static get typesMap(){Ut("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(l(ut,Ne).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,a=r[s],o=c=>{var h;r.updateProperty(s,c);const u=l(this,Bn).updateProperty(s,c);u&&T(this,Mt,xu).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ut._mergeSVGProperties(l(this,Bn).getPathResizingSVGProperties(T(this,Mt,Xf).call(this)),{bbox:T(this,Mt,Qo).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ut._mergeSVGProperties(l(this,Bn).getPathResizedSVGProperties(T(this,Mt,Xf).call(this)),{bbox:T(this,Mt,Qo).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:T(this,Mt,Qo).call(this,e,s)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ut._mergeSVGProperties(l(this,Bn).getPathTranslatedSVGProperties(T(this,Mt,Xf).call(this),this.parentDimensions),{bbox:T(this,Mt,Qo).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,mc)&&(x(this,mc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){T(this,Mt,av).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Mt,bu).call(this),T(this,Mt,xu).call(this,l(this,Bn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),T(this,Mt,av).call(this)):e&&(this._uiManager.addShouldRescale(this),T(this,Mt,bu).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ut._mergeSVGProperties({bbox:T(this,Mt,Qo).call(this)},l(this,Bn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,Mt,xu).call(this,l(this,Bn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const s=document.createElement("div");e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,s,i,r,a){Ut("Not implemented")}static startDrawing(e,s,i,r){var w;const{target:a,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=r;if(l(ut,Ur)&&l(ut,Ur)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:g}=a.getBoundingClientRect(),v=x(ut,xo,new AbortController),p=e.combinedSignal(v);if(l(ut,Hr)||x(ut,Hr,u),l(ut,Ur)??x(ut,Ur,h),window.addEventListener("pointerup",m=>{var y;l(ut,Hr)===m.pointerId?this._endDraw(m):(y=l(ut,$r))==null||y.delete(m.pointerId)},{signal:p}),window.addEventListener("pointercancel",m=>{var y;l(ut,Hr)===m.pointerId?this._currentParent.endDrawingSession():(y=l(ut,$r))==null||y.delete(m.pointerId)},{signal:p}),window.addEventListener("pointerdown",m=>{l(ut,Ur)===m.pointerType&&((l(ut,$r)||x(ut,$r,new Set)).add(m.pointerId),l(ut,Ne).isCancellable()&&(l(ut,Ne).removeLastElement(),l(ut,Ne).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Hs,{signal:p}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),a.addEventListener("touchmove",m=>{m.timeStamp===l(ut,Ao)&&Vn(m)},{signal:p}),e.toggleDrawing(),(w=s._editorUndoBar)==null||w.hide(),l(ut,Ne)){e.drawLayer.updateProperties(this._currentDrawId,l(ut,Ne).startNew(o,c,f,g,d));return}s.updateUIForDefaultProperties(this),x(ut,Ne,this.createDrawerInstance(o,c,f,g,d)),x(ut,_o,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ut,_o).toSVGProperties(),l(ut,Ne).defaultSVGProperties),!0,!1)}static _drawMove(e){var a;if(x(ut,Ao,-1),!l(ut,Ne))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(l(ut,Hr)===r){if(((a=l(ut,$r))==null?void 0:a.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ut,Ne).add(s,i)),x(ut,Ao,e.timeStamp),Vn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(ut,Ne,null),x(ut,_o,null),x(ut,Ur,null),x(ut,Ao,NaN)),l(ut,xo)&&(l(ut,xo).abort(),x(ut,xo,null),x(ut,Hr,NaN),x(ut,$r,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),e&&s.drawLayer.updateProperties(this._currentDrawId,l(ut,Ne).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(ut,Ne),r=this._currentDrawId,a=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Rt.DRAW_STEP),!l(ut,Ne).isEmpty()){const{pageDimensions:[i,r],scale:a}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ut,Ne).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:l(ut,_o),mustBeCommitted:!e});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,a,o){Ut("Not implemented")}static async deserialize(e,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}=s.viewport,u=this.deserializeDraw(o,c,r,a,this._INNER_MARGIN,e),h=await super.deserialize(e,s,i);return h.createDrawingOptions(e),T(d=h,Mt,iv).call(d,{drawOutlines:u}),T(f=h,Mt,bu).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[s,i]=this.pageTranslation,[r,a]=this.pageDimensions;return l(this,Bn).serialize([s,i,r,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Bn=new WeakMap,mc=new WeakMap,Ne=new WeakMap,xo=new WeakMap,_o=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,$r=new WeakMap,Ao=new WeakMap,Mt=new WeakSet,iv=function({drawOutlines:e,drawId:s,drawingOptions:i}){x(this,Bn,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=T(this,Mt,rv).call(this,e,this.parent),T(this,Mt,xu).call(this,e.box)},rv=function(e,s){const{id:i}=s.drawLayer.draw(ut._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},av=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bu=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,Mt,rv).call(this,l(this,Bn),e)}},PA=function([e,s,i,r]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[s,1-e,i*(o/a),r*(a/o)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(o/a),r*(a/o)];default:return[e,s,i,r]}},Xf=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-s,e,i*(a/o),r*(o/a)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(a/o),r*(o/a)];default:return[e,s,i,r]}},xu=function(e){if([this.x,this.y,this.width,this.height]=T(this,Mt,PA).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Qo=function(){const{x:e,y:s,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[c,u]}=this;switch((a*4+o)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,e,i*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-e-r*(u/c),i*(c/u),r*(u/c)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),e-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-e,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-e,i*(c/u),r*(u/c)];default:return[e,s,i,r]}},gt(ut,"_currentDrawId",-1),gt(ut,"_currentParent",null),C(ut,Ne,null),C(ut,xo,null),C(ut,_o,null),C(ut,Hr,NaN),C(ut,Ur,null),C(ut,$r,null),C(ut,Ao,NaN),gt(ut,"_INNER_MARGIN",3);let sv=ut;var oi,Ie,Le,So,vc,cn,ze,as,ko,Eo,Co,yc,Yf;class hT{constructor(t,e,s,i,r,a){C(this,yc);C(this,oi,new Float64Array(6));C(this,Ie);C(this,Le);C(this,So);C(this,vc);C(this,cn);C(this,ze,"");C(this,as,0);C(this,ko,new Ip);C(this,Eo);C(this,Co);x(this,Eo,s),x(this,Co,i),x(this,So,r),x(this,vc,a),[t,e]=T(this,yc,Yf).call(this,t,e);const o=x(this,Ie,[NaN,NaN,NaN,NaN,t,e]);x(this,cn,[t,e]),x(this,Le,[{line:o,points:l(this,cn)}]),l(this,oi).set(o,0)}updateProperty(t,e){t==="stroke-width"&&x(this,vc,e)}isEmpty(){return!l(this,Le)||l(this,Le).length===0}isCancellable(){return l(this,cn).length<=10}add(t,e){[t,e]=T(this,yc,Yf).call(this,t,e);const[s,i,r,a]=l(this,oi).subarray(2,6),o=t-r,c=e-a;return Math.hypot(l(this,Eo)*o,l(this,Co)*c)<=2?null:(l(this,cn).push(t,e),isNaN(s)?(l(this,oi).set([r,a,t,e],2),l(this,Ie).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,oi)[0])&&l(this,Ie).splice(6,6),l(this,oi).set([s,i,r,a,t,e],0),l(this,Ie).push(...lt.createBezierPoints(s,i,r,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(l(this,cn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){x(this,Eo,s),x(this,Co,i),x(this,So,r),[t,e]=T(this,yc,Yf).call(this,t,e);const a=x(this,Ie,[NaN,NaN,NaN,NaN,t,e]);x(this,cn,[t,e]);const o=l(this,Le).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),l(this,Le).push({line:a,points:l(this,cn)}),l(this,oi).set(a,0),x(this,as,0),this.toSVGPath(),null}getLastElement(){return l(this,Le).at(-1)}setLastElement(t){return l(this,Le)?(l(this,Le).push(t),x(this,Ie,t.line),x(this,cn,t.points),x(this,as,0),{path:{d:this.toSVGPath()}}):l(this,ko).setLastElement(t)}removeLastElement(){if(!l(this,Le))return l(this,ko).removeLastElement();l(this,Le).pop(),x(this,ze,"");for(let t=0,e=l(this,Le).length;t<e;t++){const{line:s,points:i}=l(this,Le)[t];x(this,Ie,s),x(this,cn,i),x(this,as,0),this.toSVGPath()}return{path:{d:l(this,ze)}}}toSVGPath(){const t=lt.svgRound(l(this,Ie)[4]),e=lt.svgRound(l(this,Ie)[5]);if(l(this,cn).length===2)return x(this,ze,`${l(this,ze)} M ${t} ${e} Z`),l(this,ze);if(l(this,cn).length<=6){const i=l(this,ze).lastIndexOf("M");x(this,ze,`${l(this,ze).slice(0,i)} M ${t} ${e}`),x(this,as,6)}if(l(this,cn).length===4){const i=lt.svgRound(l(this,Ie)[10]),r=lt.svgRound(l(this,Ie)[11]);return x(this,ze,`${l(this,ze)} L ${i} ${r}`),x(this,as,12),l(this,ze)}const s=[];l(this,as)===0&&(s.push(`M ${t} ${e}`),x(this,as,6));for(let i=l(this,as),r=l(this,Ie).length;i<r;i+=6){const[a,o,c,u,h,d]=l(this,Ie).slice(i,i+6).map(lt.svgRound);s.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}return x(this,ze,l(this,ze)+s.join(" ")),x(this,as,l(this,Ie).length),l(this,ze)}getOutlines(t,e,s,i){const r=l(this,Le).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,ko).build(l(this,Le),t,e,s,l(this,So),l(this,vc),i),x(this,oi,null),x(this,Ie,null),x(this,Le,null),x(this,ze,null),l(this,ko)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}oi=new WeakMap,Ie=new WeakMap,Le=new WeakMap,So=new WeakMap,vc=new WeakMap,cn=new WeakMap,ze=new WeakMap,as=new WeakMap,ko=new WeakMap,Eo=new WeakMap,Co=new WeakMap,yc=new WeakSet,Yf=function(t,e){return lt._normalizePoint(t,e,l(this,Eo),l(this,Co),l(this,So))};var un,kd,Ed,Hn,li,ci,wc,bc,xc,Ue,xi,RA,NA,IA;const Iy=class Iy extends lt{constructor(){super(...arguments);C(this,Ue);C(this,un);C(this,kd,0);C(this,Ed);C(this,Hn);C(this,li);C(this,ci);C(this,wc);C(this,bc);C(this,xc)}build(e,s,i,r,a,o,c){x(this,li,s),x(this,ci,i),x(this,wc,r),x(this,bc,a),x(this,xc,o),x(this,Ed,c??0),x(this,Hn,e),T(this,Ue,NA).call(this)}setLastElement(e){return l(this,Hn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Hn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of l(this,Hn)){if(e.push(`M${lt.svgRound(s[4])} ${lt.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12){e.push(`L${lt.svgRound(s[10])} ${lt.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[a,o,c,u,h,d]=s.subarray(i,i+6).map(lt.svgRound);e.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,s,i,r],a){const o=[],c=[],[u,h,d,f]=T(this,Ue,RA).call(this);let g,v,p,w,m,y,b,_,S;switch(l(this,bc)){case 0:S=lt._rescale,g=e,v=s+r,p=i,w=-r,m=e+u*i,y=s+(1-h-f)*r,b=e+(u+d)*i,_=s+(1-h)*r;break;case 90:S=lt._rescaleAndSwap,g=e,v=s,p=i,w=r,m=e+h*i,y=s+u*r,b=e+(h+f)*i,_=s+(u+d)*r;break;case 180:S=lt._rescale,g=e+i,v=s,p=-i,w=r,m=e+(1-u-d)*i,y=s+h*r,b=e+(1-u)*i,_=s+(h+f)*r;break;case 270:S=lt._rescaleAndSwap,g=e+i,v=s+r,p=-i,w=-r,m=e+(1-h-f)*i,y=s+(1-u-d)*r,b=e+(1-h)*i,_=s+(1-u)*r;break}for(const{line:R,points:P}of l(this,Hn))o.push(S(R,g,v,p,w,a?new Array(R.length):null)),c.push(S(P,g,v,p,w,a?new Array(P.length):null));return{lines:o,points:c,rect:[m,y,b,_]}}static deserialize(e,s,i,r,a,{paths:{lines:o,points:c},rotation:u,thickness:h}){const d=[];let f,g,v,p,w;switch(u){case 0:w=lt._rescale,f=-e/i,g=s/r+1,v=1/i,p=-1/r;break;case 90:w=lt._rescaleAndSwap,f=-s/r,g=-e/i,v=1/r,p=1/i;break;case 180:w=lt._rescale,f=e/i+1,g=-s/r,v=-1/i,p=1/r;break;case 270:w=lt._rescaleAndSwap,f=s/r+1,g=e/i+1,v=-1/r,p=-1/i;break}if(!o){o=[];for(const y of c){const b=y.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const _=new Float32Array(3*(b-2));o.push(_);let[S,R,P,I]=y.subarray(0,4);_.set([NaN,NaN,NaN,NaN,S,R],0);for(let M=4;M<b;M+=2){const D=y[M],$=y[M+1];_.set(lt.createBezierPoints(S,R,P,I,D,$),(M-2)*3),[S,R,P,I]=[P,I,D,$]}}}for(let y=0,b=o.length;y<b;y++)d.push({line:w(o[y].map(_=>_??NaN),f,g,v,p),points:w(c[y].map(_=>_??NaN),f,g,v,p)});const m=new Iy;return m.build(d,i,r,1,u,h,a),m}get box(){return l(this,un)}updateProperty(e,s){return e==="stroke-width"?T(this,Ue,IA).call(this,s):null}updateParentDimensions([e,s],i){const[r,a]=T(this,Ue,xi).call(this);x(this,li,e),x(this,ci,s),x(this,wc,i);const[o,c]=T(this,Ue,xi).call(this),u=o-r,h=c-a,d=l(this,un);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return x(this,kd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,un).map(lt.svgRound).join(" ")}get defaultProperties(){const[e,s]=l(this,un);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=l(this,un);let i=0,r=0,a=0,o=0,c=0,u=0;switch(l(this,kd)){case 90:r=s/e,a=-e/s,c=e;break;case 180:i=-1,o=-1,c=e,u=s;break;case 270:r=-s/e,a=e/s,u=s;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${lt.svgRound(c)} ${lt.svgRound(u)})`}getPathResizingSVGProperties([e,s,i,r]){const[a,o]=T(this,Ue,xi).call(this),[c,u,h,d]=l(this,un);if(Math.abs(h-a)<=lt.PRECISION||Math.abs(d-o)<=lt.PRECISION){const w=e+i/2-(c+h/2),m=s+r/2-(u+d/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(s)}`,transform:`${this.rotationTransform} translate(${w} ${m})`}}}const f=(i-2*a)/(h-2*a),g=(r-2*o)/(d-2*o),v=h/i,p=d/r;return{path:{"transform-origin":`${lt.svgRound(c)} ${lt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${p}) translate(${lt.svgRound(a)} ${lt.svgRound(o)}) scale(${f} ${g}) translate(${lt.svgRound(-a)} ${lt.svgRound(-o)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[a,o]=T(this,Ue,xi).call(this),c=l(this,un),[u,h,d,f]=c;if(c[0]=e,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-a)<=lt.PRECISION||Math.abs(f-o)<=lt.PRECISION){const m=e+i/2-(u+d/2),y=s+r/2-(h+f/2);for(const{line:b,points:_}of l(this,Hn))lt._translate(b,m,y,b),lt._translate(_,m,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*a)/(d-2*a),v=(r-2*o)/(f-2*o),p=-g*(u+a)+e+a,w=-v*(h+o)+s+o;if(g!==1||v!==1||p!==0||w!==0)for(const{line:m,points:y}of l(this,Hn))lt._rescale(m,p,w,g,v,m),lt._rescale(y,p,w,g,v,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,a]=i,o=l(this,un),c=e-o[0],u=s-o[1];if(l(this,li)===r&&l(this,ci)===a)for(const{line:h,points:d}of l(this,Hn))lt._translate(h,c,u,h),lt._translate(d,c,u,d);else{const h=l(this,li)/r,d=l(this,ci)/a;x(this,li,r),x(this,ci,a);for(const{line:f,points:g}of l(this,Hn))lt._rescale(f,c,u,h,d,f),lt._rescale(g,c,u,h,d,g);o[2]*=h,o[3]*=d}return o[0]=e,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(s)}`}}}get defaultSVGProperties(){const e=l(this,un);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};un=new WeakMap,kd=new WeakMap,Ed=new WeakMap,Hn=new WeakMap,li=new WeakMap,ci=new WeakMap,wc=new WeakMap,bc=new WeakMap,xc=new WeakMap,Ue=new WeakSet,xi=function(e=l(this,xc)){const s=l(this,Ed)+e/2*l(this,wc);return l(this,bc)%180===0?[s/l(this,li),s/l(this,ci)]:[s/l(this,ci),s/l(this,li)]},RA=function(){const[e,s,i,r]=l(this,un),[a,o]=T(this,Ue,xi).call(this,0);return[e+a,s+o,i-2*a,r-2*o]},NA=function(){const e=x(this,un,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,Hn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);e[0]=Math.min(e[0],h),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],h),e[3]=Math.max(e[3],d)}continue}let a=r[4],o=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,g,v,p]=r.subarray(c,c+6);ft.bezierBoundingBox(a,o,h,d,f,g,v,p,e),a=v,o=p}}const[s,i]=T(this,Ue,xi).call(this);e[0]=Math.min(1,Math.max(0,e[0]-s)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+s)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},IA=function(e){const[s,i]=T(this,Ue,xi).call(this);x(this,xc,e);const[r,a]=T(this,Ue,xi).call(this),[o,c]=[r-s,a-i],u=l(this,un);return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u};let Ip=Iy;var _c;const Ly=class Ly extends uT{constructor(e){super();C(this,_c);x(this,_c,e),super.updateProperties({fill:"none",stroke:se._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,s){e==="stroke-width"&&(s??(s=this["stroke-width"]),s*=l(this,_c).realScale),super.updateSVGProperty(e,s)}clone(){const e=new Ly(l(this,_c));return e.updateAll(this),e}};_c=new WeakMap;let ov=Ly;var Kp,LA;const dl=class dl extends sv{constructor(e){super({...e,name:"inkEditor"});C(this,Kp);this._willKeepAspectRatio=!0}static initialize(e,s){se.initialize(e,s),this._defaultDrawingOptions=new ov(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,a){return new hT(e,s,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,a,o){return Ip.deserialize(e,s,i,r,a,o)}static async deserialize(e,s,i){let r=null;if(e instanceof Cy){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:v},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:At.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:o},boxes:null,pageIndex:p-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:v}}const a=await super.deserialize(e,s,i);return a.annotationElementId=e.id||null,a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=dl.getDefaultDrawingOptions({stroke:ft.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u={annotationType:At.INK,color:se._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!T(this,Kp,LA).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Kp=new WeakSet,LA=function(e){const{color:s,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((o,c)=>o!==s[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==a},gt(dl,"_type","ink"),gt(dl,"_editorType",At.INK),gt(dl,"_defaultDrawingOptions",null);let lv=dl;var ee,Be,Wr,Xi,Gr,Ac,ui,hi,Un,Sc,Ft,_u,Au,qf,uv,Kf,hv,Zf,MA;const Fu=class Fu extends se{constructor(e){super({...e,name:"stampEditor"});C(this,Ft);C(this,ee,null);C(this,Be,null);C(this,Wr,null);C(this,Xi,null);C(this,Gr,null);C(this,Ac,"");C(this,ui,null);C(this,hi,null);C(this,Un,!1);C(this,Sc,!1);x(this,Xi,e.bitmapUrl),x(this,Gr,e.bitmapFile)}static initialize(e,s){se.initialize(e,s)}static get supportedTypes(){return Ct(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Ct(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(At.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;l(this,Be)&&(x(this,ee,null),this._uiManager.imageManager.deleteId(l(this,Be)),(e=l(this,ui))==null||e.remove(),x(this,ui,null),l(this,hi)&&(clearTimeout(l(this,hi)),x(this,hi,null))),super.remove()}rebuild(){if(!this.parent){l(this,Be)&&T(this,Ft,qf).call(this);return}super.rebuild(),this.div!==null&&(l(this,Be)&&l(this,ui)===null&&T(this,Ft,qf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Wr)||l(this,ee)||l(this,Xi)||l(this,Gr)||l(this,Be))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ee)?T(this,Ft,uv).call(this):T(this,Ft,qf).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,hi)!==null&&clearTimeout(l(this,hi)),x(this,hi,setTimeout(()=>{x(this,hi,null),T(this,Ft,hv).call(this)},200))}copyCanvas(e,s,i=!1){var g;e||(e=224);const{width:r,height:a}=l(this,ee),o=new o0;let c=l(this,ee),u=r,h=a,d=null;if(s){if(r>s||a>s){const I=Math.min(s/r,s/a);u=Math.floor(r*I),h=Math.floor(a*I)}d=document.createElement("canvas");const v=d.width=Math.ceil(u*o.sx),p=d.height=Math.ceil(h*o.sy);l(this,Un)||(c=T(this,Ft,Kf).call(this,v,p));const w=d.getContext("2d");w.filter=this._uiManager.hcmFilter;let m="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",y="#42414d");const b=15,_=b*o.sx,S=b*o.sy,R=new OffscreenCanvas(_*2,S*2),P=R.getContext("2d");P.fillStyle=m,P.fillRect(0,0,_*2,S*2),P.fillStyle=y,P.fillRect(0,0,_,S),P.fillRect(_,S,_,S),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,v,p),w.drawImage(c,0,0,c.width,c.height,0,0,v,p)}let f=null;if(i){let v,p;if(o.symmetric&&c.width<e&&c.height<e)v=c.width,p=c.height;else if(c=l(this,ee),r>e||a>e){const y=Math.min(e/r,e/a);v=Math.floor(r*y),p=Math.floor(a*y),l(this,Un)||(c=T(this,Ft,Kf).call(this,v,p))}const m=new OffscreenCanvas(v,p).getContext("2d",{willReadFrequently:!0});m.drawImage(c,0,0,c.width,c.height,0,0,v,p),f={width:v,height:p,data:m.getImageData(0,0,v,p).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,ui)}static async deserialize(e,s,i){var p;let r=null;if(e instanceof eA){const{data:{rect:w,rotation:m,id:y,structParent:b,popupRef:_},container:S,parent:{page:{pageNumber:R}}}=e,P=S.querySelector("canvas"),I=i.imageManager.getFromCanvas(S.id,P);P.remove();const M=((p=await s._structTree.getAriaAttributes(`${wy}${y}`))==null?void 0:p.get("aria-label"))||"";r=e={annotationType:At.STAMP,bitmapId:I.id,bitmap:I.bitmap,pageIndex:R-1,rect:w.slice(0),rotation:m,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:b,popupRef:_}}const a=await super.deserialize(e,s,i),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=e;h&&i.imageManager.isValidId(h)?(x(a,Be,h),c&&x(a,ee,c)):x(a,Xi,u),x(a,Un,d);const[g,v]=a.pageDimensions;return a.width=(o[2]-o[0])/g,a.height=(o[3]-o[1])/v,a.annotationElementId=e.id||null,f&&(a.altTextData=f),a._initialData=r,x(a,Sc,!!r),a}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:At.STAMP,bitmapId:l(this,Be),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Un),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=T(this,Ft,Zf).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=T(this,Ft,MA).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const o=l(this,Un)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(l(this,Be)))s.stamps.set(l(this,Be),{area:o,serialized:i}),i.bitmap=T(this,Ft,Zf).call(this,!1);else if(l(this,Un)){const c=s.stamps.get(l(this,Be));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=T(this,Ft,Zf).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ee=new WeakMap,Be=new WeakMap,Wr=new WeakMap,Xi=new WeakMap,Gr=new WeakMap,Ac=new WeakMap,ui=new WeakMap,hi=new WeakMap,Un=new WeakMap,Sc=new WeakMap,Ft=new WeakSet,_u=function(e,s=!1){if(!e){this.remove();return}x(this,ee,e.bitmap),s||(x(this,Be,e.id),x(this,Un,e.isSvg)),e.file&&x(this,Ac,e.file.name),T(this,Ft,uv).call(this)},Au=function(){if(x(this,Wr,null),this._uiManager.enableWaiting(!1),!!l(this,ui)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ee)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ee)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},qf=function(){if(l(this,Be)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Be)).then(i=>T(this,Ft,_u).call(this,i,!0)).finally(()=>T(this,Ft,Au).call(this));return}if(l(this,Xi)){const i=l(this,Xi);x(this,Xi,null),this._uiManager.enableWaiting(!0),x(this,Wr,this._uiManager.imageManager.getFromUrl(i).then(r=>T(this,Ft,_u).call(this,r)).finally(()=>T(this,Ft,Au).call(this)));return}if(l(this,Gr)){const i=l(this,Gr);x(this,Gr,null),this._uiManager.enableWaiting(!0),x(this,Wr,this._uiManager.imageManager.getFromFile(i).then(r=>T(this,Ft,_u).call(this,r)).finally(()=>T(this,Ft,Au).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Fu.supportedTypesStr;const s=this._uiManager._signal;x(this,Wr,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,Ft,_u).call(this,r)}i()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>T(this,Ft,Au).call(this))),e.click()},uv=function(){var d;const{div:e}=this;let{width:s,height:i}=l(this,ee);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const f=Math.min(o*r/s,o*a/i);s*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/a),this._uiManager.enableWaiting(!1);const h=x(this,ui,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/r,this.height=i/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),T(this,Ft,hv).call(this),l(this,Sc)||(this.parent.addUndoableEditor(this),x(this,Sc,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Ac)&&h.setAttribute("aria-label",l(this,Ac))},Kf=function(e,s){const{width:i,height:r}=l(this,ee);let a=i,o=r,c=l(this,ee);for(;a>2*e||o>2*s;){const u=a,h=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},hv=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,a=new o0,o=Math.ceil(i*e*a.sx),c=Math.ceil(r*s*a.sy),u=l(this,ui);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=l(this,Un)?l(this,ee):T(this,Ft,Kf).call(this,o,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,c)},Zf=function(e){if(e){if(l(this,Un)){const r=this._uiManager.imageManager.getSvgUrl(l(this,Be));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,ee),s.getContext("2d").drawImage(l(this,ee),0,0),s.toDataURL()}if(l(this,Un)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*ua.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ua.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(l(this,ee),0,0,l(this,ee).width,l(this,ee).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(l(this,ee))},MA=function(e){var o;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,a=(((o=e.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},gt(Fu,"_type","stamp"),gt(Fu,"_editorType",At.STAMP);let cv=Fu;var To,kc,di,Vr,Yi,os,Xr,Ec,Po,Is,qi,Je,Ki,dt,Yr,Qt,FA,Ys,fv,pv,Qf;const ws=class ws{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){C(this,Qt);C(this,To);C(this,kc,!1);C(this,di,null);C(this,Vr,null);C(this,Yi,null);C(this,os,new Map);C(this,Xr,!1);C(this,Ec,!1);C(this,Po,!1);C(this,Is,null);C(this,qi,null);C(this,Je,null);C(this,Ki,null);C(this,dt);const d=[...l(ws,Yr).values()];if(!ws._initialized){ws._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),x(this,dt,t),this.pageIndex=e,this.div=s,x(this,To,r),x(this,di,a),this.viewport=u,x(this,Je,c),this.drawLayer=o,this._structTree=i,l(this,dt).addLayer(this)}get isEmpty(){return l(this,os).size===0}get isInvisible(){return this.isEmpty&&l(this,dt).getMode()===At.NONE}updateToolbar(t){l(this,dt).updateToolbar(t)}updateMode(t=l(this,dt).getMode()){switch(T(this,Qt,Qf).call(this),t){case At.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(ws,Yr).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Je))==null?void 0:e.div)}setEditingState(t){l(this,dt).setEditingState(t)}addCommands(t){l(this,dt).addCommands(t)}cleanUndoStack(t){l(this,dt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,di))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,Po,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,os).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,dt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,di)){x(this,Po,!1);return}const e=l(this,di).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,dt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}x(this,Po,!1)}disable(){var i;x(this,Ec,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,os).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,di)){const r=l(this,di).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(l(this,dt).isDeletedAnnotationElement(o))continue;let c=e.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(o),c&&(l(this,dt).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}T(this,Qt,Qf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(ws,Yr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Ec,!1)}getEditableAnnotation(t){var e;return((e=l(this,di))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,dt).getActive()!==t&&l(this,dt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Je))!=null&&t.div&&!l(this,Ki)){x(this,Ki,new AbortController);const e=l(this,dt).combinedSignal(l(this,Ki));l(this,Je).div.addEventListener("pointerdown",T(this,Qt,FA).bind(this),{signal:e}),l(this,Je).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Je))!=null&&t.div&&l(this,Ki)&&(l(this,Ki).abort(),x(this,Ki,null),l(this,Je).div.classList.remove("highlighting"))}enableClick(){if(l(this,Vr))return;x(this,Vr,new AbortController);const t=l(this,dt).combinedSignal(l(this,Vr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Vr))==null||t.abort(),x(this,Vr,null)}attach(t){l(this,os).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,dt).isDeletedAnnotationElement(e)&&l(this,dt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,os).delete(t.id),(e=l(this,To))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,Ec)&&t.annotationElementId&&l(this,dt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,dt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,dt).addDeletedAnnotationElement(t.annotationElementId),se.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,dt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,Po)),l(this,dt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Yi)&&(t._focusEventsAllowed=!1,x(this,Yi,setTimeout(()=>{x(this,Yi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,dt)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,To))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,dt).getId()}combinedSignal(t){return l(this,dt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,Qt,Ys))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){l(this,dt).updateToolbar(t),l(this,dt).updateMode(t);const{offsetX:s,offsetY:i}=T(this,Qt,pv).call(this),r=this.getNextId(),a=T(this,Qt,fv).call(this,{parent:this,id:r,x:s,y:i,uiManager:l(this,dt),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=l(ws,Yr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,dt)))||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=T(this,Qt,fv).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,dt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(T(this,Qt,pv).call(this),!0)}setSelected(t){l(this,dt).setSelected(t)}toggleSelected(t){l(this,dt).toggleSelected(t)}unselect(t){l(this,dt).unselect(t)}pointerup(t){var s;const{isMac:e}=pn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&l(this,Xr)&&(x(this,Xr,!1),!((s=l(this,Qt,Ys))!=null&&s.isDrawer&&l(this,Qt,Ys).supportMultipleDrawings))){if(!l(this,kc)){x(this,kc,!0);return}if(l(this,dt).getMode()===At.STAMP){l(this,dt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(l(this,dt).getMode()===At.HIGHLIGHT&&this.enableTextSelection(),l(this,Xr)){x(this,Xr,!1);return}const{isMac:e}=pn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,Xr,!0),(i=l(this,Qt,Ys))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=l(this,dt).getActive();x(this,kc,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus(),l(this,Is)){l(this,Qt,Ys).startDrawing(this,l(this,dt),!1,t);return}l(this,dt).setCurrentDrawingSession(this),x(this,Is,new AbortController);const e=l(this,dt).combinedSignal(l(this,Is));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(x(this,qi,null),this.commitOrRemove())},{signal:e}),l(this,Qt,Ys).startDrawing(this,l(this,dt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,qi,e);return}l(this,qi)&&setTimeout(()=>{var e;(e=l(this,qi))==null||e.focus(),x(this,qi,null)},0)}endDrawingSession(t=!1){return l(this,Is)?(l(this,dt).setCurrentDrawingSession(null),l(this,Is).abort(),x(this,Is,null),x(this,qi,null),l(this,Qt,Ys).endDrawing(t)):null}findNewParent(t,e,s){const i=l(this,dt).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,Is)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Is)&&l(this,Qt,Ys).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,dt).getActive())==null?void 0:t.parent)===this&&(l(this,dt).commitOrRemove(),l(this,dt).setActiveEditor(null)),l(this,Yi)&&(clearTimeout(l(this,Yi)),x(this,Yi,null));for(const s of l(this,os).values())(e=l(this,To))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,os).clear(),l(this,dt).removeLayer(this)}render({viewport:t}){this.viewport=t,jo(this.div,t);for(const e of l(this,dt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,dt).commitOrRemove(),T(this,Qt,Qf).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,jo(this.div,{rotation:s}),e!==s)for(const i of l(this,os).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,dt).viewParameters.realScale}};To=new WeakMap,kc=new WeakMap,di=new WeakMap,Vr=new WeakMap,Yi=new WeakMap,os=new WeakMap,Xr=new WeakMap,Ec=new WeakMap,Po=new WeakMap,Is=new WeakMap,qi=new WeakMap,Je=new WeakMap,Ki=new WeakMap,dt=new WeakMap,Yr=new WeakMap,Qt=new WeakSet,FA=function(t){l(this,dt).unselectAll();const{target:e}=t;if(e===l(this,Je).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Je).div.contains(e)){const{isMac:s}=pn.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,dt).showAllEditors("highlight",!0,!0),l(this,Je).div.classList.add("free"),this.toggleDrawing(),Np.startHighlighting(this,l(this,dt).direction==="ltr",{target:l(this,Je).div,x:t.x,y:t.y}),l(this,Je).div.addEventListener("pointerup",()=>{l(this,Je).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,dt)._signal}),t.preventDefault()}},Ys=function(){return l(ws,Yr).get(l(this,dt).getMode())},fv=function(t){const e=l(this,Qt,Ys);return e?new e.prototype.constructor(t):null},pv=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+i),u=(r+o)/2-t,h=(a+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Qf=function(){for(const t of l(this,os).values())t.isEmpty()&&t.remove()},gt(ws,"_initialized",!1),C(ws,Yr,new Map([X0,lv,cv,Np].map(t=>[t._editorType,t])));let dv=ws;var Ls,Cd,hn,Ro,Zp,DA,mi,mv,OA,vv;const qe=class qe{constructor({pageIndex:t}){C(this,mi);C(this,Ls,null);C(this,Cd,0);C(this,hn,new Map);C(this,Ro,new Map);this.pageIndex=t}setParent(t){if(!l(this,Ls)){x(this,Ls,t);return}if(l(this,Ls)!==t){if(l(this,hn).size>0)for(const e of l(this,hn).values())e.remove(),t.append(e);x(this,Ls,t)}}static get _svgFactory(){return Ct(this,"_svgFactory",new Ey)}draw(t,e=!1,s=!1){const i=an(this,Cd)._++,r=T(this,mi,mv).call(this),a=qe._svgFactory.createElement("defs");r.append(a);const o=qe._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Ro).set(i,o);const u=s?T(this,mi,OA).call(this,a,c):null,h=qe._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,hn).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const s=an(this,Cd)._++,i=T(this,mi,mv).call(this),r=qe._svgFactory.createElement("defs");i.append(r);const a=qe._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=qe._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=qe._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=qe._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${o}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=qe._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,hn).set(s,i),s}finalizeDraw(t,e){l(this,Ro).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:i,rootClass:r,path:a}=e,o=typeof t=="number"?l(this,hn).get(t):t;if(o){if(s&&T(this,mi,vv).call(this,o,s),i&&T(c=qe,Zp,DA).call(c,o,i),r){const{classList:u}=o;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(a){const h=o.firstChild.firstChild;T(this,mi,vv).call(this,h,a)}}}updateParent(t,e){if(e===this)return;const s=l(this,hn).get(t);s&&(l(e,Ls).append(s),l(this,hn).delete(t),l(e,hn).set(t,s))}remove(t){l(this,Ro).delete(t),l(this,Ls)!==null&&(l(this,hn).get(t).remove(),l(this,hn).delete(t))}destroy(){x(this,Ls,null);for(const t of l(this,hn).values())t.remove();l(this,hn).clear(),l(this,Ro).clear()}};Ls=new WeakMap,Cd=new WeakMap,hn=new WeakMap,Ro=new WeakMap,Zp=new WeakSet,DA=function(t,[e,s,i,r]){const{style:a}=t;a.top=`${100*s}%`,a.left=`${100*e}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},mi=new WeakSet,mv=function(){const t=qe._svgFactory.create(1,1,!0);return l(this,Ls).append(t),t.setAttribute("aria-hidden",!0),t},OA=function(t,e){const s=qe._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=qe._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},vv=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},C(qe,Zp);let gv=qe;globalThis.pdfjsTestingUtils={HighlightOutliner:q0};wt.AbortException;wt.AnnotationEditorLayer;wt.AnnotationEditorParamsType;wt.AnnotationEditorType;wt.AnnotationEditorUIManager;wt.AnnotationLayer;wt.AnnotationMode;wt.ColorPicker;wt.DOMSVGFactory;wt.DrawLayer;wt.FeatureTest;var dT=wt.GlobalWorkerOptions;wt.ImageKind;wt.InvalidPDFException;wt.MissingPDFException;wt.OPS;wt.OutputScale;wt.PDFDataRangeTransport;wt.PDFDateString;wt.PDFWorker;wt.PasswordResponses;wt.PermissionFlag;wt.PixelsPerInch;wt.RenderingCancelledException;wt.TextLayer;wt.TouchManager;wt.UnexpectedResponseException;wt.Util;wt.VerbosityLevel;wt.XfaLayer;wt.build;wt.createValidAbsoluteUrl;wt.fetchData;var fT=wt.getDocument;wt.getFilenameFromUrl;wt.getPdfFilenameFromUrl;wt.getXfaPageViewport;wt.isDataScheme;wt.isPdfFile;wt.noContextMenu;wt.normalizeUnicode;wt.setLayerDimensions;wt.shadow;wt.stopEvent;wt.version;dT.workerSrc="https://esm.sh/pdfjs-dist@4.10.38/build/pdf.worker.min.mjs";const pT=()=>{const[n,t]=ht.useState([]),[e,s]=ht.useState(!1),[i,r]=ht.useState(""),[a,o]=ht.useState(null),[c,u]=ht.useState(null),h=async p=>{const w=p.filter(m=>m.type==="application/pdf");if(w.length!==0){s(!0);try{for(const m of w){r(`Loading ${m.name}...`);const y=await m.arrayBuffer(),b=await fT(y).promise,_=[];let S="";for(let R=1;R<=b.numPages;R++){r(`Rendering ${m.name} (${R}/${b.numPages})`);const P=await b.getPage(R),I=P.getViewport({scale:2}),M=document.createElement("canvas"),D=M.getContext("2d");if(D){M.height=I.height,M.width=I.width,await P.render({canvasContext:D,viewport:I}).promise;const $=await new Promise(N=>M.toBlob(N,"image/png"));if($){const N=URL.createObjectURL($);_.push({num:R,url:N,blob:$,checked:!0}),R===1&&(S=N)}}}t(R=>[{id:Math.random().toString(36).substr(2,9),name:m.name,pdf:b,pages:_,thumbnail:S},...R])}}catch(m){console.error(m),alert("Error processing PDF. Please check file format.")}finally{s(!1),r("")}}},d=async p=>{const w=p.pages.filter(y=>y.checked);if(w.length===0)return;const m=w.map(y=>({name:`${y.num}.png`,blob:y.blob}));await Bc(m,`${p.name}_images.zip`)},f=(p,w,m)=>{t(y=>y.map(b=>b.id!==p?b:{...b,pages:b.pages.map(_=>_.num===w?{..._,checked:m}:_)}))},g=(p,w)=>{t(m=>m.map(y=>y.id!==p?y:{...y,pages:y.pages.map(b=>({...b,checked:w}))}))},v=n.find(p=>p.id===a);return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 h-full",children:[E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsx(zc,{onFiles:h,accept:"application/pdf",icon:E.jsx(Oc,{size:24}),label:"Add PDFs"}),e&&E.jsxs(zs,{children:[E.jsx("div",{className:"text-sm text-gray-400 mb-2 flex justify-between",children:E.jsx("span",{children:"Processing..."})}),E.jsx("div",{className:"w-full bg-[#333] h-2 rounded overflow-hidden",children:E.jsx("div",{className:"bg-red-500 h-full w-full animate-pulse"})}),E.jsx("p",{className:"text-xs text-gray-500 mt-2",children:i})]}),E.jsx(pe,{variant:"danger",onClick:()=>t([]),disabled:n.length===0,children:"Clear All"})]}),E.jsx("div",{className:"overflow-y-auto",children:n.length===0?E.jsx(Md,{icon:E.jsx(dy,{size:48}),message:"No PDFs Loaded"}):E.jsx("div",{className:"flex flex-wrap gap-6 content-start",children:n.map(p=>E.jsxs("div",{onClick:()=>o(p.id),className:"w-48 flex flex-col bg-[#111] border border-[#333] rounded-lg overflow-hidden cursor-pointer hover:border-red-500 hover:-translate-y-1 transition-all group",children:[E.jsx("div",{className:"aspect-[1/1.4] bg-black flex items-center justify-center overflow-hidden p-2",children:E.jsx("img",{src:p.thumbnail,alt:p.name,className:"object-contain w-full h-full opacity-80 group-hover:opacity-100 transition-opacity shadow-lg"})}),E.jsxs("div",{className:"p-3 border-t border-[#333] bg-[#18181b]",children:[E.jsx("div",{className:"font-semibold truncate text-xs mb-1 text-gray-300 group-hover:text-white",children:p.name}),E.jsxs("div",{className:"text-[10px] text-gray-500",children:[p.pages.length," Pages"]})]})]},p.id))})}),v&&E.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex flex-col p-6 animate-in fade-in duration-200",children:[E.jsxs("div",{className:"flex items-center justify-between border-b border-[#333] pb-4 mb-6 shrink-0",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"font-display text-2xl font-bold",children:v.name}),E.jsxs("span",{className:"text-gray-500 text-sm",children:[v.pages.length," Pages"]})]}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx(Ju,{checked:v.pages.every(p=>p.checked),onChange:p=>g(v.id,p),label:"Select All"})}),E.jsx(pe,{variant:"red",onClick:()=>d(v),children:"Download Selected"}),E.jsx(pe,{variant:"secondary",onClick:()=>o(null),children:E.jsx(Sp,{size:20})})]})]}),E.jsx("div",{className:"overflow-y-auto min-h-0",children:E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 pb-20",children:v.pages.map(p=>E.jsxs("div",{className:"bg-[#111] border border-[#333] rounded-lg overflow-hidden flex flex-col group relative",children:[E.jsxs("div",{className:"aspect-[1/1.4] bg-black p-2 cursor-zoom-in",onClick:()=>u(p.url),children:[E.jsx("img",{src:p.url,className:"w-full h-full object-contain shadow-sm"}),E.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:E.jsx(Sk,{className:"text-white drop-shadow-lg"})})]}),E.jsxs("div",{className:"p-2 flex justify-between items-center bg-[#181818] border-t border-[#333]",children:[E.jsxs("span",{className:"text-[10px] text-gray-500",children:["Page ",p.num]}),E.jsxs("div",{className:"flex gap-2 items-center",children:[E.jsx("button",{className:"text-gray-400 hover:text-white",onClick:()=>Fd(p.blob,`${p.num}.png`),children:E.jsx(Ld,{size:14})}),E.jsx("input",{type:"checkbox",checked:p.checked,onChange:w=>f(v.id,p.num,w.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-[#333] text-blue-600 focus:ring-0 cursor-pointer"})]})]})]},p.num))})})]}),c&&E.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center p-8 animate-in zoom-in duration-200",onClick:()=>u(null),children:[E.jsx("img",{src:c,className:"max-w-full max-h-full object-contain shadow-2xl",onClick:p=>p.stopPropagation()}),E.jsx("button",{className:"absolute top-6 right-6 text-white/50 hover:text-white p-2",onClick:()=>u(null),children:E.jsx(Sp,{size:32})})]})]})},gT=()=>{const[n,t]=ht.useState([]),[e,s]=ht.useState(2),[i,r]=ht.useState(2),[a,o]=ht.useState("grid"),[c,u]=ht.useState(!1),h=g=>{const v=g.filter(p=>p.type.startsWith("image/")).map(p=>({id:Math.random().toString(36).substr(2,9),file:p,url:URL.createObjectURL(p),checked:!0,blobs:[]}));t(p=>[...p,...v])},d=async()=>{u(!0);const g=[...n];for(const v of g){if(!v.checked)continue;const p=new Image;p.src=v.url,await new Promise(S=>p.onload=S);const w=a==="vert"?1:e,m=a==="horz"?1:i,y=p.naturalWidth/m,b=p.naturalHeight/w,_=[];for(let S=0;S<w;S++)for(let R=0;R<m;R++){const P=document.createElement("canvas");P.width=y,P.height=b;const I=P.getContext("2d");if(I){I.drawImage(p,R*y,S*b,y,b,0,0,y,b);const M=await new Promise(D=>P.toBlob(D,v.file.type));M&&_.push(M)}}v.blobs=_}t(g),u(!1)},f=async()=>{const g=[];let v=1;n.forEach(p=>{if(p.checked&&p.blobs.length>0){const w=p.file.name.split(".").pop();p.blobs.forEach(m=>{g.push({name:`${v}.${w}`,blob:m}),v++})}}),g.length>0&&await Bc(g,"split_images.zip")};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 h-full min-h-0",children:[E.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto pr-2 pb-20 lg:pb-0 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:[E.jsx(zc,{onFiles:h,accept:"image/*",icon:E.jsx(Oc,{size:24}),label:"Add Images"}),E.jsxs(zs,{children:[E.jsx("span",{className:"text-xs font-bold text-[#888] uppercase tracking-wide mb-4 block",children:"Configuration"}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs(vy,{value:a,onChange:g=>o(g.target.value),children:[E.jsx("option",{value:"vert",children:"Columns Only"}),E.jsx("option",{value:"horz",children:"Rows Only"}),E.jsx("option",{value:"grid",children:"Grid (Rows & Cols)"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"text-xs text-[#888] font-medium",children:"Rows"}),E.jsx(tn,{type:"number",min:1,value:e,onChange:g=>s(Number(g.target.value)),disabled:a==="vert"})]}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"text-xs text-[#888] font-medium",children:"Cols"}),E.jsx(tn,{type:"number",min:1,value:i,onChange:g=>r(Number(g.target.value)),disabled:a==="horz"})]})]}),E.jsxs("div",{className:"flex flex-col gap-3 mt-2",children:[E.jsx(pe,{variant:"secondary",onClick:d,disabled:c||n.length===0,children:c?"Processing...":"Process"}),E.jsx(pe,{variant:"orange",onClick:f,disabled:!n.some(g=>g.blobs.length>0),children:"Download Zip"}),E.jsx(pe,{variant:"danger",onClick:()=>t([]),children:"Reset"})]})]})]})]}),E.jsx("div",{className:"overflow-y-auto pb-20 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:n.length===0?E.jsx(Md,{icon:E.jsx(gy,{size:48}),message:"No images added"}):E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(g=>E.jsxs("div",{className:"bg-[#111] border border-[#333] rounded-[16px] overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[E.jsxs("div",{className:"relative aspect-square bg-black group p-4",children:[E.jsx("img",{src:g.url,className:"w-full h-full object-contain"}),E.jsx("div",{className:"absolute inset-0 pointer-events-none grid border border-white/20 mx-4 my-4",style:{gridTemplateColumns:`repeat(${a==="horz"?1:i}, 1fr)`,gridTemplateRows:`repeat(${a==="vert"?1:e}, 1fr)`},children:Array.from({length:(a==="horz"?1:i)*(a==="vert"?1:e)}).map((v,p)=>E.jsx("div",{className:"border border-white/30"},p))})]}),E.jsxs("div",{className:"p-3 bg-[#181818] border-t border-[#333] flex justify-between items-center",children:[E.jsx("span",{className:"text-xs text-[#ccc] truncate max-w-[150px]",children:g.file.name}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-[10px] text-[#FFDBCC] font-bold uppercase tracking-wider",children:g.blobs.length>0?`Done (${g.blobs.length})`:"Ready"}),E.jsx("input",{type:"checkbox",checked:g.checked,onChange:v=>t(p=>p.map(w=>w.id===g.id?{...w,checked:v.target.checked}:w)),className:"w-4 h-4 accent-[#FFDBCC] bg-[#333] border-[#444] rounded"})]})]})]},g.id))})})]})},mT=()=>{const[n,t]=ht.useState([{id:1,name:"Board_1",images:[],gap:0,width:1920,autoWidth:!0}]),[e,s]=ht.useState(1),[i,r]=ht.useState({w:0,h:0}),a=ht.useRef(null),o=n.find(p=>p.id===e)||n[0],c=p=>{t(w=>w.map(m=>{if(m.id!==e)return m;const y={...m,...p};return p.name&&(y.name=Lu(p.name)),y}))},u=async p=>{var m;const w=[];for(const y of p)if(y.type.startsWith("image/")){const b=new Image;b.src=URL.createObjectURL(y),await new Promise(_=>b.onload=_),w.push({id:Math.random().toString(36),img:b,file:y})}else if(y.type.startsWith("video/")){const b=document.createElement("video");b.src=URL.createObjectURL(y),b.muted=!0,b.playsInline=!0,await new Promise(R=>{b.onloadedmetadata=R}),b.currentTime=1,await new Promise(R=>b.onseeked=R);const _=document.createElement("canvas");_.width=b.videoWidth,_.height=b.videoHeight,(m=_.getContext("2d"))==null||m.drawImage(b,0,0);const S=new Image;S.src=_.toDataURL("image/jpeg"),await new Promise(R=>S.onload=R),w.push({id:Math.random().toString(36),img:S,file:y})}c({images:[...o.images,...w]})},h=()=>{if(!a.current||o.images.length===0){r({w:0,h:0});return}const{images:p,gap:w,width:m,autoWidth:y}=o,b=p.length;let _=1,S=1;b===4?(_=2,S=2):b===9?(_=3,S=3):b===16?(_=4,S=4):(_=Math.ceil(Math.sqrt(b)),S=Math.ceil(b/_));const R=p[0].img;let P=y?R.naturalWidth*_:m;P>8192&&(P=8192);const I=R.naturalWidth/R.naturalHeight,M=P*(S/_)/I,D=a.current;D.width=P,D.height=M,r({w:Math.round(P),h:Math.round(M)});const $=D.getContext("2d");if(!$)return;$.fillStyle="#ffffff",$.fillRect(0,0,P,M);const N=(P-w*(_+1))/_,B=(M-w*(S+1))/S;let k=0;for(let G=0;G<S;G++){const Y=p.length-k,H=Math.min(_,Y);if(H<=0)break;const X=(_-H)*(N+w)/2;for(let U=0;U<H;U++){const K=p[k],O=w+U*(N+w)+X,j=w+G*(B+w),it=K.img.naturalWidth/K.img.naturalHeight,nt=N/B;let J,vt,yt,bt;it>nt?(vt=K.img.naturalHeight,J=vt*nt,bt=0,yt=(K.img.naturalWidth-J)/2):(J=K.img.naturalWidth,vt=J/nt,yt=0,bt=(K.img.naturalHeight-vt)/2),$.drawImage(K.img,yt,bt,J,vt,O,j,N,B),k++}}D.toBlob(G=>{G&&t(Y=>Y.map(H=>H.id===o.id?{...H,canvasBlob:G}:H))},"image/jpeg",.9)};ht.useEffect(()=>{h()},[o.images,o.gap,o.width,o.autoWidth]);const d=(p,w)=>{const m=[...o.images],y=p+w;y<0||y>=m.length||([m[p],m[y]]=[m[y],m[p]],c({images:m}))},f=p=>{const w=[...o.images];w.splice(p,1),c({images:w})},g=()=>{a.current&&a.current.toBlob(p=>{p&&Fd(p,`${o.name}.jpg`)},"image/jpeg",.9)},v=async()=>{const p=[],w=n.filter(m=>m.canvasBlob);w.length>0?(w.forEach(m=>{p.push({name:`${m.name}.jpg`,blob:m.canvasBlob})}),await Bc(p,"storyboards.zip")):o.images.length>0&&g()};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr_280px] gap-6 h-full",children:[E.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto lg:h-full lg:pr-2 order-2 lg:order-1",children:[E.jsxs(zs,{className:"p-4",children:[E.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.map(p=>E.jsxs("div",{onClick:()=>s(p.id),className:`px-3 py-1.5 text-xs rounded cursor-pointer flex items-center gap-2 border transition-colors ${e===p.id?"bg-purple-600/20 border-purple-500 text-purple-200":"bg-[#18181b] border-[#27272a] text-gray-400 hover:border-gray-500"}`,children:[p.name,n.length>1&&E.jsx("span",{className:"hover:text-white",onClick:w=>{w.stopPropagation(),t(m=>m.filter(y=>y.id!==p.id)),e===p.id&&s(n[0].id)},children:""})]},p.id))}),E.jsx(pe,{className:"w-full h-8 text-xs",onClick:()=>{const p=Date.now();t([...n,{id:p,name:`Board_${n.length+1}`,images:[],gap:0,width:1920,autoWidth:!0}]),s(p)},children:"+ New Board"})]}),E.jsx(zc,{onFiles:u,accept:"image/*,video/*",icon:E.jsx(Oc,{size:24}),label:"Add Assets"}),E.jsxs(zs,{children:[E.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Gap"}),E.jsx(tn,{type:"number",value:o.gap,onChange:p=>c({gap:Number(p.target.value)})})]}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Width"}),E.jsx(tn,{type:"number",value:o.width,onChange:p=>c({width:Number(p.target.value)}),disabled:o.autoWidth})]})]}),E.jsx(Ju,{checked:o.autoWidth,onChange:p=>c({autoWidth:p}),label:"Auto Width"})]})]}),E.jsxs("div",{className:"bg-[#09090b] border border-[#27272a] rounded-xl flex items-center justify-center p-8 overflow-hidden relative order-1 lg:order-2 min-h-[400px] pattern-checkers",children:[i.w>0&&E.jsxs("div",{className:"absolute top-4 left-4 bg-black/80 backdrop-blur text-white text-[10px] font-mono px-2 py-1 rounded border border-white/10 z-20",children:[i.w," x ",i.h]}),E.jsx("div",{className:"w-full h-full flex items-center justify-center z-10",children:o.images.length>0?E.jsx("canvas",{ref:a,className:"max-w-full max-h-full object-contain shadow-2xl"}):E.jsx("span",{className:"text-gray-600 font-display text-xl uppercase tracking-widest opacity-30 bg-[#09090b]/80 px-4 py-2 rounded",children:"Preview Area"})})]}),E.jsxs("div",{className:"flex flex-col gap-4 overflow-y-auto lg:h-full lg:pr-1 order-3",children:[E.jsxs(zs,{children:[E.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4 block",children:"Actions"}),E.jsx(tn,{className:"mb-3",value:o.name,onChange:p=>c({name:p.target.value}),placeholder:"Board Name"}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx(pe,{variant:"purple",onClick:g,disabled:o.images.length===0,icon:E.jsx(Ld,{size:14}),children:"Save Current"}),E.jsx(pe,{variant:"tonal",onClick:v,disabled:n.every(p=>p.images.length===0),icon:E.jsx(kk,{size:14}),children:"Download All Projects"}),E.jsx(pe,{variant:"danger",onClick:()=>c({images:[]}),disabled:o.images.length===0,children:"Clear"})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto pr-1 min-h-[200px]",children:E.jsxs("div",{className:"flex flex-col gap-2",children:[o.images.map((p,w)=>E.jsxs("div",{className:"bg-[#18181b] border border-[#27272a] p-2 rounded flex items-center justify-between text-xs hover:border-[#3f3f46] transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("img",{src:p.img.src,className:"w-10 h-10 object-cover rounded bg-black"}),E.jsxs("span",{className:"text-gray-400 font-mono",children:["#",w+1]})]}),E.jsxs("div",{className:"flex gap-1",children:[E.jsx("button",{className:"p-1 hover:bg-[#27272a] rounded text-gray-400 hover:text-white",onClick:()=>d(w,-1),children:E.jsx(bk,{size:14})}),E.jsx("button",{className:"p-1 hover:bg-[#27272a] rounded text-gray-400 hover:text-white",onClick:()=>d(w,1),children:E.jsx(wk,{size:14})}),E.jsx("button",{className:"p-1 hover:bg-red-900/20 rounded text-red-500 hover:text-red-400",onClick:()=>f(w),children:E.jsx(Sp,{size:14})})]})]},p.id)),o.images.length===0&&E.jsx("div",{className:"text-center text-gray-600 text-xs py-10",children:"No images added"})]})})]})]})},vT=()=>{const[n,t]=ht.useState([]),[e,s]=ht.useState(!1),[i,r]=ht.useState(null),a=h=>{const d=h.filter(f=>f.type.startsWith("video/")).map(f=>({id:Math.random().toString(36).substr(2,9),file:f,name:Lu(f.name.replace(/\.[^/.]+$/,"")),frames:[],processed:!1}));t(f=>[...f,...d])},o=async()=>{var d;s(!0);const h=[...n];for(const f of h){if(f.processed)continue;const g=document.createElement("video");g.src=URL.createObjectURL(f.file),g.muted=!0,g.playsInline=!0,await new Promise(m=>{g.onloadedmetadata=m});const v=g.duration,p=Math.floor(v),w=v/(p+1);for(let m=1;m<=p;m++){g.currentTime=m*w,await new Promise(_=>g.onseeked=_);const y=document.createElement("canvas");y.width=g.videoWidth,y.height=g.videoHeight,(d=y.getContext("2d"))==null||d.drawImage(g,0,0);const b=await new Promise(_=>y.toBlob(_,"image/jpeg",.85));b&&f.frames.push({num:m,blob:b,url:URL.createObjectURL(b),checked:!0})}f.processed=!0}t(h),s(!1)},c=async()=>{const h=[];n.forEach(d=>{d.frames.forEach(f=>{h.push({name:`${d.name}/${f.num}.jpg`,blob:f.blob})})}),await Bc(h,"video_stills.zip")},u=n.find(h=>h.id===i);return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 h-full",children:[E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsx(zc,{onFiles:a,accept:"video/*",icon:E.jsx(Oc,{size:24}),label:"Add Videos"}),E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsx(pe,{variant:"secondary",onClick:o,disabled:e||n.length===0,children:e?"Processing...":"Process Videos"}),E.jsx(pe,{variant:"cyan",onClick:c,disabled:!n.some(h=>h.processed),children:"Download All"}),E.jsx(pe,{variant:"danger",onClick:()=>t([]),children:"Reset"})]})]}),E.jsx("div",{className:"overflow-y-auto",children:n.length===0?E.jsx(Md,{icon:E.jsx(Ap,{size:48}),message:"No Videos"}):E.jsx("div",{className:"flex flex-wrap gap-4",children:n.map(h=>E.jsxs("div",{className:`w-48 bg-[#111] border rounded-lg overflow-hidden cursor-pointer hover:border-cyan-500 transition-colors ${h.processed?"border-[#333]":"border-dashed border-gray-700"}`,onClick:()=>h.processed&&r(h.id),children:[E.jsx("div",{className:"aspect-video bg-black flex items-center justify-center",children:h.frames.length>0?E.jsx("img",{src:h.frames[0].url,className:"w-full h-full object-cover"}):E.jsx(Ap,{className:"text-gray-700"})}),E.jsxs("div",{className:"p-3",children:[E.jsx("div",{className:"text-sm font-medium truncate",children:h.name}),E.jsx("div",{className:"text-xs text-gray-500",children:h.processed?`${h.frames.length} frames`:"Pending"})]})]},h.id))})}),u&&E.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex flex-col p-8 animate-in fade-in duration-200",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-[#333]",children:[E.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:u.name}),E.jsx(pe,{variant:"secondary",onClick:()=>r(null),children:"Close"})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 overflow-y-auto",children:u.frames.map(h=>E.jsxs("div",{className:"bg-[#111] border border-[#333] rounded",children:[E.jsx("img",{src:h.url,className:"w-full aspect-video object-contain bg-black"}),E.jsxs("div",{className:"p-2 text-xs text-gray-500 flex justify-between",children:[E.jsxs("span",{children:["Frame ",h.num]}),E.jsx(Ld,{size:14,className:"cursor-pointer hover:text-white",onClick:()=>Fd(h.blob,`${h.num}.jpg`)})]})]},h.num))})]})]})},yT=()=>{const[n,t]=ht.useState("aldi"),[e,s]=ht.useState(""),[i,r]=ht.useState(""),[a,o]=ht.useState(""),[c,u]=ht.useState(""),h=()=>{const f={aldi:"https://aldimediaeu.blob.core.windows.net/aldimediaeu/",s3:"https://s3media-ml-eu.surveycenter.com/"},g=e.trim().replace(/\s+/g,"/").replace(/\/+/g,"/").replace(/^\/|\/$/g,"")+"/",v=i.split(`
`).map(y=>y.trim()).filter(Boolean),p=[],w=[],m=f[n]||"";v.forEach(y=>{var S;const b=(S=y.split(".").pop())==null?void 0:S.toLowerCase(),_=m+g+y;b==="jpg"||b==="png"?(p.push(`<img src="${_}" class="zoomImage" style="max-width:80%">`),w.push(`<img src="${_}" class="zoomImage" style="max-height:280px">`)):b==="mp4"?(p.push(_),w.push(`<img src="${m+g+y.replace(".mp4",".jpg")}" class="zoomImage" style="max-height:280px">`)):b==="mp3"&&(p.push(_),w.push(y))}),o(p.join(`

`)),u(w.join(`
`))},d=f=>{navigator.clipboard.writeText(f)};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 h-full min-h-0",children:[E.jsx("div",{className:"flex flex-col gap-6 overflow-y-auto pr-2 pb-20 lg:pb-0 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:E.jsx(zs,{children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"text-xs text-[#888] uppercase font-bold tracking-wide",children:"Server"}),E.jsxs(vy,{value:n,onChange:f=>t(f.target.value),children:[E.jsx("option",{value:"aldi",children:"ALDI Blob"}),E.jsx("option",{value:"s3",children:"S3 Media"})]})]}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"text-xs text-[#888] uppercase font-bold tracking-wide",children:"Path"}),E.jsx(tn,{placeholder:"Folder/Path",value:e,onChange:f=>s(f.target.value)})]}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"text-xs text-[#888] uppercase font-bold tracking-wide",children:"Filenames"}),E.jsx(Zg,{className:"h-40 font-mono text-xs text-[#7DDAAF]",value:i,onChange:f=>r(f.target.value),placeholder:"Paste filenames here..."})]}),E.jsx(pe,{variant:"emerald",onClick:h,children:"Generate"})]})})}),E.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto pb-20 lg:pb-0 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:[E.jsxs(zs,{className:"flex-1 flex flex-col min-h-[300px]",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("span",{className:"text-xs font-bold text-[#888] uppercase tracking-wide",children:"Ad Exposure Code"}),E.jsx(pe,{className:"h-7 text-xs px-3",onClick:()=>d(a),icon:E.jsx(Vw,{size:12}),variant:"tonal",children:"Copy"})]}),E.jsx(Zg,{readOnly:!0,className:"flex-1 font-mono text-xs text-[#7DDAAF] border-[#333]",value:a})]}),E.jsxs(zs,{className:"flex-1 flex flex-col min-h-[300px]",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("span",{className:"text-xs font-bold text-[#888] uppercase tracking-wide",children:"Storyboard Code"}),E.jsx(pe,{className:"h-7 text-xs px-3",onClick:()=>d(c),icon:E.jsx(Vw,{size:12}),variant:"tonal",children:"Copy"})]}),E.jsx(Zg,{readOnly:!0,className:"flex-1 font-mono text-xs text-[#7DDAAF] border-[#333]",value:c})]})]})]})},wT=()=>{const[n,t]=ht.useState([]),[e,s]=ht.useState(""),[i,r]=ht.useState(""),[a,o]=ht.useState(""),[c,u]=ht.useState(""),[h,d]=ht.useState("none"),[f,g]=ht.useState(!1),[v,p]=ht.useState(!1),[w,m]=ht.useState(1),[y,b]=ht.useState(3),[_,S]=ht.useState(""),R=I=>{const M=I.map(D=>{const $=D.name.lastIndexOf("."),N=$===-1?D.name:D.name.substring(0,$),B=$===-1?"":D.name.substring($);return{id:Math.random().toString(36).substr(2,9),file:D,originalName:N,newName:N,extension:B}});t(D=>[...D,...M])};ht.useEffect(()=>{t(I=>I.map((M,D)=>{let $=M.originalName;if(f&&($=$.replace(/\s+/g,"_"),$=$.replace(/[^a-zA-Z0-9\-_]/g,"")),a)try{$=$.split(a).join(c)}catch{}if(h==="upper"&&($=$.toUpperCase()),h==="lower"&&($=$.toLowerCase()),h==="camel"&&($=$.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(B,k)=>k.toUpperCase())),h==="kebab"&&($=$.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),v){const k=(w+D).toString().padStart(y,"0");$=`${$}_${k}`}$=`${e}${$}${i}`;let N=M.extension;return _&&(N=_.startsWith(".")?_:`.${_}`),{...M,newName:$+N}}))},[e,i,a,c,h,f,v,w,y,_]);const P=async()=>{const I=n.map(M=>({name:M.newName,blob:M.file}));await Bc(I,"renamed_files.zip")};return E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 h-full min-h-0",children:[E.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto pr-2 pb-20 lg:pb-0 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:[E.jsx(zc,{onFiles:R,icon:E.jsx(Oc,{size:24}),label:"Add Files"}),E.jsxs(zs,{children:[E.jsx("span",{className:"text-xs font-bold text-[#888] uppercase tracking-wide mb-4 block",children:"Rules"}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(tn,{placeholder:"Prefix",value:e,onChange:I=>s(I.target.value)}),E.jsx(tn,{placeholder:"Suffix",value:i,onChange:I=>r(I.target.value)})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(tn,{placeholder:"Find",value:a,onChange:I=>o(I.target.value)}),E.jsx(tn,{placeholder:"Replace",value:c,onChange:I=>u(I.target.value)})]}),E.jsx("div",{className:"bg-[#1A1A1A] p-3 rounded-lg border border-[#333]",children:E.jsx(Ju,{checked:f,onChange:g,label:"Clean (Space  _)"})}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"text-xs text-[#666]",children:"Casing"}),E.jsxs(vy,{value:h,onChange:I=>d(I.target.value),children:[E.jsx("option",{value:"none",children:"Original"}),E.jsx("option",{value:"upper",children:"UPPERCASE"}),E.jsx("option",{value:"lower",children:"lowercase"}),E.jsx("option",{value:"camel",children:"camelCase"}),E.jsx("option",{value:"kebab",children:"kebab-case"})]})]}),E.jsxs("div",{className:"flex flex-col gap-2 bg-[#1A1A1A] p-3 rounded-lg border border-[#333]",children:[E.jsx(Ju,{checked:v,onChange:p,label:"Numbering"}),v&&E.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[E.jsx(tn,{type:"number",placeholder:"Start",value:w,onChange:I=>m(Number(I.target.value))}),E.jsx(tn,{type:"number",placeholder:"Digits",value:y,onChange:I=>b(Number(I.target.value))})]})]}),E.jsx("div",{className:"flex flex-col gap-2",children:E.jsx(tn,{placeholder:"New Ext (e.g. .png)",value:_,onChange:I=>S(I.target.value)})}),E.jsx("div",{className:"h-px bg-[#333] my-2"}),E.jsx(pe,{variant:"primary",onClick:P,disabled:n.length===0,icon:E.jsx(Ld,{size:16}),children:"Download"}),E.jsx(pe,{variant:"danger",onClick:()=>t([]),disabled:n.length===0,icon:E.jsx(e0,{size:16}),children:"Clear"})]})]})]}),E.jsx("div",{className:"overflow-y-auto pb-20 custom-scrollbar max-h-[calc(100vh-140px)] lg:max-h-full",children:n.length===0?E.jsx(Md,{icon:E.jsx(py,{size:48}),message:"No files added"}):E.jsx("div",{className:"flex flex-col gap-2",children:n.map(I=>E.jsxs("div",{className:"bg-[#111] border border-[#222] rounded-lg p-3 flex items-center justify-between group hover:border-[#444] transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[E.jsx("div",{className:"w-10 h-10 rounded bg-[#1A1A1A] flex items-center justify-center text-[#666] shrink-0",children:E.jsx(_k,{size:20})}),E.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[E.jsx("div",{className:"flex items-center gap-2 text-xs text-[#666]",children:E.jsxs("span",{className:"truncate max-w-full",children:[I.originalName,I.extension]})}),E.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#E6E1E5]",children:[E.jsx(Rx,{size:14,className:"text-[#666]"}),E.jsx("span",{className:"font-mono truncate font-medium text-[#A8C7FA]",children:I.newName})]})]})]}),E.jsx("button",{className:"p-2 text-[#666] hover:text-[#FFB4AB] transition-colors",onClick:()=>t(M=>M.filter(D=>D.id!==I.id)),children:E.jsx(e0,{size:16})})]},I.id))})})]})},bT=({className:n})=>E.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[E.jsx("path",{d:"M12 2C12 7.523 16.477 12 22 12C16.477 12 12 16.477 12 22C12 16.477 7.523 12 2 12C7.523 12 12 7.523 12 2Z"}),E.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),g1={[Pt.HOME]:{color:"#D0BCFF",bg:"#381E72",name:"Creative Suite"},[Pt.LOGO]:{color:"#A8C7FA",bg:"#0842A0",name:"Logo Resizer"},[Pt.PDF]:{color:"#F2B8B5",bg:"#8C1D18",name:"PDF Convert"},[Pt.SPLIT]:{color:"#FFDBCC",bg:"#8B5000",name:"Image Splitter"},[Pt.STILLS]:{color:"#A6EEFF",bg:"#004E5F",name:"Video Stills"},[Pt.STORY]:{color:"#EDB1FF",bg:"#4A0072",name:"Storyboard"},[Pt.ADLINKS]:{color:"#7DDAAF",bg:"#005231",name:"Ad Link Gen"},[Pt.RENAME]:{color:"#FFE082",bg:"#422006",name:"Batch Renamer"}},xT=()=>{const[n,t]=ht.useState(Pt.HOME),e=g1[n]||g1[Pt.HOME],s=()=>{switch(n){case Pt.HOME:return E.jsx(Xw,{onNavigate:t});case Pt.LOGO:return E.jsx(dE,{});case Pt.PDF:return E.jsx(pT,{});case Pt.SPLIT:return E.jsx(gT,{});case Pt.STILLS:return E.jsx(vT,{});case Pt.STORY:return E.jsx(mT,{});case Pt.ADLINKS:return E.jsx(yT,{});case Pt.RENAME:return E.jsx(wT,{});default:return E.jsx(Xw,{onNavigate:t})}},i=n===Pt.HOME;return E.jsxs("div",{className:"flex flex-col h-screen overflow-hidden text-[#E6E1E5] selection:bg-[#D0BCFF] selection:text-[#381E72] bg-[#000000]",children:[E.jsxs("header",{className:"h-16 bg-[#000000] border-b border-[#111] flex items-center justify-between px-6 shrink-0 z-30",children:[E.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group",onClick:()=>t(Pt.HOME),children:[E.jsx("div",{className:"p-2 rounded-xl transition-colors shadow-sm duration-300",style:{backgroundColor:e.color,color:e.bg},children:E.jsx(bT,{className:"w-5 h-5"})}),E.jsx("span",{className:"font-display font-bold text-xl tracking-tight text-[#E6E1E5] group-hover:text-white transition-colors",children:e.name})]}),E.jsx("div",{className:"flex items-center gap-4",children:E.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-[#666] bg-[#111] px-3 py-1 rounded-full border border-[#222]",children:"Beta v1.0"})})]}),E.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[!i&&E.jsx("div",{className:`
                fixed bottom-0 left-0 w-full z-50 flex
                md:relative md:w-auto md:h-auto md:flex bg-[#000000] border-t md:border-t-0 md:border-r border-[#111]
            `,children:E.jsx(Tk,{currentView:n,onChangeView:t,activeColor:e.color,activeBg:e.bg})}),E.jsx("main",{className:"flex-1 overflow-hidden relative bg-[#000000]",children:E.jsx("div",{className:`h-full w-full mx-auto ${i?"overflow-y-auto":"overflow-hidden"}`,children:E.jsx("div",{className:"p-4 md:p-6 max-w-[1920px] mx-auto h-full",children:s()})})})]})]})},jA=document.getElementById("root");if(!jA)throw new Error("Could not find root element to mount to");const _T=lm.createRoot(jA);_T.render(E.jsx(rS.StrictMode,{children:E.jsx(xT,{})}));
